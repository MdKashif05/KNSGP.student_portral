{"file_contents":{"client/src/components/StatCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { LucideIcon } from \"lucide-react\";\n\ninterface StatCardProps {\n  title: string;\n  value: string | number;\n  icon: LucideIcon;\n  description?: string;\n  trend?: {\n    value: number;\n    isPositive: boolean;\n  };\n}\n\nexport default function StatCard({ title, value, icon: Icon, description, trend }: StatCardProps) {\n  return (\n    <Card className=\"hover-elevate hover-lift smooth-transition group\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-sm text-muted-foreground mb-1 smooth-transition\">{title}</p>\n            <h3 className=\"text-3xl font-bold text-foreground smooth-transition group-hover:text-primary\" data-testid={`text-${title.toLowerCase().replace(/\\s+/g, '-')}-value`}>\n              {value}\n            </h3>\n            {description && (\n              <p className=\"text-xs text-muted-foreground mt-2 smooth-transition\">{description}</p>\n            )}\n            {trend && (\n              <div className=\"flex items-center mt-2 smooth-transition\">\n                <span className={`text-xs font-medium ${trend.isPositive ? 'text-success' : 'text-error'}`}>\n                  {trend.isPositive ? '↑' : '↓'} {Math.abs(trend.value)}%\n                </span>\n                <span className=\"text-xs text-muted-foreground ml-2\">vs last month</span>\n              </div>\n            )}\n          </div>\n          <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center smooth-transition group-hover:bg-primary/20\">\n            <Icon className=\"h-6 w-6 text-primary smooth-transition\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1782},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/EditBookDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EditBookDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  book: any;\n  onSuccess: () => void;\n}\n\nexport default function EditBookDialog({ open, onOpenChange, book, onSuccess }: EditBookDialogProps) {\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [totalCopies, setTotalCopies] = useState(\"\");\n  const [copiesAvailable, setCopiesAvailable] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (book) {\n      setTitle(book.title || \"\");\n      setAuthor(book.author || \"\");\n      setTotalCopies(book.totalCopies?.toString() || \"\");\n      setCopiesAvailable(book.copiesAvailable?.toString() || \"\");\n    }\n  }, [book]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!title || !author || !totalCopies || !copiesAvailable) {\n      toast({\n        title: \"Error\",\n        description: \"All fields are required\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const total = parseInt(totalCopies);\n    const available = parseInt(copiesAvailable);\n\n    if (isNaN(total) || isNaN(available) || total < 0 || available < 0) {\n      toast({\n        title: \"Error\",\n        description: \"Invalid number of copies\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (available > total) {\n      toast({\n        title: \"Error\",\n        description: \"Available copies cannot exceed total copies\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"PUT\", `/api/library/books/${book.id}`, {\n        title: title.trim(),\n        author: author.trim(),\n        totalCopies: total,\n        copiesAvailable: available,\n      });\n\n      await response.json();\n\n      toast({\n        title: \"Success\",\n        description: \"Book updated successfully\",\n      });\n\n      onSuccess();\n      onOpenChange(false);\n      \n      // Reset form\n      setTitle(\"\");\n      setAuthor(\"\");\n      setTotalCopies(\"\");\n      setCopiesAvailable(\"\");\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update book\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Edit Library Book</DialogTitle>\n          <DialogDescription>Update book information</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit}>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-title\">Book Title</Label>\n              <Input\n                id=\"edit-title\"\n                data-testid=\"input-edit-title\"\n                placeholder=\"e.g., Introduction to Algorithms\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-author\">Author</Label>\n              <Input\n                id=\"edit-author\"\n                data-testid=\"input-edit-author\"\n                placeholder=\"e.g., Thomas H. Cormen\"\n                value={author}\n                onChange={(e) => setAuthor(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-total\">Total Copies</Label>\n                <Input\n                  id=\"edit-total\"\n                  data-testid=\"input-edit-total\"\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"e.g., 5\"\n                  value={totalCopies}\n                  onChange={(e) => setTotalCopies(e.target.value)}\n                  disabled={isLoading}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-available\">Available</Label>\n                <Input\n                  id=\"edit-available\"\n                  data-testid=\"input-edit-available\"\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"e.g., 3\"\n                  value={copiesAvailable}\n                  onChange={(e) => setCopiesAvailable(e.target.value)}\n                  disabled={isLoading}\n                />\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={isLoading}\n              data-testid=\"button-cancel-edit\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-save-book\">\n              {isLoading ? \"Saving...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5596},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/AddNoticeDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AddNoticeDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function AddNoticeDialog({ open, onOpenChange, onSuccess }: AddNoticeDialogProps) {\n  const [title, setTitle] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [priority, setPriority] = useState(\"normal\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/notices\", {\n        title,\n        message,\n        priority,\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Notice added successfully\",\n      });\n\n      setTitle(\"\");\n      setMessage(\"\");\n      setPriority(\"normal\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add notice\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add New Notice</DialogTitle>\n          <DialogDescription>Send a notice to all students</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Title</Label>\n            <Input\n              id=\"title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Enter notice title\"\n              required\n              data-testid=\"input-notice-title\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"message\">Message</Label>\n            <Textarea\n              id=\"message\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Enter notice message\"\n              required\n              rows={4}\n              data-testid=\"textarea-notice-message\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"priority\">Priority</Label>\n            <Select value={priority} onValueChange={setPriority}>\n              <SelectTrigger data-testid=\"select-notice-priority\">\n                <SelectValue placeholder=\"Select priority\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"low\">Low</SelectItem>\n                <SelectItem value=\"normal\">Normal</SelectItem>\n                <SelectItem value=\"high\">High</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-submit-notice\">\n              {isLoading ? \"Adding...\" : \"Add Notice\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3793},"client/src/components/AdminDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport AdminSidebar from \"./AdminSidebar\";\nimport StatCard from \"./StatCard\";\nimport AttendanceChart from \"./AttendanceChart\";\nimport MarksChart from \"./MarksChart\";\nimport AttendanceOverviewChart from \"./AttendanceOverviewChart\";\nimport MarksDistributionChart from \"./MarksDistributionChart\";\nimport SubjectPerformanceChart from \"./SubjectPerformanceChart\";\nimport LibraryStatisticsChart from \"./LibraryStatisticsChart\";\nimport DataTable from \"./DataTable\";\nimport LibraryBookCard from \"./LibraryBookCard\";\nimport AddStudentDialog from \"./AddStudentDialog\";\nimport AddSubjectDialog from \"./AddSubjectDialog\";\nimport AddBookDialog from \"./AddBookDialog\";\nimport EditStudentDialog from \"./EditStudentDialog\";\nimport EditSubjectDialog from \"./EditSubjectDialog\";\nimport EditBookDialog from \"./EditBookDialog\";\nimport AddAttendanceDialog from \"./AddAttendanceDialog\";\nimport EditAttendanceDialog from \"./EditAttendanceDialog\";\nimport AddMarksDialog from \"./AddMarksDialog\";\nimport EditMarksDialog from \"./EditMarksDialog\";\nimport UploadMarksCSVDialog from \"./UploadMarksCSVDialog\";\nimport AddNoticeDialog from \"./AddNoticeDialog\";\nimport EditNoticeDialog from \"./EditNoticeDialog\";\nimport DeleteConfirmDialog from \"./DeleteConfirmDialog\";\nimport IssueBookDialog from \"./IssueBookDialog\";\nimport ReturnBookDialog from \"./ReturnBookDialog\";\nimport { Users, TrendingUp, BookOpen, Award, Plus, Upload, Pencil, Search, BookMarked } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface AdminDashboardProps {\n  adminName: string;\n  onLogout?: () => void;\n}\n\nexport default function AdminDashboard({ adminName, onLogout }: AdminDashboardProps) {\n  const [activeSection, setActiveSection] = useState(\"dashboard\");\n  const [showAddStudentDialog, setShowAddStudentDialog] = useState(false);\n  const [showAddSubjectDialog, setShowAddSubjectDialog] = useState(false);\n  const [showAddBookDialog, setShowAddBookDialog] = useState(false);\n  const [showEditStudentDialog, setShowEditStudentDialog] = useState(false);\n  const [showEditSubjectDialog, setShowEditSubjectDialog] = useState(false);\n  const [showEditBookDialog, setShowEditBookDialog] = useState(false);\n  const [showAddAttendanceDialog, setShowAddAttendanceDialog] = useState(false);\n  const [showEditAttendanceDialog, setShowEditAttendanceDialog] = useState(false);\n  const [showAddMarksDialog, setShowAddMarksDialog] = useState(false);\n  const [showEditMarksDialog, setShowEditMarksDialog] = useState(false);\n  const [showUploadCSVDialog, setShowUploadCSVDialog] = useState(false);\n  const [showAddNoticeDialog, setShowAddNoticeDialog] = useState(false);\n  const [showEditNoticeDialog, setShowEditNoticeDialog] = useState(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [showIssueBookDialog, setShowIssueBookDialog] = useState(false);\n  const [showReturnBookDialog, setShowReturnBookDialog] = useState(false);\n  const [itemToEdit, setItemToEdit] = useState<any>(null);\n  const [itemToDelete, setItemToDelete] = useState<any>(null);\n  const [bookToIssue, setBookToIssue] = useState<any>(null);\n  const [issueToReturn, setIssueToReturn] = useState<any>(null);\n  const [deleteType, setDeleteType] = useState<'student' | 'subject' | 'book' | 'attendance' | 'marks' | 'notice' | null>(null);\n  const [attendanceSearch, setAttendanceSearch] = useState(\"\");\n  const [marksSearch, setMarksSearch] = useState(\"\");\n  const { toast } = useToast();\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  // Fetch students\n  const { data: students = [], refetch: refetchStudents } = useQuery<any[]>({\n    queryKey: ['/api/students'],\n    enabled: activeSection === 'dashboard' || activeSection === 'students' || activeSection === 'reports',\n  });\n\n  // Fetch subjects\n  const { data: subjects = [], refetch: refetchSubjects } = useQuery<any[]>({\n    queryKey: ['/api/subjects'],\n    enabled: activeSection === 'dashboard' || activeSection === 'subjects' || activeSection === 'reports',\n  });\n\n  // Fetch library books\n  const { data: books = [], refetch: refetchBooks } = useQuery<any[]>({\n    queryKey: ['/api/library/books'],\n    enabled: activeSection === 'library' || activeSection === 'reports' || activeSection === 'dashboard',\n  });\n\n  // Fetch attendance records\n  const { data: attendance = [], refetch: refetchAttendance } = useQuery<any[]>({\n    queryKey: ['/api/attendance'],\n    enabled: activeSection === 'attendance' || activeSection === 'reports' || activeSection === 'dashboard',\n  });\n\n  // Fetch marks records\n  const { data: marks = [], refetch: refetchMarks } = useQuery<any[]>({\n    queryKey: ['/api/marks'],\n    enabled: activeSection === 'marks' || activeSection === 'reports' || activeSection === 'dashboard',\n  });\n\n  // Fetch notices\n  const { data: notices = [], refetch: refetchNotices } = useQuery<any[]>({\n    queryKey: ['/api/notices'],\n    enabled: activeSection === 'notices',\n  });\n\n  // Fetch book issues\n  const { data: bookIssues = [], refetch: refetchBookIssues } = useQuery<any[]>({\n    queryKey: ['/api/library/issues'],\n    enabled: activeSection === 'library' || activeSection === 'reports' || activeSection === 'dashboard',\n  });\n\n  // Delete mutation\n  const deleteMutation = useMutation({\n    mutationFn: async ({ type, id }: { type: string; id: number }) => {\n      const endpoints: Record<string, string> = {\n        student: '/api/students',\n        subject: '/api/subjects',\n        book: '/api/library/books',\n        attendance: '/api/attendance',\n        marks: '/api/marks',\n        notice: '/api/notices',\n      };\n      return await apiRequest('DELETE', `${endpoints[type]}/${id}`);\n    },\n    onSuccess: (_, { type }) => {\n      toast({\n        title: \"Success\",\n        description: `${type.charAt(0).toUpperCase() + type.slice(1)} deleted successfully`,\n      });\n      if (type === 'student') refetchStudents();\n      if (type === 'subject') refetchSubjects();\n      if (type === 'book') refetchBooks();\n      if (type === 'attendance') {\n        refetchAttendance();\n        refetchStudents(); // Update student totals\n      }\n      if (type === 'marks') {\n        refetchMarks();\n        refetchStudents(); // Update student totals\n      }\n      if (type === 'notice') refetchNotices();\n      setShowDeleteDialog(false);\n      setItemToDelete(null);\n      setDeleteType(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleEdit = (type: 'student' | 'subject' | 'book' | 'attendance' | 'marks' | 'notice', item: any) => {\n    setItemToEdit(item);\n    if (type === 'student') setShowEditStudentDialog(true);\n    if (type === 'subject') setShowEditSubjectDialog(true);\n    if (type === 'book') setShowEditBookDialog(true);\n    if (type === 'attendance') setShowEditAttendanceDialog(true);\n    if (type === 'marks') setShowEditMarksDialog(true);\n    if (type === 'notice') setShowEditNoticeDialog(true);\n  };\n\n  const handleDelete = (type: 'student' | 'subject' | 'book' | 'attendance' | 'marks' | 'notice', item: any) => {\n    setDeleteType(type);\n    setItemToDelete(item);\n    setShowDeleteDialog(true);\n  };\n\n  const confirmDelete = () => {\n    if (itemToDelete && deleteType) {\n      deleteMutation.mutate({ type: deleteType, id: itemToDelete.id });\n    }\n  };\n\n  const studentsColumns = [\n    { key: 'rollNo', label: 'Roll Number' },\n    { key: 'name', label: 'Name' },\n    { \n      key: 'attendancePercentage', \n      label: 'Attendance',\n      render: (value: string) => {\n        const percentage = parseFloat(value);\n        return (\n          <Badge variant={percentage >= 75 ? 'default' : 'destructive'}>\n            {value}%\n          </Badge>\n        );\n      }\n    },\n    { key: 'avgMarks', label: 'Avg Marks' },\n    { key: 'booksIssued', label: 'Books' },\n  ];\n\n  const subjectsColumns = [\n    { key: 'code', label: 'Subject Code' },\n    { key: 'name', label: 'Subject Name' },\n    { key: 'instructor', label: 'Instructor' },\n  ];\n\n  const attendanceColumns = [\n    { \n      key: 'studentRollNo', \n      label: 'Roll No',\n      render: (_: any, row: any) => {\n        const student = students.find(s => s.id === row.studentId);\n        return student ? student.rollNo : row.studentId;\n      }\n    },\n    { \n      key: 'studentName', \n      label: 'Student Name',\n      render: (_: any, row: any) => {\n        const student = students.find(s => s.id === row.studentId);\n        return student ? student.name : 'Unknown';\n      }\n    },\n    { \n      key: 'subjectCode', \n      label: 'Subject Code',\n      render: (_: any, row: any) => {\n        const subject = subjects.find(s => s.id === row.subjectId);\n        return subject ? subject.code : row.subjectId;\n      }\n    },\n    { \n      key: 'subjectName', \n      label: 'Subject Name',\n      render: (_: any, row: any) => {\n        const subject = subjects.find(s => s.id === row.subjectId);\n        return subject ? subject.name : 'Unknown';\n      }\n    },\n    { key: 'month', label: 'Month' },\n    { key: 'presentDays', label: 'Present Days' },\n    { key: 'totalDays', label: 'Total Days' },\n    { \n      key: 'percentage', \n      label: 'Percentage',\n      render: (value: number) => `${value.toFixed(1)}%`\n    },\n    { \n      key: 'status', \n      label: 'Status',\n      render: (value: string) => (\n        <Badge variant={value === 'Good' ? 'default' : value === 'Average' ? 'secondary' : 'destructive'}>\n          {value}\n        </Badge>\n      )\n    },\n  ];\n\n  const marksColumns = [\n    { \n      key: 'studentRollNo', \n      label: 'Roll No',\n      render: (_: any, row: any) => {\n        const student = students.find(s => s.id === row.studentId);\n        return student ? student.rollNo : row.studentId;\n      }\n    },\n    { \n      key: 'studentName', \n      label: 'Student Name',\n      render: (_: any, row: any) => {\n        const student = students.find(s => s.id === row.studentId);\n        return student ? student.name : 'Unknown';\n      }\n    },\n    { \n      key: 'subjectCode', \n      label: 'Subject Code',\n      render: (_: any, row: any) => {\n        const subject = subjects.find(s => s.id === row.subjectId);\n        return subject ? subject.code : row.subjectId;\n      }\n    },\n    { \n      key: 'subjectName', \n      label: 'Subject Name',\n      render: (_: any, row: any) => {\n        const subject = subjects.find(s => s.id === row.subjectId);\n        return subject ? subject.name : 'Unknown';\n      }\n    },\n    { key: 'month', label: 'Month' },\n    { key: 'testName', label: 'Test Name' },\n    { \n      key: 'marksObtained', \n      label: 'Marks',\n      render: (value: number, row: any) => `${value} / ${row.totalMarks}`\n    },\n    { \n      key: 'percentage', \n      label: 'Percentage',\n      render: (value: number) => `${value.toFixed(1)}%`\n    },\n    { \n      key: 'grade', \n      label: 'Grade',\n      render: (value: string) => (\n        <Badge variant={['A+', 'A'].includes(value) ? 'default' : ['B+', 'B'].includes(value) ? 'secondary' : value === 'C' ? 'outline' : 'destructive'}>\n          {value}\n        </Badge>\n      )\n    },\n  ];\n\n  const noticesColumns = [\n    { key: 'title', label: 'Title' },\n    { key: 'message', label: 'Message' },\n    { \n      key: 'priority', \n      label: 'Priority',\n      render: (value: string) => (\n        <Badge variant={value === 'high' ? 'destructive' : value === 'normal' ? 'default' : 'secondary'}>\n          {value.toUpperCase()}\n        </Badge>\n      )\n    },\n    { \n      key: 'createdAt', \n      label: 'Created',\n      render: (value: string) => new Date(value).toLocaleDateString()\n    },\n  ];\n\n  // Calculate dashboard stats\n  const totalStudents = students.length;\n  const avgAttendance = students.length > 0 \n    ? (students.reduce((sum: number, s: any) => sum + parseFloat(s.attendancePercentage || 0), 0) / students.length).toFixed(1)\n    : '0.0';\n  const avgMarks = students.length > 0\n    ? (students.reduce((sum: number, s: any) => sum + parseFloat(s.avgMarks || 0), 0) / students.length).toFixed(1)\n    : '0.0';\n  const totalBooksIssued = students.reduce((sum: number, s: any) => sum + (s.booksIssued || 0), 0);\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case \"dashboard\":\n        return (\n          <div className=\"space-y-6 fade-in\">\n            {/* Stats Cards */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div className=\"slide-up\" style={{animationDelay: '0.1s'}}>\n                <StatCard title=\"Total Students\" value={totalStudents.toString()} icon={Users} description=\"Active enrollments\" />\n              </div>\n              <div className=\"slide-up\" style={{animationDelay: '0.2s'}}>\n                <StatCard title=\"Avg Attendance\" value={`${avgAttendance}%`} icon={TrendingUp} />\n              </div>\n              <div className=\"slide-up\" style={{animationDelay: '0.3s'}}>\n                <StatCard title=\"Books Issued\" value={totalBooksIssued.toString()} icon={BookOpen} description=\"Currently checked out\" />\n              </div>\n              <div className=\"slide-up\" style={{animationDelay: '0.4s'}}>\n                <StatCard title=\"Avg Marks\" value={avgMarks} icon={Award} />\n              </div>\n            </div>\n\n            {/* Charts Section */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n              <div className=\"slide-up\" style={{animationDelay: '0.5s'}}>\n                <AttendanceOverviewChart data={attendance} />\n              </div>\n              <div className=\"slide-up\" style={{animationDelay: '0.6s'}}>\n                <MarksDistributionChart data={marks} />\n              </div>\n              <div className=\"slide-up\" style={{animationDelay: '0.7s'}}>\n                <SubjectPerformanceChart marks={marks} subjects={subjects} />\n              </div>\n              <div className=\"slide-up\" style={{animationDelay: '0.8s'}}>\n                <LibraryStatisticsChart books={books} />\n              </div>\n            </div>\n          </div>\n        );\n\n      case \"students\":\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n              <div>\n                <h2 className=\"text-2xl sm:text-3xl font-bold gradient-text\">Student Management</h2>\n                <p className=\"text-sm sm:text-base text-muted-foreground mt-1\">Manage all student records</p>\n              </div>\n              <Button \n                onClick={() => setShowAddStudentDialog(true)}\n                data-testid=\"button-add-student\"\n                className=\"w-full sm:w-auto\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Student\n              </Button>\n            </div>\n            <DataTable\n              title=\"All Students\"\n              description=\"Complete list of enrolled students\"\n              columns={studentsColumns}\n              data={students}\n              actions={true}\n              onEdit={(row) => handleEdit('student', row)}\n              onDelete={(row) => handleDelete('student', row)}\n            />\n          </div>\n        );\n\n      case \"subjects\":\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n              <div>\n                <h2 className=\"text-2xl sm:text-3xl font-bold gradient-text\">Subject Management</h2>\n                <p className=\"text-sm sm:text-base text-muted-foreground mt-1\">Manage all subjects and courses</p>\n              </div>\n              <Button \n                onClick={() => setShowAddSubjectDialog(true)}\n                data-testid=\"button-add-subject\"\n                className=\"w-full sm:w-auto\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Subject\n              </Button>\n            </div>\n            <DataTable\n              title=\"All Subjects\"\n              description=\"Complete list of subjects\"\n              columns={subjectsColumns}\n              data={subjects}\n              actions={true}\n              onEdit={(row) => handleEdit('subject', row)}\n              onDelete={(row) => handleDelete('subject', row)}\n            />\n          </div>\n        );\n\n      case \"attendance\":\n        // Filter attendance based on search term\n        const filteredAttendance = attendance.filter((record: any) => {\n          if (!attendanceSearch.trim()) return true;\n          \n          const student = students.find(s => s.id === record.studentId);\n          const subject = subjects.find(s => s.id === record.subjectId);\n          const searchLower = attendanceSearch.toLowerCase();\n          \n          const studentName = student?.name?.toLowerCase();\n          const studentRollNo = student?.rollNo?.toLowerCase();\n          const subjectName = subject?.name?.toLowerCase();\n          const subjectCode = subject?.code?.toLowerCase();\n          const month = record.month?.toLowerCase();\n          \n          return (\n            (studentName && studentName.includes(searchLower)) ||\n            (studentRollNo && studentRollNo.includes(searchLower)) ||\n            (subjectName && subjectName.includes(searchLower)) ||\n            (subjectCode && subjectCode.includes(searchLower)) ||\n            (month && month.includes(searchLower))\n          );\n        });\n\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n              <div>\n                <h2 className=\"text-2xl sm:text-3xl font-bold gradient-text\">Attendance Management</h2>\n                <p className=\"text-sm sm:text-base text-muted-foreground mt-1\">Track and manage monthly attendance records</p>\n              </div>\n              <Button \n                onClick={() => setShowAddAttendanceDialog(true)}\n                data-testid=\"button-add-attendance\"\n                className=\"w-full sm:w-auto\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Attendance\n              </Button>\n            </div>\n            \n            {/* Search Bar */}\n            <div className=\"relative w-full sm:w-96\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                type=\"text\"\n                placeholder=\"Search by student name, roll no, subject...\"\n                value={attendanceSearch}\n                onChange={(e) => setAttendanceSearch(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-attendance\"\n              />\n            </div>\n\n            <DataTable\n              title=\"Attendance Records\"\n              description={`Showing ${filteredAttendance.length} of ${attendance.length} records`}\n              columns={attendanceColumns}\n              data={filteredAttendance}\n              actions={true}\n              onEdit={(row) => handleEdit('attendance', row)}\n              onDelete={(row) => handleDelete('attendance', row)}\n            />\n          </div>\n        );\n\n      case \"marks\":\n        // Filter marks based on search term\n        const filteredMarks = marks.filter((record: any) => {\n          if (!marksSearch.trim()) return true;\n          \n          const student = students.find(s => s.id === record.studentId);\n          const subject = subjects.find(s => s.id === record.subjectId);\n          const searchLower = marksSearch.toLowerCase();\n          \n          const studentName = student?.name?.toLowerCase();\n          const studentRollNo = student?.rollNo?.toLowerCase();\n          const subjectName = subject?.name?.toLowerCase();\n          const subjectCode = subject?.code?.toLowerCase();\n          const month = record.month?.toLowerCase();\n          const testName = record.testName?.toLowerCase();\n          const grade = record.grade?.toLowerCase();\n          \n          return (\n            (studentName && studentName.includes(searchLower)) ||\n            (studentRollNo && studentRollNo.includes(searchLower)) ||\n            (subjectName && subjectName.includes(searchLower)) ||\n            (subjectCode && subjectCode.includes(searchLower)) ||\n            (month && month.includes(searchLower)) ||\n            (testName && testName.includes(searchLower)) ||\n            (grade && grade.includes(searchLower))\n          );\n        });\n\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n              <div>\n                <h2 className=\"text-2xl sm:text-3xl font-bold gradient-text\">Marks Management</h2>\n                <p className=\"text-sm sm:text-base text-muted-foreground mt-1\">Upload and manage student marks</p>\n              </div>\n              <div className=\"flex flex-col sm:flex-row gap-2 w-full sm:w-auto\">\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowUploadCSVDialog(true)}\n                  data-testid=\"button-upload-marks-csv\"\n                  className=\"w-full sm:w-auto\"\n                >\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                  Upload CSV\n                </Button>\n                <Button \n                  onClick={() => setShowAddMarksDialog(true)}\n                  data-testid=\"button-add-marks\"\n                  className=\"w-full sm:w-auto\"\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Marks\n                </Button>\n              </div>\n            </div>\n\n            {/* Search Bar */}\n            <div className=\"relative w-full md:w-96\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                type=\"text\"\n                placeholder=\"Search by student, subject, test name...\"\n                value={marksSearch}\n                onChange={(e) => setMarksSearch(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-marks\"\n              />\n            </div>\n\n            <DataTable\n              title=\"Marks Records\"\n              description={`Showing ${filteredMarks.length} of ${marks.length} records`}\n              columns={marksColumns}\n              data={filteredMarks}\n              actions={true}\n              onEdit={(row) => handleEdit('marks', row)}\n              onDelete={(row) => handleDelete('marks', row)}\n            />\n          </div>\n        );\n\n      case \"library\":\n        const issuedBooks = bookIssues.filter((issue: any) => issue.status === 'issued');\n        \n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n              <div>\n                <h2 className=\"text-2xl font-bold\">Library Management</h2>\n                <p className=\"text-muted-foreground\">Manage books and issue records</p>\n              </div>\n              <Button \n                onClick={() => setShowAddBookDialog(true)}\n                data-testid=\"button-add-book\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Book\n              </Button>\n            </div>\n\n            {/* Issued Books Section */}\n            {issuedBooks.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <BookMarked className=\"h-5 w-5\" />\n                    Issued Books ({issuedBooks.length})\n                  </CardTitle>\n                  <CardDescription>Books currently issued to students</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-2\">\n                    {issuedBooks.map((issue: any) => {\n                      const book = books.find((b: any) => b.id === issue.bookId);\n                      const student = students.find((s: any) => s.id === issue.studentId);\n                      return (\n                        <div key={issue.id} className=\"flex items-center justify-between p-3 border rounded-lg hover-elevate\">\n                          <div className=\"flex-1\">\n                            <p className=\"font-medium text-sm\">{book?.title || \"Unknown Book\"}</p>\n                            <p className=\"text-xs text-muted-foreground\">\n                              Issued to: {student?.name || \"Unknown\"} ({student?.rollNo || \"N/A\"}) • Due: {issue.dueDate}\n                            </p>\n                          </div>\n                          <Button\n                            size=\"sm\"\n                            onClick={() => {\n                              setIssueToReturn({ ...issue, book, student });\n                              setShowReturnBookDialog(true);\n                            }}\n                            data-testid={`button-return-${issue.id}`}\n                          >\n                            Return\n                          </Button>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Available Books Section */}\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">All Books</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {books.map((book: any) => (\n                  <div key={book.id} className=\"relative\">\n                    <LibraryBookCard\n                      title={book.title}\n                      author={book.author}\n                      copiesAvailable={book.copiesAvailable}\n                      totalCopies={book.totalCopies}\n                      onIssue={() => {\n                        setBookToIssue(book);\n                        setShowIssueBookDialog(true);\n                      }}\n                    />\n                    <div className=\"absolute top-2 right-2 flex gap-1\">\n                      <Button\n                        size=\"icon\"\n                        variant=\"ghost\"\n                        className=\"h-8 w-8\"\n                        onClick={() => handleEdit('book', book)}\n                        data-testid={`button-edit-book-${book.id}`}\n                      >\n                        <Pencil className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        size=\"icon\"\n                        variant=\"ghost\"\n                        className=\"h-8 w-8\"\n                        onClick={() => handleDelete('book', book)}\n                        data-testid={`button-delete-book-${book.id}`}\n                      >\n                        <span className=\"text-xs\">×</span>\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        );\n\n      case \"notices\":\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <div>\n                <h2 className=\"text-2xl font-bold\">Notice Management</h2>\n                <p className=\"text-muted-foreground\">Send and manage notices for students</p>\n              </div>\n              <Button \n                onClick={() => setShowAddNoticeDialog(true)}\n                data-testid=\"button-add-notice\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Notice\n              </Button>\n            </div>\n            <DataTable\n              title=\"All Notices\"\n              description=\"Student notices and announcements\"\n              columns={noticesColumns}\n              data={notices}\n              actions={true}\n              onEdit={(row) => handleEdit('notice', row)}\n              onDelete={(row) => handleDelete('notice', row)}\n            />\n          </div>\n        );\n\n      case \"reports\":\n        // Calculate analytics\n        const reportsStudentCount = students.length;\n        const reportsSubjectCount = subjects.length;\n        const reportsBooksCount = books.length;\n        const reportsAttendanceRecords = attendance.length;\n        const reportsMarksRecords = marks.length;\n        \n        // Calculate overall attendance percentage\n        const totalPresentDays = attendance.reduce((sum: number, a: any) => sum + (a.presentDays || 0), 0);\n        const totalDaysCount = attendance.reduce((sum: number, a: any) => sum + (a.totalDays || 0), 0);\n        const overallAttendance = totalDaysCount > 0 \n          ? ((totalPresentDays / totalDaysCount) * 100).toFixed(1)\n          : '0.0';\n        \n        // Calculate average marks percentage\n        const totalMarksObtained = marks.reduce((sum: number, m: any) => sum + (m.marksObtained || 0), 0);\n        const totalMarksTotal = marks.reduce((sum: number, m: any) => sum + (m.totalMarks || 0), 0);\n        const reportsAvgMarks = totalMarksTotal > 0 \n          ? ((totalMarksObtained / totalMarksTotal) * 100).toFixed(1)\n          : '0.0';\n        \n        // Subject-wise performance\n        const subjectPerformance = subjects.map((subject: any) => {\n          const subjectMarks = marks.filter((m: any) => m.subjectId === subject.id);\n          const subjectAttendance = attendance.filter((a: any) => a.subjectId === subject.id);\n          \n          const subjectMarksObtained = subjectMarks.reduce((sum: number, m: any) => sum + (m.marksObtained || 0), 0);\n          const subjectMarksTotal = subjectMarks.reduce((sum: number, m: any) => sum + (m.totalMarks || 0), 0);\n          const avgSubjectMarks = subjectMarksTotal > 0\n            ? ((subjectMarksObtained / subjectMarksTotal) * 100).toFixed(1)\n            : '0.0';\n          \n          const subjectPresentDays = subjectAttendance.reduce((sum: number, a: any) => sum + (a.presentDays || 0), 0);\n          const subjectTotalDays = subjectAttendance.reduce((sum: number, a: any) => sum + (a.totalDays || 0), 0);\n          const subjectAttendancePerc = subjectTotalDays > 0\n            ? ((subjectPresentDays / subjectTotalDays) * 100).toFixed(1)\n            : '0.0';\n          \n          return {\n            name: subject.name,\n            code: subject.code,\n            avgMarks: avgSubjectMarks,\n            attendance: subjectAttendancePerc,\n          };\n        });\n        \n        // Student performance ranking\n        const studentPerformance = students.map((student: any) => {\n          const studentMarks = marks.filter((m: any) => m.studentId === student.id);\n          const studentAttendance = attendance.filter((a: any) => a.studentId === student.id);\n          \n          const studentMarksObtained = studentMarks.reduce((sum: number, m: any) => sum + (m.marksObtained || 0), 0);\n          const studentMarksTotal = studentMarks.reduce((sum: number, m: any) => sum + (m.totalMarks || 0), 0);\n          const avgStudentMarks = studentMarksTotal > 0\n            ? (studentMarksObtained / studentMarksTotal) * 100\n            : 0;\n          \n          const studentPresentDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.presentDays || 0), 0);\n          const studentTotalDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.totalDays || 0), 0);\n          const studentAttendancePerc = studentTotalDays > 0\n            ? (studentPresentDays / studentTotalDays) * 100\n            : 0;\n          \n          return {\n            rollNo: student.rollNo,\n            name: student.name,\n            avgMarks: avgStudentMarks,\n            attendance: studentAttendancePerc,\n          };\n        }).sort((a, b) => b.avgMarks - a.avgMarks);\n        \n        const topPerformers = studentPerformance.slice(0, 5);\n        const bottomPerformers = studentPerformance.slice(-5).reverse();\n        \n        // Attendance distribution\n        const goodAttendance = students.filter((student: any) => {\n          const studentAttendance = attendance.filter((a: any) => a.studentId === student.id);\n          const presentDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.presentDays || 0), 0);\n          const totalDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.totalDays || 0), 0);\n          const perc = totalDays > 0 ? (presentDays / totalDays) * 100 : 0;\n          return perc >= 80;\n        }).length;\n        \n        const averageAttendance = students.filter((student: any) => {\n          const studentAttendance = attendance.filter((a: any) => a.studentId === student.id);\n          const presentDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.presentDays || 0), 0);\n          const totalDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.totalDays || 0), 0);\n          const perc = totalDays > 0 ? (presentDays / totalDays) * 100 : 0;\n          return perc >= 60 && perc < 80;\n        }).length;\n        \n        const poorAttendance = students.filter((student: any) => {\n          const studentAttendance = attendance.filter((a: any) => a.studentId === student.id);\n          const presentDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.presentDays || 0), 0);\n          const totalDays = studentAttendance.reduce((sum: number, a: any) => sum + (a.totalDays || 0), 0);\n          const perc = totalDays > 0 ? (presentDays / totalDays) * 100 : 0;\n          return perc < 60;\n        }).length;\n        \n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-2xl font-bold\">Reports & Analytics</h2>\n              <p className=\"text-muted-foreground\">Comprehensive insights and performance metrics</p>\n            </div>\n            \n            {/* Overview Statistics */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <StatCard title=\"Total Students\" value={reportsStudentCount.toString()} icon={Users} />\n              <StatCard title=\"Overall Attendance\" value={`${overallAttendance}%`} icon={TrendingUp} />\n              <StatCard title=\"Average Marks\" value={`${reportsAvgMarks}%`} icon={Award} />\n              <StatCard title=\"Total Books\" value={reportsBooksCount.toString()} icon={BookOpen} />\n            </div>\n            \n            {/* Subject Performance */}\n            {subjectPerformance.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Subject-wise Performance</CardTitle>\n                  <CardDescription>Average marks and attendance by subject</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {subjectPerformance.map((subject: any, index: number) => (\n                      <div key={index} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium\">{subject.name} ({subject.code})</p>\n                        </div>\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"text-right\">\n                            <p className=\"text-sm text-muted-foreground\">Avg Marks</p>\n                            <p className=\"font-semibold\">{subject.avgMarks}%</p>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"text-sm text-muted-foreground\">Attendance</p>\n                            <Badge variant={\n                              parseFloat(subject.attendance) >= 80 ? 'default' : \n                              parseFloat(subject.attendance) >= 60 ? 'secondary' : \n                              'destructive'\n                            }>\n                              {subject.attendance}%\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n            \n            {/* Attendance Distribution */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Attendance Distribution</CardTitle>\n                <CardDescription>Student distribution by attendance percentage</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                    <div className=\"flex items-center gap-3\">\n                      <Badge variant=\"default\">≥ 80%</Badge>\n                      <span className=\"text-sm\">Good Attendance</span>\n                    </div>\n                    <span className=\"font-semibold\">{goodAttendance} students</span>\n                  </div>\n                  <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                    <div className=\"flex items-center gap-3\">\n                      <Badge variant=\"secondary\">60-79%</Badge>\n                      <span className=\"text-sm\">Average Attendance</span>\n                    </div>\n                    <span className=\"font-semibold\">{averageAttendance} students</span>\n                  </div>\n                  <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                    <div className=\"flex items-center gap-3\">\n                      <Badge variant=\"destructive\">&lt; 60%</Badge>\n                      <span className=\"text-sm\">Poor Attendance</span>\n                    </div>\n                    <span className=\"font-semibold\">{poorAttendance} students</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Top & Bottom Performers */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {topPerformers.length > 0 && (\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Top Performers</CardTitle>\n                    <CardDescription>Students with highest average marks</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      {topPerformers.map((student: any, index: number) => (\n                        <div key={index} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                          <div>\n                            <p className=\"font-medium\">{student.name}</p>\n                            <p className=\"text-xs text-muted-foreground\">{student.rollNo}</p>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"font-semibold\">{student.avgMarks.toFixed(1)}%</p>\n                            <p className=\"text-xs text-muted-foreground\">{student.attendance.toFixed(1)}% attendance</p>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n              \n              {bottomPerformers.length > 0 && (\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Need Attention</CardTitle>\n                    <CardDescription>Students requiring academic support</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      {bottomPerformers.map((student: any, index: number) => (\n                        <div key={index} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                          <div>\n                            <p className=\"font-medium\">{student.name}</p>\n                            <p className=\"text-xs text-muted-foreground\">{student.rollNo}</p>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"font-semibold\">{student.avgMarks.toFixed(1)}%</p>\n                            <p className=\"text-xs text-muted-foreground\">{student.attendance.toFixed(1)}% attendance</p>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </div>\n        );\n\n      default:\n        return <div>Select a section from the sidebar</div>;\n    }\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar \n          activeItem={activeSection}\n          onNavigate={setActiveSection}\n          onLogout={onLogout}\n        />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 sm:p-6 border-b sticky top-0 glass-effect z-10 backdrop-blur-xl\">\n            <div className=\"flex items-center gap-3 sm:gap-4\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div>\n                <h1 className=\"text-xl sm:text-2xl font-bold gradient-text\">Admin Dashboard</h1>\n                <p className=\"text-sm text-muted-foreground\">Welcome, {adminName}</p>\n              </div>\n            </div>\n          </header>\n          <main className=\"flex-1 overflow-auto p-4 sm:p-6 lg:p-8\">\n            {renderContent()}\n          </main>\n        </div>\n      </div>\n\n      <AddStudentDialog\n        open={showAddStudentDialog}\n        onOpenChange={setShowAddStudentDialog}\n        onSuccess={refetchStudents}\n      />\n\n      <AddSubjectDialog\n        open={showAddSubjectDialog}\n        onOpenChange={setShowAddSubjectDialog}\n        onSuccess={refetchSubjects}\n      />\n\n      <AddBookDialog\n        open={showAddBookDialog}\n        onOpenChange={setShowAddBookDialog}\n        onSuccess={refetchBooks}\n      />\n\n      <EditStudentDialog\n        open={showEditStudentDialog}\n        onOpenChange={setShowEditStudentDialog}\n        student={itemToEdit}\n        onSuccess={refetchStudents}\n      />\n\n      <EditSubjectDialog\n        open={showEditSubjectDialog}\n        onOpenChange={setShowEditSubjectDialog}\n        subject={itemToEdit}\n        onSuccess={refetchSubjects}\n      />\n\n      <EditBookDialog\n        open={showEditBookDialog}\n        onOpenChange={setShowEditBookDialog}\n        book={itemToEdit}\n        onSuccess={refetchBooks}\n      />\n\n      <AddAttendanceDialog\n        open={showAddAttendanceDialog}\n        onOpenChange={setShowAddAttendanceDialog}\n        onSuccess={() => {\n          refetchAttendance();\n          refetchStudents();\n        }}\n      />\n\n      <EditAttendanceDialog\n        open={showEditAttendanceDialog}\n        onOpenChange={setShowEditAttendanceDialog}\n        attendance={itemToEdit}\n        onSuccess={() => {\n          refetchAttendance();\n          refetchStudents();\n        }}\n      />\n\n      <AddMarksDialog\n        open={showAddMarksDialog}\n        onOpenChange={setShowAddMarksDialog}\n        onSuccess={() => {\n          refetchMarks();\n          refetchStudents();\n        }}\n      />\n\n      <EditMarksDialog\n        open={showEditMarksDialog}\n        onOpenChange={setShowEditMarksDialog}\n        marks={itemToEdit}\n        onSuccess={() => {\n          refetchMarks();\n          refetchStudents();\n        }}\n      />\n\n      <UploadMarksCSVDialog\n        open={showUploadCSVDialog}\n        onOpenChange={setShowUploadCSVDialog}\n        onSuccess={() => {\n          refetchMarks();\n          refetchStudents();\n        }}\n      />\n\n      <AddNoticeDialog\n        open={showAddNoticeDialog}\n        onOpenChange={setShowAddNoticeDialog}\n        onSuccess={refetchNotices}\n      />\n\n      <EditNoticeDialog\n        open={showEditNoticeDialog}\n        onOpenChange={setShowEditNoticeDialog}\n        notice={itemToEdit}\n        onSuccess={refetchNotices}\n      />\n\n      <IssueBookDialog\n        open={showIssueBookDialog}\n        onOpenChange={setShowIssueBookDialog}\n        book={bookToIssue}\n        students={students}\n        onSuccess={() => {\n          refetchBooks();\n          refetchBookIssues();\n          refetchStudents();\n        }}\n      />\n\n      <ReturnBookDialog\n        open={showReturnBookDialog}\n        onOpenChange={setShowReturnBookDialog}\n        issue={issueToReturn}\n        book={issueToReturn?.book}\n        student={issueToReturn?.student}\n        onSuccess={() => {\n          refetchBooks();\n          refetchBookIssues();\n          refetchStudents();\n        }}\n      />\n\n      <DeleteConfirmDialog\n        open={showDeleteDialog}\n        onOpenChange={setShowDeleteDialog}\n        onConfirm={confirmDelete}\n        title={`Delete ${deleteType}?`}\n        description={`Are you sure you want to delete this ${deleteType}? This action cannot be undone.`}\n        isLoading={deleteMutation.isPending}\n      />\n    </SidebarProvider>\n  );\n}\n","size_bytes":45654},"client/src/components/EditMarksDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EditMarksDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n  marks: any;\n}\n\nexport default function EditMarksDialog({ open, onOpenChange, onSuccess, marks }: EditMarksDialogProps) {\n  const [studentId, setStudentId] = useState(\"\");\n  const [subjectId, setSubjectId] = useState(\"\");\n  const [month, setMonth] = useState(\"\");\n  const [testName, setTestName] = useState(\"\");\n  const [marksObtained, setMarksObtained] = useState(\"\");\n  const [totalMarks, setTotalMarks] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Fetch students and subjects\n  const { data: students = [] } = useQuery<any[]>({ queryKey: ['/api/students'] });\n  const { data: subjects = [] } = useQuery<any[]>({ queryKey: ['/api/subjects'] });\n\n  // Pre-populate form when marks changes\n  useEffect(() => {\n    if (marks) {\n      setStudentId(marks.studentId?.toString() || \"\");\n      setSubjectId(marks.subjectId?.toString() || \"\");\n      setMonth(marks.month || \"\");\n      setTestName(marks.testName || \"\");\n      setMarksObtained(marks.marksObtained?.toString() || \"\");\n      setTotalMarks(marks.totalMarks?.toString() || \"\");\n    }\n  }, [marks]);\n\n  // Calculate percentage and grade\n  const percentage = totalMarks && marksObtained \n    ? (parseFloat(marksObtained) / parseFloat(totalMarks)) * 100 \n    : 0;\n\n  const getGrade = (pct: number) => {\n    if (pct >= 90) return 'A+';\n    if (pct >= 85) return 'A';\n    if (pct >= 80) return 'B+';\n    if (pct >= 75) return 'B';\n    if (pct >= 60) return 'C';\n    if (pct >= 50) return 'D';\n    return 'F';\n  };\n\n  const grade = getGrade(percentage);\n\n  const getGradeVariant = (g: string) => {\n    if (['A+', 'A'].includes(g)) return 'default' as const;\n    if (['B+', 'B'].includes(g)) return 'secondary' as const;\n    if (g === 'C') return 'outline' as const;\n    return 'destructive' as const;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"PUT\", `/api/marks/${marks.id}`, {\n        studentId: parseInt(studentId),\n        subjectId: parseInt(subjectId),\n        month,\n        testName,\n        marksObtained: parseFloat(marksObtained),\n        totalMarks: parseFloat(totalMarks),\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Marks updated successfully\",\n      });\n\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update marks\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Edit Marks</DialogTitle>\n          <DialogDescription>Update marks record</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"student\">Student</Label>\n            <Select value={studentId} onValueChange={setStudentId} required>\n              <SelectTrigger id=\"student\" data-testid=\"select-student\">\n                <SelectValue placeholder=\"Select student\" />\n              </SelectTrigger>\n              <SelectContent>\n                {students.map((student) => (\n                  <SelectItem key={student.id} value={student.id.toString()}>\n                    {student.rollNo} - {student.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"subject\">Subject</Label>\n            <Select value={subjectId} onValueChange={setSubjectId} required>\n              <SelectTrigger id=\"subject\" data-testid=\"select-subject\">\n                <SelectValue placeholder=\"Select subject\" />\n              </SelectTrigger>\n              <SelectContent>\n                {subjects.map((subject) => (\n                  <SelectItem key={subject.id} value={subject.id.toString()}>\n                    {subject.code} - {subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"month\">Month</Label>\n              <Input\n                id=\"month\"\n                type=\"month\"\n                value={month}\n                onChange={(e) => setMonth(e.target.value)}\n                required\n                data-testid=\"input-month\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"testName\">Test Name</Label>\n              <Input\n                id=\"testName\"\n                value={testName}\n                onChange={(e) => setTestName(e.target.value)}\n                required\n                data-testid=\"input-test-name\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"marksObtained\">Marks Obtained</Label>\n              <Input\n                id=\"marksObtained\"\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                max={totalMarks}\n                value={marksObtained}\n                onChange={(e) => setMarksObtained(e.target.value)}\n                required\n                data-testid=\"input-marks-obtained\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"totalMarks\">Total Marks</Label>\n              <Input\n                id=\"totalMarks\"\n                type=\"number\"\n                step=\"0.01\"\n                min=\"1\"\n                value={totalMarks}\n                onChange={(e) => setTotalMarks(e.target.value)}\n                required\n                data-testid=\"input-total-marks\"\n              />\n            </div>\n          </div>\n\n          {totalMarks && marksObtained && (\n            <div className=\"p-4 bg-muted rounded-lg space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Percentage:</span>\n                <span className=\"text-lg font-bold\" data-testid=\"text-percentage\">{percentage.toFixed(1)}%</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Grade:</span>\n                <Badge variant={getGradeVariant(grade)} data-testid=\"badge-grade\">{grade}</Badge>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)} \n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-save\">\n              {isLoading ? \"Saving...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7961},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"server/auth.ts":{"content":"import { Request, Response, NextFunction } from 'express';\n\ndeclare module 'express-session' {\n  interface SessionData {\n    userId: number;\n    userRole: 'admin' | 'student';\n    username: string;\n  }\n}\n\nexport function requireAuth(req: Request, res: Response, next: NextFunction) {\n  if (!req.session.userId) {\n    return res.status(401).json({ message: \"Unauthorized: Login required\" });\n  }\n  next();\n}\n\nexport function requireAdmin(req: Request, res: Response, next: NextFunction) {\n  if (!req.session.userId || req.session.userRole !== 'admin') {\n    return res.status(403).json({ message: \"Forbidden: Admin access required\" });\n  }\n  next();\n}\n\nexport function requireStudent(req: Request, res: Response, next: NextFunction) {\n  if (!req.session.userId || req.session.userRole !== 'student') {\n    return res.status(403).json({ message: \"Forbidden: Student access required\" });\n  }\n  next();\n}\n","size_bytes":901},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { \n  students, \n  admins, \n  subjects, \n  attendance, \n  marks, \n  libraryBooks, \n  bookIssues,\n  notices,\n  type Student,\n  type Admin,\n  type Subject,\n  type Attendance,\n  type Marks,\n  type LibraryBook,\n  type BookIssue,\n  type Notice,\n  type InsertStudent,\n  type InsertAdmin,\n  type InsertSubject,\n  type InsertAttendance,\n  type InsertMarks,\n  type InsertLibraryBook,\n  type InsertBookIssue,\n  type InsertNotice\n} from \"@shared/schema\";\nimport { eq, and, desc } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Students\n  getStudentByRollNo(rollNo: string): Promise<Student | undefined>;\n  getAllStudents(): Promise<Student[]>;\n  createStudent(student: InsertStudent): Promise<Student>;\n  updateStudent(id: number, student: Partial<InsertStudent>): Promise<Student | undefined>;\n  deleteStudent(id: number): Promise<boolean>;\n\n  // Admins\n  getAdminByName(name: string): Promise<Admin | undefined>;\n  getAllAdmins(): Promise<Admin[]>;\n  createAdmin(admin: InsertAdmin): Promise<Admin>;\n\n  // Subjects\n  getAllSubjects(): Promise<Subject[]>;\n  getSubjectById(id: number): Promise<Subject | undefined>;\n  createSubject(subject: InsertSubject): Promise<Subject>;\n  updateSubject(id: number, subject: Partial<InsertSubject>): Promise<Subject | undefined>;\n  deleteSubject(id: number): Promise<boolean>;\n\n  // Attendance\n  getAttendanceByStudent(studentId: number): Promise<Attendance[]>;\n  getAllAttendance(): Promise<Attendance[]>;\n  createAttendance(attendanceRecord: InsertAttendance): Promise<Attendance>;\n  updateAttendance(id: number, attendanceRecord: Partial<InsertAttendance>): Promise<Attendance | undefined>;\n  deleteAttendance(id: number): Promise<boolean>;\n\n  // Marks\n  getMarksByStudent(studentId: number): Promise<Marks[]>;\n  getAllMarks(): Promise<Marks[]>;\n  createMarks(marksRecord: InsertMarks): Promise<Marks>;\n  updateMarks(id: number, marksRecord: Partial<InsertMarks>): Promise<Marks | undefined>;\n  deleteMarks(id: number): Promise<boolean>;\n\n  // Library Books\n  getAllLibraryBooks(): Promise<LibraryBook[]>;\n  getLibraryBookById(id: number): Promise<LibraryBook | undefined>;\n  createLibraryBook(book: InsertLibraryBook): Promise<LibraryBook>;\n  updateLibraryBook(id: number, book: Partial<InsertLibraryBook>): Promise<LibraryBook | undefined>;\n  deleteLibraryBook(id: number): Promise<boolean>;\n\n  // Book Issues\n  getBookIssuesByStudent(studentId: number): Promise<BookIssue[]>;\n  getAllBookIssues(): Promise<BookIssue[]>;\n  createBookIssue(issue: InsertBookIssue): Promise<BookIssue>;\n  updateBookIssue(id: number, issue: Partial<InsertBookIssue>): Promise<BookIssue | undefined>;\n  returnBook(id: number, returnDate: string): Promise<BookIssue | undefined>;\n\n  // Notices\n  getAllNotices(): Promise<Notice[]>;\n  getNoticeById(id: number): Promise<Notice | undefined>;\n  createNotice(notice: InsertNotice): Promise<Notice>;\n  updateNotice(id: number, notice: Partial<InsertNotice>): Promise<Notice | undefined>;\n  deleteNotice(id: number): Promise<boolean>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Students\n  async getStudentByRollNo(rollNo: string): Promise<Student | undefined> {\n    const result = await db.select().from(students).where(eq(students.rollNo, rollNo));\n    return result[0];\n  }\n\n  async getAllStudents(): Promise<Student[]> {\n    return await db.select().from(students);\n  }\n\n  async createStudent(student: InsertStudent): Promise<Student> {\n    const result = await db.insert(students).values(student).returning();\n    return result[0];\n  }\n\n  async updateStudent(id: number, student: Partial<InsertStudent>): Promise<Student | undefined> {\n    const result = await db.update(students).set(student).where(eq(students.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteStudent(id: number): Promise<boolean> {\n    const result = await db.delete(students).where(eq(students.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Admins\n  async getAdminByName(name: string): Promise<Admin | undefined> {\n    const result = await db.select().from(admins).where(eq(admins.name, name));\n    return result[0];\n  }\n\n  async getAllAdmins(): Promise<Admin[]> {\n    return await db.select().from(admins);\n  }\n\n  async createAdmin(admin: InsertAdmin): Promise<Admin> {\n    const result = await db.insert(admins).values(admin).returning();\n    return result[0];\n  }\n\n  // Subjects\n  async getAllSubjects(): Promise<Subject[]> {\n    return await db.select().from(subjects);\n  }\n\n  async getSubjectById(id: number): Promise<Subject | undefined> {\n    const result = await db.select().from(subjects).where(eq(subjects.id, id));\n    return result[0];\n  }\n\n  async createSubject(subject: InsertSubject): Promise<Subject> {\n    const result = await db.insert(subjects).values(subject).returning();\n    return result[0];\n  }\n\n  async updateSubject(id: number, subject: Partial<InsertSubject>): Promise<Subject | undefined> {\n    const result = await db.update(subjects).set(subject).where(eq(subjects.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteSubject(id: number): Promise<boolean> {\n    const result = await db.delete(subjects).where(eq(subjects.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Attendance\n  async getAttendanceByStudent(studentId: number): Promise<Attendance[]> {\n    return await db.select().from(attendance).where(eq(attendance.studentId, studentId)).orderBy(desc(attendance.month));\n  }\n\n  async getAllAttendance(): Promise<Attendance[]> {\n    return await db.select().from(attendance).orderBy(desc(attendance.month));\n  }\n\n  async createAttendance(attendanceRecord: any): Promise<Attendance> {\n    const result = await db.insert(attendance).values(attendanceRecord).returning();\n    return result[0];\n  }\n\n  async updateAttendance(id: number, attendanceRecord: Partial<InsertAttendance>): Promise<Attendance | undefined> {\n    const result = await db.update(attendance).set(attendanceRecord).where(eq(attendance.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteAttendance(id: number): Promise<boolean> {\n    const result = await db.delete(attendance).where(eq(attendance.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Marks\n  async getMarksByStudent(studentId: number): Promise<Marks[]> {\n    return await db.select().from(marks).where(eq(marks.studentId, studentId));\n  }\n\n  async getAllMarks(): Promise<Marks[]> {\n    return await db.select().from(marks);\n  }\n\n  async createMarks(marksRecord: any): Promise<Marks> {\n    const result = await db.insert(marks).values(marksRecord).returning();\n    return result[0];\n  }\n\n  async updateMarks(id: number, marksRecord: Partial<InsertMarks>): Promise<Marks | undefined> {\n    const result = await db.update(marks).set(marksRecord).where(eq(marks.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteMarks(id: number): Promise<boolean> {\n    const result = await db.delete(marks).where(eq(marks.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Library Books\n  async getAllLibraryBooks(): Promise<LibraryBook[]> {\n    return await db.select().from(libraryBooks);\n  }\n\n  async getLibraryBookById(id: number): Promise<LibraryBook | undefined> {\n    const result = await db.select().from(libraryBooks).where(eq(libraryBooks.id, id));\n    return result[0];\n  }\n\n  async createLibraryBook(book: InsertLibraryBook): Promise<LibraryBook> {\n    const result = await db.insert(libraryBooks).values(book).returning();\n    return result[0];\n  }\n\n  async updateLibraryBook(id: number, book: Partial<InsertLibraryBook>): Promise<LibraryBook | undefined> {\n    const result = await db.update(libraryBooks).set(book).where(eq(libraryBooks.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteLibraryBook(id: number): Promise<boolean> {\n    const result = await db.delete(libraryBooks).where(eq(libraryBooks.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Book Issues\n  async getBookIssuesByStudent(studentId: number): Promise<BookIssue[]> {\n    return await db.select().from(bookIssues).where(eq(bookIssues.studentId, studentId));\n  }\n\n  async getAllBookIssues(): Promise<BookIssue[]> {\n    return await db.select().from(bookIssues);\n  }\n\n  async getBookIssueById(id: number): Promise<BookIssue | undefined> {\n    const result = await db.select().from(bookIssues).where(eq(bookIssues.id, id));\n    return result[0];\n  }\n\n  async createBookIssue(issue: InsertBookIssue): Promise<BookIssue> {\n    const result = await db.insert(bookIssues).values(issue).returning();\n    return result[0];\n  }\n\n  async updateBookIssue(id: number, issue: Partial<InsertBookIssue>): Promise<BookIssue | undefined> {\n    const result = await db.update(bookIssues).set(issue).where(eq(bookIssues.id, id)).returning();\n    return result[0];\n  }\n\n  async returnBook(id: number, returnDate: string): Promise<BookIssue | undefined> {\n    const result = await db.update(bookIssues)\n      .set({ returnDate, status: 'returned' })\n      .where(eq(bookIssues.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteBookIssue(id: number): Promise<boolean> {\n    const result = await db.delete(bookIssues).where(eq(bookIssues.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Transactional book issue operation with row locking\n  async issueBookWithTransaction(issue: InsertBookIssue, bookId: number): Promise<BookIssue> {\n    return await db.transaction(async (tx) => {\n      // Lock the book row for update to prevent race conditions\n      const [book] = await tx.select().from(libraryBooks).where(eq(libraryBooks.id, bookId)).for('update');\n      \n      if (!book) {\n        throw new Error(\"Book not found\");\n      }\n      \n      if (book.copiesAvailable <= 0) {\n        throw new Error(\"Book is not available\");\n      }\n      \n      // Create the issue record\n      const [bookIssue] = await tx.insert(bookIssues).values(issue).returning();\n      \n      // Decrement book availability using locked row value\n      await tx.update(libraryBooks)\n        .set({ copiesAvailable: book.copiesAvailable - 1 })\n        .where(eq(libraryBooks.id, bookId));\n      \n      return bookIssue;\n    });\n  }\n\n  // Transactional book return operation with row locking\n  async returnBookWithTransaction(issueId: number, returnDate: string, bookId: number): Promise<BookIssue> {\n    return await db.transaction(async (tx) => {\n      // Lock both rows for update to prevent race conditions\n      const [book] = await tx.select().from(libraryBooks).where(eq(libraryBooks.id, bookId)).for('update');\n      \n      if (!book) {\n        throw new Error(\"Book not found\");\n      }\n      \n      // Lock and validate issue status within transaction\n      const [issue] = await tx.select().from(bookIssues).where(eq(bookIssues.id, issueId)).for('update');\n      \n      if (!issue) {\n        throw new Error(\"Issue record not found\");\n      }\n      \n      if (issue.status === 'returned') {\n        throw new Error(\"Book has already been returned\");\n      }\n      \n      // Update the issue record\n      const [bookIssue] = await tx.update(bookIssues)\n        .set({ returnDate, status: 'returned' })\n        .where(eq(bookIssues.id, issueId))\n        .returning();\n      \n      // Increment book availability using locked row value\n      await tx.update(libraryBooks)\n        .set({ copiesAvailable: book.copiesAvailable + 1 })\n        .where(eq(libraryBooks.id, bookId));\n      \n      return bookIssue;\n    });\n  }\n\n  // Notices\n  async getAllNotices(): Promise<Notice[]> {\n    return await db.select().from(notices).orderBy(desc(notices.createdAt));\n  }\n\n  async getNoticeById(id: number): Promise<Notice | undefined> {\n    const result = await db.select().from(notices).where(eq(notices.id, id));\n    return result[0];\n  }\n\n  async createNotice(notice: InsertNotice): Promise<Notice> {\n    const result = await db.insert(notices).values(notice).returning();\n    return result[0];\n  }\n\n  async updateNotice(id: number, notice: Partial<InsertNotice>): Promise<Notice | undefined> {\n    const result = await db.update(notices).set(notice).where(eq(notices.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteNotice(id: number): Promise<boolean> {\n    const result = await db.delete(notices).where(eq(notices.id, id)).returning();\n    return result.length > 0;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":12360},"client/src/components/UploadMarksCSVDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { AlertCircle, FileUp } from \"lucide-react\";\n\ninterface UploadMarksCSVDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function UploadMarksCSVDialog({ open, onOpenChange, onSuccess }: UploadMarksCSVDialogProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { toast } = useToast();\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile) {\n      if (selectedFile.type !== \"text/csv\" && !selectedFile.name.endsWith('.csv')) {\n        setError(\"Please select a valid CSV file\");\n        setFile(null);\n        return;\n      }\n      setFile(selectedFile);\n      setError(\"\");\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!file) {\n      setError(\"Please select a file\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(\"\");\n\n    try {\n      // Parse CSV file\n      const text = await file.text();\n      const lines = text.split('\\n').filter(line => line.trim());\n      \n      if (lines.length < 2) {\n        throw new Error(\"CSV file must contain header and at least one data row\");\n      }\n\n      // Validate header\n      const header = lines[0].toLowerCase().split(',').map(h => h.trim());\n      const requiredHeaders = ['studentid', 'subjectid', 'month', 'testname', 'marksobtained', 'totalmarks'];\n      const missingHeaders = requiredHeaders.filter(h => !header.includes(h));\n      \n      if (missingHeaders.length > 0) {\n        throw new Error(`Missing required headers: ${missingHeaders.join(', ')}`);\n      }\n\n      // Parse data rows\n      const marksRecords = [];\n      for (let i = 1; i < lines.length; i++) {\n        const values = lines[i].split(',').map(v => v.trim());\n        if (values.length < 6) continue; // Skip incomplete rows\n\n        const studentIdIdx = header.indexOf('studentid');\n        const subjectIdIdx = header.indexOf('subjectid');\n        const monthIdx = header.indexOf('month');\n        const testNameIdx = header.indexOf('testname');\n        const marksObtainedIdx = header.indexOf('marksobtained');\n        const totalMarksIdx = header.indexOf('totalmarks');\n\n        marksRecords.push({\n          studentId: parseInt(values[studentIdIdx]),\n          subjectId: parseInt(values[subjectIdIdx]),\n          month: values[monthIdx],\n          testName: values[testNameIdx],\n          marksObtained: parseFloat(values[marksObtainedIdx]),\n          totalMarks: parseFloat(values[totalMarksIdx]),\n        });\n      }\n\n      // Upload all records\n      let successCount = 0;\n      let errorCount = 0;\n\n      for (const record of marksRecords) {\n        try {\n          await apiRequest(\"POST\", \"/api/marks\", record);\n          successCount++;\n        } catch (err) {\n          errorCount++;\n          console.error(\"Error uploading record:\", err);\n        }\n      }\n\n      toast({\n        title: \"CSV Upload Complete\",\n        description: `Successfully uploaded ${successCount} records. ${errorCount > 0 ? `${errorCount} failed.` : ''}`,\n      });\n\n      setFile(null);\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      setError(error.message || \"Failed to process CSV file\");\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to process CSV file\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Upload Marks CSV</DialogTitle>\n          <DialogDescription>\n            Upload a CSV file containing marks data. The CSV must have the following headers:<br />\n            <code className=\"text-xs\">studentId, subjectId, month, testName, marksObtained, totalMarks</code>\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"csvFile\">CSV File</Label>\n            <Input\n              id=\"csvFile\"\n              type=\"file\"\n              accept=\".csv\"\n              onChange={handleFileChange}\n              required\n              data-testid=\"input-csv-file\"\n            />\n            {file && (\n              <p className=\"text-sm text-muted-foreground flex items-center gap-2\">\n                <FileUp className=\"h-4 w-4\" />\n                {file.name}\n              </p>\n            )}\n          </div>\n\n          {error && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          <Alert>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              <strong>CSV Format Example:</strong><br />\n              <code className=\"text-xs\">\n                studentId,subjectId,month,testName,marksObtained,totalMarks<br />\n                1,1,2025-01,Mid-Term,85,100<br />\n                2,1,2025-01,Mid-Term,90,100\n              </code>\n            </AlertDescription>\n          </Alert>\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)} \n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading || !file} data-testid=\"button-upload\">\n              {isLoading ? \"Uploading...\" : \"Upload CSV\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6328},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport connectPgSimple from \"connect-pg-simple\";\nimport pg from \"pg\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Trust proxy for proper session handling behind Replit's edge proxy\napp.set('trust proxy', 1);\n\n// Configure PostgreSQL session store for production reliability\nconst PgSession = connectPgSimple(session);\nconst pool = new pg.Pool({ \n  connectionString: process.env.DATABASE_URL,\n  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : undefined\n});\n\n// Session configuration with PostgreSQL store\napp.use(\n  session({\n    store: new PgSession({\n      pool: pool,\n      createTableIfMissing: true,\n      tableName: 'session',\n    }),\n    secret: process.env.SESSION_SECRET || \"cse-portal-secret-key-change-in-production\",\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      secure: false, // Replit handles HTTPS at the edge\n      httpOnly: true,\n      maxAge: 24 * 60 * 60 * 1000, // 24 hours\n    },\n  })\n);\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":3026},"client/src/components/examples/DataTable.tsx":{"content":"import DataTable from '../DataTable';\nimport { Badge } from '@/components/ui/badge';\n\nexport default function DataTableExample() {\n  const columns = [\n    { key: 'rollNo', label: 'Roll Number' },\n    { key: 'name', label: 'Name' },\n    { \n      key: 'attendance', \n      label: 'Attendance',\n      render: (value: number) => (\n        <Badge variant={value >= 75 ? 'default' : 'destructive'}>\n          {value}%\n        </Badge>\n      )\n    },\n    { key: 'avgMarks', label: 'Avg Marks' },\n    { key: 'booksIssued', label: 'Books Issued' },\n  ];\n\n  const data = [\n    { rollNo: '2023-CSE-01', name: 'Bhaskar Kumar', attendance: 85, avgMarks: 78, booksIssued: 2 },\n    { rollNo: '2023-CSE-03', name: 'Subhash Kumar', attendance: 72, avgMarks: 82, booksIssued: 1 },\n    { rollNo: '2023-CSE-04', name: 'Prithvi Kumar Singh', attendance: 90, avgMarks: 88, booksIssued: 3 },\n    { rollNo: '2023-CSE-05', name: 'Aniket Kumar', attendance: 68, avgMarks: 75, booksIssued: 0 },\n  ];\n\n  return (\n    <DataTable\n      title=\"Student Details\"\n      description=\"Complete overview of all students\"\n      columns={columns}\n      data={data}\n      actions={true}\n      onEdit={(row) => console.log('Edit:', row)}\n      onDelete={(row) => console.log('Delete:', row)}\n    />\n  );\n}\n","size_bytes":1265},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, timestamp, date, serial, real } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Students table\nexport const students = pgTable(\"students\", {\n  id: serial(\"id\").primaryKey(),\n  rollNo: varchar(\"roll_no\", { length: 50 }).notNull().unique(),\n  name: text(\"name\").notNull(),\n  password: text(\"password\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertStudentSchema = createInsertSchema(students).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertStudent = z.infer<typeof insertStudentSchema>;\nexport type Student = typeof students.$inferSelect;\n\n// Admins table\nexport const admins = pgTable(\"admins\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertAdminSchema = createInsertSchema(admins).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertAdmin = z.infer<typeof insertAdminSchema>;\nexport type Admin = typeof admins.$inferSelect;\n\n// Subjects table\nexport const subjects = pgTable(\"subjects\", {\n  id: serial(\"id\").primaryKey(),\n  code: varchar(\"code\", { length: 20 }).notNull().unique(),\n  name: text(\"name\").notNull(),\n  instructor: text(\"instructor\"),\n  totalMarks: integer(\"total_marks\").notNull().default(20),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertSubjectSchema = createInsertSchema(subjects).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertSubject = z.infer<typeof insertSubjectSchema>;\nexport type Subject = typeof subjects.$inferSelect;\n\n// Attendance table (month-wise tracking)\nexport const attendance = pgTable(\"attendance\", {\n  id: serial(\"id\").primaryKey(),\n  studentId: integer(\"student_id\").notNull().references(() => students.id, { onDelete: 'cascade' }),\n  subjectId: integer(\"subject_id\").notNull().references(() => subjects.id, { onDelete: 'cascade' }),\n  month: varchar(\"month\", { length: 20 }).notNull(), // Format: \"YYYY-MM\" (e.g., \"2025-01\")\n  totalDays: integer(\"total_days\").notNull(),\n  presentDays: integer(\"present_days\").notNull(),\n  percentage: real(\"percentage\").notNull(),\n  status: varchar(\"status\", { length: 20 }).notNull(), // 'Good' (≥80%), 'Average' (60-79%), 'Poor' (<60%)\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertAttendanceSchema = createInsertSchema(attendance).omit({\n  id: true,\n  createdAt: true,\n  percentage: true, // Auto-calculated\n  status: true, // Auto-calculated based on percentage\n});\n\nexport type InsertAttendance = z.infer<typeof insertAttendanceSchema>;\nexport type Attendance = typeof attendance.$inferSelect;\n\n// Marks table\nexport const marks = pgTable(\"marks\", {\n  id: serial(\"id\").primaryKey(),\n  studentId: integer(\"student_id\").notNull().references(() => students.id, { onDelete: 'cascade' }),\n  subjectId: integer(\"subject_id\").notNull().references(() => subjects.id, { onDelete: 'cascade' }),\n  month: varchar(\"month\", { length: 20 }).notNull(), // Format: \"YYYY-MM\" (e.g., \"2025-01\")\n  testName: varchar(\"test_name\", { length: 100 }).notNull(),\n  marksObtained: real(\"marks_obtained\").notNull(),\n  totalMarks: real(\"total_marks\").notNull(),\n  percentage: real(\"percentage\").notNull(),\n  grade: varchar(\"grade\", { length: 5 }).notNull(), // A+, A, B+, B, C, D, F\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertMarksSchema = createInsertSchema(marks).omit({\n  id: true,\n  createdAt: true,\n  percentage: true, // Auto-calculated\n  grade: true, // Auto-calculated based on percentage\n});\n\nexport type InsertMarks = z.infer<typeof insertMarksSchema>;\nexport type Marks = typeof marks.$inferSelect;\n\n// Library books table\nexport const libraryBooks = pgTable(\"library_books\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  author: text(\"author\").notNull(),\n  copiesAvailable: integer(\"copies_available\").notNull().default(0),\n  totalCopies: integer(\"total_copies\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertLibraryBookSchema = createInsertSchema(libraryBooks).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertLibraryBook = z.infer<typeof insertLibraryBookSchema>;\nexport type LibraryBook = typeof libraryBooks.$inferSelect;\n\n// Book issues table\nexport const bookIssues = pgTable(\"book_issues\", {\n  id: serial(\"id\").primaryKey(),\n  studentId: integer(\"student_id\").notNull().references(() => students.id, { onDelete: 'cascade' }),\n  bookId: integer(\"book_id\").notNull().references(() => libraryBooks.id, { onDelete: 'cascade' }),\n  issueDate: date(\"issue_date\").notNull(),\n  dueDate: date(\"due_date\").notNull(),\n  returnDate: date(\"return_date\"),\n  status: varchar(\"status\", { length: 20 }).notNull().default('issued'), // 'issued' or 'returned'\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertBookIssueSchema = createInsertSchema(bookIssues).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertBookIssue = z.infer<typeof insertBookIssueSchema>;\nexport type BookIssue = typeof bookIssues.$inferSelect;\n\n// Notices table\nexport const notices = pgTable(\"notices\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  priority: varchar(\"priority\", { length: 20 }).notNull().default('normal'), // 'high', 'normal', 'low'\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertNoticeSchema = createInsertSchema(notices).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertNotice = z.infer<typeof insertNoticeSchema>;\nexport type Notice = typeof notices.$inferSelect;\n","size_bytes":5786},"client/src/components/AddAttendanceDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AddAttendanceDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function AddAttendanceDialog({ open, onOpenChange, onSuccess }: AddAttendanceDialogProps) {\n  const [studentId, setStudentId] = useState(\"\");\n  const [subjectId, setSubjectId] = useState(\"\");\n  const [month, setMonth] = useState(\"\");\n  const [totalDays, setTotalDays] = useState(\"\");\n  const [presentDays, setPresentDays] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Fetch students and subjects\n  const { data: students = [] } = useQuery<any[]>({ queryKey: ['/api/students'] });\n  const { data: subjects = [] } = useQuery<any[]>({ queryKey: ['/api/subjects'] });\n\n  // Calculate percentage and status\n  const percentage = totalDays && presentDays \n    ? (parseInt(presentDays) / parseInt(totalDays)) * 100 \n    : 0;\n\n  const getStatus = (pct: number) => {\n    if (pct >= 80) return { label: 'Good', variant: 'default' as const };\n    if (pct >= 60) return { label: 'Average', variant: 'secondary' as const };\n    return { label: 'Poor', variant: 'destructive' as const };\n  };\n\n  const status = getStatus(percentage);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/attendance\", {\n        studentId: parseInt(studentId),\n        subjectId: parseInt(subjectId),\n        month,\n        totalDays: parseInt(totalDays),\n        presentDays: parseInt(presentDays),\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Attendance record added successfully\",\n      });\n\n      // Reset form\n      setStudentId(\"\");\n      setSubjectId(\"\");\n      setMonth(\"\");\n      setTotalDays(\"\");\n      setPresentDays(\"\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add attendance\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Add Monthly Attendance</DialogTitle>\n          <DialogDescription>Record monthly attendance for a student in a subject</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"student\">Student</Label>\n            <Select value={studentId} onValueChange={setStudentId} required>\n              <SelectTrigger id=\"student\" data-testid=\"select-student\">\n                <SelectValue placeholder=\"Select student\" />\n              </SelectTrigger>\n              <SelectContent>\n                {students.map((student) => (\n                  <SelectItem key={student.id} value={student.id.toString()}>\n                    {student.rollNo} - {student.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"subject\">Subject</Label>\n            <Select value={subjectId} onValueChange={setSubjectId} required>\n              <SelectTrigger id=\"subject\" data-testid=\"select-subject\">\n                <SelectValue placeholder=\"Select subject\" />\n              </SelectTrigger>\n              <SelectContent>\n                {subjects.map((subject) => (\n                  <SelectItem key={subject.id} value={subject.id.toString()}>\n                    {subject.code} - {subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"month\">Month</Label>\n            <Input\n              id=\"month\"\n              type=\"month\"\n              value={month}\n              onChange={(e) => setMonth(e.target.value)}\n              required\n              data-testid=\"input-month\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"totalDays\">Total Working Days</Label>\n              <Input\n                id=\"totalDays\"\n                type=\"number\"\n                min=\"1\"\n                value={totalDays}\n                onChange={(e) => setTotalDays(e.target.value)}\n                placeholder=\"e.g., 22\"\n                required\n                data-testid=\"input-total-days\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"presentDays\">Present Days</Label>\n              <Input\n                id=\"presentDays\"\n                type=\"number\"\n                min=\"0\"\n                max={totalDays}\n                value={presentDays}\n                onChange={(e) => setPresentDays(e.target.value)}\n                placeholder=\"e.g., 20\"\n                required\n                data-testid=\"input-present-days\"\n              />\n            </div>\n          </div>\n\n          {totalDays && presentDays && (\n            <div className=\"p-4 bg-muted rounded-lg space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Attendance Percentage:</span>\n                <span className=\"text-lg font-bold\" data-testid=\"text-percentage\">{percentage.toFixed(1)}%</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Status:</span>\n                <Badge variant={status.variant} data-testid=\"badge-status\">{status.label}</Badge>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)} \n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-submit\">\n              {isLoading ? \"Adding...\" : \"Add Attendance\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6988},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/AdminSidebar.tsx":{"content":"import { \n  Sidebar, \n  SidebarContent, \n  SidebarGroup, \n  SidebarGroupContent, \n  SidebarGroupLabel, \n  SidebarMenu, \n  SidebarMenuButton, \n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter\n} from \"@/components/ui/sidebar\";\nimport { \n  LayoutDashboard, \n  Users, \n  BookOpenText, \n  Calendar, \n  Award, \n  BookOpen, \n  Bell,\n  BarChart3,\n  GraduationCap,\n  LogOut\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport collegeLogo from \"@assets/WhatsApp Image 2025-10-11 at 23.32.21_1760206203929.jpeg\";\n\ninterface AdminSidebarProps {\n  activeItem?: string;\n  onNavigate?: (item: string) => void;\n  onLogout?: () => void;\n}\n\nconst menuItems = [\n  { title: \"Dashboard\", icon: LayoutDashboard, id: \"dashboard\" },\n  { title: \"Students\", icon: Users, id: \"students\" },\n  { title: \"Subjects\", icon: BookOpenText, id: \"subjects\" },\n  { title: \"Attendance\", icon: Calendar, id: \"attendance\" },\n  { title: \"Marks\", icon: Award, id: \"marks\" },\n  { title: \"Library\", icon: BookOpen, id: \"library\" },\n  { title: \"Notices\", icon: Bell, id: \"notices\" },\n  { title: \"Reports\", icon: BarChart3, id: \"reports\" },\n];\n\nexport default function AdminSidebar({ activeItem = \"dashboard\", onNavigate, onLogout }: AdminSidebarProps) {\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b border-sidebar-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <img \n            src={collegeLogo}\n            alt=\"KNSGP College Logo\"\n            className=\"h-[50px] w-[50px] rounded-lg object-contain\"\n            data-testid=\"img-college-logo\"\n          />\n          <div>\n            <p className=\"text-sm font-semibold text-sidebar-foreground\">KNSGP College</p>\n            <p className=\"text-xs text-sidebar-foreground/60\">Admin Panel</p>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Management</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.id}>\n                  <SidebarMenuButton\n                    isActive={activeItem === item.id}\n                    onClick={() => onNavigate?.(item.id)}\n                    data-testid={`sidebar-${item.id}`}\n                  >\n                    <item.icon className=\"h-4 w-4\" />\n                    <span>{item.title}</span>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"border-t border-sidebar-border p-4\">\n        <Button \n          variant=\"ghost\" \n          className=\"w-full justify-start\" \n          onClick={onLogout}\n          data-testid=\"button-logout\"\n        >\n          <LogOut className=\"h-4 w-4 mr-2\" />\n          Logout\n        </Button>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":2967},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/examples/AttendanceChart.tsx":{"content":"import AttendanceChart from '../AttendanceChart';\n\nexport default function AttendanceChartExample() {\n  const mockData = [\n    { subject: 'Programming in C', present: 32, absent: 7 },\n    { subject: 'Data Structures', present: 35, absent: 4 },\n    { subject: 'DBMS', present: 30, absent: 9 },\n    { subject: 'Web Dev', present: 36, absent: 3 },\n    { subject: 'OS', present: 28, absent: 11 },\n  ];\n\n  return <AttendanceChart data={mockData} />;\n}\n","size_bytes":447},"client/src/components/StudentDashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport StatCard from \"./StatCard\";\nimport AttendanceChart from \"./AttendanceChart\";\nimport MarksChart from \"./MarksChart\";\nimport LibraryBookCard from \"./LibraryBookCard\";\nimport DataTable from \"./DataTable\";\nimport { TrendingUp, Award, BookOpen, Calendar, Bell } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut } from \"lucide-react\";\n\ninterface StudentDashboardProps {\n  studentName: string;\n  rollNo: string;\n  studentId: number;\n  onLogout?: () => void;\n}\n\nexport default function StudentDashboard({ studentName, rollNo, studentId, onLogout }: StudentDashboardProps) {\n  // Fetch student's attendance - include studentId in key for proper caching\n  const { data: attendanceData = [], isLoading: isLoadingAttendance } = useQuery<any[]>({\n    queryKey: ['/api/attendance', studentId],\n    staleTime: 0,\n    refetchOnMount: true,\n  });\n\n  // Fetch student's marks - include studentId in key for proper caching\n  const { data: marksData = [], isLoading: isLoadingMarks } = useQuery<any[]>({\n    queryKey: ['/api/marks', studentId],\n    staleTime: 0,\n    refetchOnMount: true,\n  });\n\n  // Fetch subjects\n  const { data: subjects = [], isLoading: isLoadingSubjects } = useQuery<any[]>({\n    queryKey: ['/api/subjects'],\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n\n  // Fetch library books\n  const { data: books = [] } = useQuery<any[]>({\n    queryKey: ['/api/library/books'],\n    staleTime: 5 * 60 * 1000,\n  });\n\n  // Fetch student's book issues - include studentId in key\n  const { data: bookIssues = [] } = useQuery<any[]>({\n    queryKey: ['/api/library/issues', studentId],\n    staleTime: 0,\n    refetchOnMount: true,\n  });\n\n  // Fetch notices\n  const { data: notices = [] } = useQuery<any[]>({\n    queryKey: ['/api/notices'],\n    staleTime: 2 * 60 * 1000, // 2 minutes\n  });\n\n  // Check if critical data is still loading\n  const isLoading = isLoadingAttendance || isLoadingMarks || isLoadingSubjects;\n\n  // Filter attendance data for this student\n  const studentAttendance = attendanceData.filter((a: any) => a.studentId === studentId);\n\n  // Process attendance data for charts - monthly data\n  const attendanceBySubject = subjects.map((subject: any) => {\n    const subjectAttendance = studentAttendance.filter((a: any) => a.subjectId === subject.id);\n    const avgPercentage = subjectAttendance.length > 0 \n      ? subjectAttendance.reduce((sum: number, a: any) => sum + a.percentage, 0) / subjectAttendance.length\n      : 0;\n    return {\n      subject: subject.name,\n      percentage: Math.round(avgPercentage),\n    };\n  });\n\n  // Calculate overall attendance percentage\n  const attendancePercentage = studentAttendance.length > 0\n    ? (studentAttendance.reduce((sum: number, a: any) => sum + a.percentage, 0) / studentAttendance.length).toFixed(1)\n    : '0.0';\n\n  // Filter marks data for this student\n  const studentMarks = marksData.filter((m: any) => m.studentId === studentId);\n\n  // Process marks data for charts - monthly data\n  const marksChartData = Array.from(new Set(studentMarks.map((m: any) => m.month))).map((month: any) => {\n    const monthMarks = studentMarks.filter((m: any) => m.month === month);\n    const avgPercentage = monthMarks.length > 0\n      ? monthMarks.reduce((sum: number, m: any) => sum + m.percentage, 0) / monthMarks.length\n      : 0;\n    return {\n      month: month,\n      percentage: Math.round(avgPercentage),\n    };\n  });\n\n  // Calculate average marks\n  const avgMarks = studentMarks.length > 0\n    ? (studentMarks.reduce((sum: number, m: any) => sum + m.percentage, 0) / studentMarks.length).toFixed(1)\n    : '0.0';\n\n  // Get books issued count\n  const booksIssued = bookIssues.filter((issue: any) => issue.status === 'issued').length;\n\n  // Prepare attendance table data - monthly records\n  const attendanceTableData = studentAttendance.slice(0, 10).map((record: any) => {\n    const subject = subjects.find((s: any) => s.id === record.subjectId);\n    return {\n      subject: subject?.name || 'Unknown',\n      month: record.month,\n      presentDays: record.presentDays,\n      totalDays: record.totalDays,\n      percentage: record.percentage,\n      status: record.status,\n    };\n  });\n\n  const attendanceColumns = [\n    { key: 'subject', label: 'Subject' },\n    { key: 'month', label: 'Month' },\n    { key: 'presentDays', label: 'Present Days' },\n    { key: 'totalDays', label: 'Total Days' },\n    { \n      key: 'percentage', \n      label: 'Percentage',\n      render: (value: number) => `${value.toFixed(1)}%`\n    },\n    { \n      key: 'status', \n      label: 'Status',\n      render: (value: string) => (\n        <Badge variant={value === 'Good' ? 'default' : value === 'Average' ? 'secondary' : 'destructive'}>\n          {value}\n        </Badge>\n      )\n    },\n  ];\n\n  // Prepare marks table data - monthly records\n  const marksTableData = studentMarks.slice(0, 10).map((record: any) => {\n    const subject = subjects.find((s: any) => s.id === record.subjectId);\n    return {\n      subject: subject?.name || 'Unknown',\n      month: record.month,\n      test: record.testName,\n      marks: record.marksObtained,\n      total: record.totalMarks,\n      percentage: record.percentage,\n      grade: record.grade,\n    };\n  });\n\n  const marksColumns = [\n    { key: 'subject', label: 'Subject' },\n    { key: 'month', label: 'Month' },\n    { key: 'test', label: 'Test' },\n    { \n      key: 'marks', \n      label: 'Marks',\n      render: (value: number, row: any) => `${value} / ${row.total}`\n    },\n    { \n      key: 'percentage', \n      label: 'Percentage',\n      render: (value: number) => `${value.toFixed(1)}%`\n    },\n    { \n      key: 'grade', \n      label: 'Grade',\n      render: (value: string) => (\n        <Badge variant={['A+', 'A'].includes(value) ? 'default' : ['B+', 'B'].includes(value) ? 'secondary' : value === 'C' ? 'outline' : 'destructive'}>\n          {value}\n        </Badge>\n      )\n    },\n  ];\n\n  // Get issued books details\n  const issuedBooksData = bookIssues\n    .filter((issue: any) => issue.status === 'issued')\n    .map((issue: any) => {\n      const book = books.find((b: any) => b.id === issue.bookId);\n      return {\n        ...issue,\n        title: book?.title || 'Unknown Book',\n      };\n    });\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-10 border-b bg-card px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-foreground\">Student Portal</h1>\n            <p className=\"text-sm text-muted-foreground\">\n              {studentName} ({rollNo})\n            </p>\n          </div>\n          <Button variant=\"ghost\" onClick={onLogout} data-testid=\"button-logout\">\n            <LogOut className=\"h-4 w-4 mr-2\" />\n            Logout\n          </Button>\n        </div>\n      </header>\n\n      <main className=\"p-6\">\n        <Tabs defaultValue=\"dashboard\" className=\"space-y-6\">\n          <TabsList>\n            <TabsTrigger value=\"dashboard\" data-testid=\"tab-dashboard\">Dashboard</TabsTrigger>\n            <TabsTrigger value=\"attendance\" data-testid=\"tab-attendance\">Attendance</TabsTrigger>\n            <TabsTrigger value=\"marks\" data-testid=\"tab-marks\">Marks</TabsTrigger>\n            <TabsTrigger value=\"library\" data-testid=\"tab-library\">Library</TabsTrigger>\n            <TabsTrigger value=\"notices\" data-testid=\"tab-notices\">Notices</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"dashboard\" className=\"space-y-6\">\n            {isLoading ? (\n              <div className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {[1, 2, 3].map((i) => (\n                    <Card key={i} className=\"animate-pulse\">\n                      <CardContent className=\"pt-6\">\n                        <div className=\"h-20 bg-muted rounded\"></div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  {[1, 2].map((i) => (\n                    <Card key={i} className=\"animate-pulse\">\n                      <CardContent className=\"pt-6\">\n                        <div className=\"h-64 bg-muted rounded\"></div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  <StatCard\n                    title=\"Attendance\"\n                    value={`${attendancePercentage}%`}\n                    icon={TrendingUp}\n                  />\n                  <StatCard\n                    title=\"Average Marks\"\n                    value={avgMarks}\n                    icon={Award}\n                  />\n                  <StatCard\n                    title=\"Books Issued\"\n                    value={booksIssued.toString()}\n                    icon={BookOpen}\n                    description=\"Currently reading\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  {attendanceBySubject.length > 0 && (\n                    <AttendanceChart data={attendanceBySubject} />\n                  )}\n                  {marksChartData.length > 0 && (\n                    <MarksChart data={marksChartData} />\n                  )}\n                </div>\n              </>\n            )}\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Recent Activity</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {attendanceTableData.length > 0 && (\n                    <div className=\"flex items-start gap-3 p-3 rounded-lg bg-muted/50\">\n                      <Calendar className=\"h-5 w-5 text-primary mt-0.5\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">Latest attendance: {attendanceTableData[0].subject}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {attendanceTableData[0].month} - {attendanceTableData[0].percentage.toFixed(1)}% ({attendanceTableData[0].status})\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                  {marksTableData.length > 0 && (\n                    <div className=\"flex items-start gap-3 p-3 rounded-lg bg-muted/50\">\n                      <Award className=\"h-5 w-5 text-primary mt-0.5\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">Latest marks: {marksTableData[0].subject}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {marksTableData[0].month} - {marksTableData[0].test} ({marksTableData[0].grade})\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"attendance\" className=\"space-y-6\">\n            {isLoading ? (\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {[1, 2].map((i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"pt-6\">\n                      <div className=\"h-64 bg-muted rounded\"></div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  {attendanceBySubject.length > 0 && (\n                    <AttendanceChart data={attendanceBySubject} />\n                  )}\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Attendance Summary</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        {attendanceBySubject.map((item: any, index: number) => {\n                          const percentage = item.percentage;\n                          const variant = percentage >= 80 ? 'default' : percentage >= 60 ? 'secondary' : 'destructive';\n                          return (\n                            <div key={index}>\n                              <div className=\"flex justify-between items-center mb-2\">\n                                <span className=\"text-sm font-medium\">{item.subject}</span>\n                                <Badge variant={variant}>\n                                  {percentage}%\n                                </Badge>\n                              </div>\n                              <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n                                <div \n                                  className=\"h-full bg-primary rounded-full\"\n                                  style={{ width: `${percentage}%` }}\n                                />\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n                {attendanceTableData.length > 0 && (\n                  <DataTable\n                    title=\"Attendance Records\"\n                    description=\"Recent attendance history\"\n                    columns={attendanceColumns}\n                    data={attendanceTableData}\n                  />\n                )}\n              </>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"marks\" className=\"space-y-6\">\n            {isLoading ? (\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {[1, 2].map((i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"pt-6\">\n                      <div className=\"h-64 bg-muted rounded\"></div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  {marksChartData.length > 0 && (\n                    <MarksChart data={marksChartData} />\n                  )}\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Performance Summary</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm\">Total Tests</span>\n                          <span className=\"text-lg font-semibold\">{marksData.length}</span>\n                        </div>\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm\">Average Score</span>\n                          <span className=\"text-lg font-semibold\">{avgMarks}%</span>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n                {marksTableData.length > 0 && (\n                  <DataTable\n                    title=\"Marks Details\"\n                    description=\"All test and exam results\"\n                    columns={marksColumns}\n                    data={marksTableData}\n                  />\n                )}\n              </>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"library\" className=\"space-y-6\">\n            {issuedBooksData.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>My Issued Books</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {issuedBooksData.map((issue: any, index: number) => (\n                      <div key={index} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                        <div className=\"flex items-center gap-3\">\n                          <BookOpen className=\"h-5 w-5 text-primary\" />\n                          <div>\n                            <p className=\"font-medium text-sm\">{issue.title}</p>\n                            <p className=\"text-xs text-muted-foreground\">Due: {issue.dueDate}</p>\n                          </div>\n                        </div>\n                        <Badge>Issued</Badge>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Available Books</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {books.filter((book: any) => book.copiesAvailable > 0).slice(0, 6).map((book: any) => (\n                  <LibraryBookCard\n                    key={book.id}\n                    title={book.title}\n                    author={book.author}\n                    copiesAvailable={book.copiesAvailable}\n                    totalCopies={book.totalCopies}\n                  />\n                ))}\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"notices\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Notice Board</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {notices.length > 0 ? (\n                  <div className=\"space-y-4\">\n                    {notices.map((notice: any) => (\n                      <div key={notice.id} className=\"p-4 border rounded-lg\" data-testid={`notice-${notice.id}`}>\n                        <div className=\"flex items-start justify-between gap-3\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <Bell className=\"h-4 w-4 text-primary\" />\n                              <h4 className=\"font-semibold text-base\" data-testid={`notice-title-${notice.id}`}>{notice.title}</h4>\n                            </div>\n                            <p className=\"text-sm text-muted-foreground mb-3\" data-testid={`notice-message-${notice.id}`}>{notice.message}</p>\n                            <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                              <span>{new Date(notice.createdAt).toLocaleDateString()}</span>\n                              <Badge \n                                variant={notice.priority === 'high' ? 'destructive' : notice.priority === 'normal' ? 'default' : 'secondary'}\n                                data-testid={`notice-priority-${notice.id}`}\n                              >\n                                {notice.priority.toUpperCase()}\n                              </Badge>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8 text-muted-foreground\" data-testid=\"status-no-notices\">\n                    <Bell className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                    <p data-testid=\"text-no-notices\">No notices available</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </main>\n    </div>\n  );\n}\n","size_bytes":19974},"client/src/components/examples/LibraryBookCard.tsx":{"content":"import LibraryBookCard from '../LibraryBookCard';\n\nexport default function LibraryBookCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4\">\n      <LibraryBookCard\n        title=\"Introduction to Algorithms\"\n        author=\"Thomas H. Cormen\"\n        copiesAvailable={3}\n        totalCopies={5}\n        onIssue={() => console.log('Issue book')}\n      />\n      <LibraryBookCard\n        title=\"Database System Concepts\"\n        author=\"Abraham Silberschatz\"\n        copiesAvailable={0}\n        totalCopies={4}\n        onIssue={() => console.log('Issue book')}\n      />\n      <LibraryBookCard\n        title=\"Operating System Concepts\"\n        author=\"Abraham Silberschatz\"\n        copiesAvailable={2}\n        totalCopies={3}\n        onIssue={() => console.log('Issue book')}\n      />\n    </div>\n  );\n}\n","size_bytes":848},"client/src/components/AddMarksDialog.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AddMarksDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function AddMarksDialog({ open, onOpenChange, onSuccess }: AddMarksDialogProps) {\n  const [studentId, setStudentId] = useState(\"\");\n  const [subjectId, setSubjectId] = useState(\"\");\n  const [month, setMonth] = useState(\"\");\n  const [testName, setTestName] = useState(\"\");\n  const [marksObtained, setMarksObtained] = useState(\"\");\n  const [totalMarks, setTotalMarks] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Fetch students and subjects\n  const { data: students = [] } = useQuery<any[]>({ queryKey: ['/api/students'] });\n  const { data: subjects = [] } = useQuery<any[]>({ queryKey: ['/api/subjects'] });\n\n  // Calculate percentage and grade\n  const percentage = totalMarks && marksObtained \n    ? (parseFloat(marksObtained) / parseFloat(totalMarks)) * 100 \n    : 0;\n\n  const getGrade = (pct: number) => {\n    if (pct >= 90) return 'A+';\n    if (pct >= 85) return 'A';\n    if (pct >= 80) return 'B+';\n    if (pct >= 75) return 'B';\n    if (pct >= 60) return 'C';\n    if (pct >= 50) return 'D';\n    return 'F';\n  };\n\n  const grade = getGrade(percentage);\n\n  const getGradeVariant = (g: string) => {\n    if (['A+', 'A'].includes(g)) return 'default' as const;\n    if (['B+', 'B'].includes(g)) return 'secondary' as const;\n    if (g === 'C') return 'outline' as const;\n    return 'destructive' as const;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/marks\", {\n        studentId: parseInt(studentId),\n        subjectId: parseInt(subjectId),\n        month,\n        testName,\n        marksObtained: parseFloat(marksObtained),\n        totalMarks: parseFloat(totalMarks),\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Marks added successfully\",\n      });\n\n      // Reset form\n      setStudentId(\"\");\n      setSubjectId(\"\");\n      setMonth(\"\");\n      setTestName(\"\");\n      setMarksObtained(\"\");\n      setTotalMarks(\"\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add marks\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Add Marks</DialogTitle>\n          <DialogDescription>Add marks for a student in a subject</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"student\">Student</Label>\n            <Select value={studentId} onValueChange={setStudentId} required>\n              <SelectTrigger id=\"student\" data-testid=\"select-student\">\n                <SelectValue placeholder=\"Select student\" />\n              </SelectTrigger>\n              <SelectContent>\n                {students.map((student) => (\n                  <SelectItem key={student.id} value={student.id.toString()}>\n                    {student.rollNo} - {student.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"subject\">Subject</Label>\n            <Select value={subjectId} onValueChange={setSubjectId} required>\n              <SelectTrigger id=\"subject\" data-testid=\"select-subject\">\n                <SelectValue placeholder=\"Select subject\" />\n              </SelectTrigger>\n              <SelectContent>\n                {subjects.map((subject) => (\n                  <SelectItem key={subject.id} value={subject.id.toString()}>\n                    {subject.code} - {subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"month\">Month</Label>\n              <Input\n                id=\"month\"\n                type=\"month\"\n                value={month}\n                onChange={(e) => setMonth(e.target.value)}\n                required\n                data-testid=\"input-month\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"testName\">Test Name</Label>\n              <Input\n                id=\"testName\"\n                value={testName}\n                onChange={(e) => setTestName(e.target.value)}\n                placeholder=\"e.g., Mid-Term\"\n                required\n                data-testid=\"input-test-name\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"marksObtained\">Marks Obtained</Label>\n              <Input\n                id=\"marksObtained\"\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                max={totalMarks}\n                value={marksObtained}\n                onChange={(e) => setMarksObtained(e.target.value)}\n                placeholder=\"e.g., 85\"\n                required\n                data-testid=\"input-marks-obtained\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"totalMarks\">Total Marks</Label>\n              <Input\n                id=\"totalMarks\"\n                type=\"number\"\n                step=\"0.01\"\n                min=\"1\"\n                value={totalMarks}\n                onChange={(e) => setTotalMarks(e.target.value)}\n                placeholder=\"e.g., 100\"\n                required\n                data-testid=\"input-total-marks\"\n              />\n            </div>\n          </div>\n\n          {totalMarks && marksObtained && (\n            <div className=\"p-4 bg-muted rounded-lg space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Percentage:</span>\n                <span className=\"text-lg font-bold\" data-testid=\"text-percentage\">{percentage.toFixed(1)}%</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Grade:</span>\n                <Badge variant={getGradeVariant(grade)} data-testid=\"badge-grade\">{grade}</Badge>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)} \n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-submit\">\n              {isLoading ? \"Adding...\" : \"Add Marks\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7806},"client/src/components/EditSubjectDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EditSubjectDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  subject: any;\n  onSuccess: () => void;\n}\n\nexport default function EditSubjectDialog({ open, onOpenChange, subject, onSuccess }: EditSubjectDialogProps) {\n  const [code, setCode] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [instructor, setInstructor] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (subject) {\n      setCode(subject.code || \"\");\n      setName(subject.name || \"\");\n      setInstructor(subject.instructor || \"\");\n    }\n  }, [subject]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!code || !name) {\n      toast({\n        title: \"Error\",\n        description: \"Subject code and name are required\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"PUT\", `/api/subjects/${subject.id}`, {\n        code: code.trim(),\n        name: name.trim(),\n        instructor: instructor.trim(),\n      });\n\n      await response.json();\n\n      toast({\n        title: \"Success\",\n        description: \"Subject updated successfully\",\n      });\n\n      onSuccess();\n      onOpenChange(false);\n      \n      // Reset form\n      setCode(\"\");\n      setName(\"\");\n      setInstructor(\"\");\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update subject\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Edit Subject</DialogTitle>\n          <DialogDescription>Update subject information</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit}>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-code\">Subject Code</Label>\n              <Input\n                id=\"edit-code\"\n                data-testid=\"input-edit-code\"\n                placeholder=\"e.g., CSE101\"\n                value={code}\n                onChange={(e) => setCode(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-name\">Subject Name</Label>\n              <Input\n                id=\"edit-name\"\n                data-testid=\"input-edit-subject-name\"\n                placeholder=\"e.g., Programming in C\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-instructor\">Instructor Name</Label>\n              <Input\n                id=\"edit-instructor\"\n                data-testid=\"input-edit-instructor\"\n                placeholder=\"e.g., Dr. Sharma\"\n                value={instructor}\n                onChange={(e) => setInstructor(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={isLoading}\n              data-testid=\"button-cancel-edit\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-save-subject\">\n              {isLoading ? \"Saving...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4211},"server/seed.ts":{"content":"import { db } from \"./db\";\nimport { students, admins, subjects, attendance, marks, libraryBooks, bookIssues } from \"@shared/schema\";\nimport { sql } from \"drizzle-orm\";\n\nconst ADMIN_PASSWORD = process.env.ADMIN_PASSWORD || (() => {\n  throw new Error(\"ADMIN_PASSWORD environment variable is required for seeding\");\n})();\n\nconst adminData = [\n  { name: \"Md Kashif\", password: ADMIN_PASSWORD },\n  { name: \"Md Shad\", password: ADMIN_PASSWORD },\n  { name: \"Rajesh Ranjan\", password: ADMIN_PASSWORD },\n  { name: \"Deepak Kumar\", password: ADMIN_PASSWORD },\n  { name: \"Rajan Kumar\", password: ADMIN_PASSWORD },\n];\n\nconst studentData = [\n  { rollNo: \"2023-CSE-01\", name: \"Bhaskar Kumar\" },\n  { rollNo: \"2023-CSE-03\", name: \"Subhash Kumar\" },\n  { rollNo: \"2023-CSE-04\", name: \"Prithvi Kumar Singh\" },\n  { rollNo: \"2023-CSE-05\", name: \"Aniket Kumar\" },\n  { rollNo: \"2023-CSE-06\", name: \"Sonu Kumar\" },\n  { rollNo: \"2023-CSE-07\", name: \"Aman Kumar\" },\n  { rollNo: \"2023-CSE-08\", name: \"Deepak Kumar\" },\n  { rollNo: \"2023-CSE-09\", name: \"Neha Rani\" },\n  { rollNo: \"2023-CSE-12\", name: \"Ashutosh Raj\" },\n  { rollNo: \"2023-CSE-14\", name: \"Ayush Kumar\" },\n  { rollNo: \"2023-CSE-15\", name: \"Md Shadwash Alam Shad\" },\n  { rollNo: \"2023-CSE-16\", name: \"Sneh Sikha\" },\n  { rollNo: \"2023-CSE-17\", name: \"Mukesh Gond\" },\n  { rollNo: \"2023-CSE-18\", name: \"Ayush Kumar Mishra\" },\n  { rollNo: \"2023-CSE-19\", name: \"Krishna Kumar\" },\n  { rollNo: \"2023-CSE-20\", name: \"Sadhna Kumari\" },\n  { rollNo: \"2023-CSE-22\", name: \"Abhishek Kumar\" },\n  { rollNo: \"2023-CSE-23\", name: \"Aradhana Suman\" },\n  { rollNo: \"2023-CSE-26\", name: \"Gaurav Kumar\" },\n  { rollNo: \"2023-CSE-28\", name: \"Avinash Kumar\" },\n  { rollNo: \"2023-CSE-29\", name: \"Suraj Kumar\" },\n  { rollNo: \"2023-CSE-30\", name: \"Jyoti Kumari\" },\n  { rollNo: \"2023-CSE-31\", name: \"Tannu Kumari\" },\n  { rollNo: \"2023-CSE-33\", name: \"Sushil Kumar Verma\" },\n  { rollNo: \"2023-CSE-34\", name: \"Shashikant Kumar\" },\n  { rollNo: \"2023-CSE-35\", name: \"Nitish Kumar\" },\n  { rollNo: \"2023-CSE-38\", name: \"Rajan Kumar\" },\n  { rollNo: \"2023-CSE-40\", name: \"Kaushal Kumar\" },\n  { rollNo: \"2023-CSE-41\", name: \"Rajan Kumar\" },\n  { rollNo: \"2023-CSE-42\", name: \"Naveen Kumar\" },\n  { rollNo: \"2023-CSE-43\", name: \"Piyush Prakash\" },\n  { rollNo: \"2023-CSE-44\", name: \"Shailya Singh\" },\n  { rollNo: \"2023-CSE-45\", name: \"Mithilesh Kumar\" },\n  { rollNo: \"2023-CSE-46\", name: \"Rohini Kumari\" },\n  { rollNo: \"2023-CSE-48\", name: \"Anjali Kumari\" },\n  { rollNo: \"2023-CSE-51\", name: \"Md Kashif\" },\n  { rollNo: \"2023-CSE-54\", name: \"Subodh Kumar\" },\n  { rollNo: \"2023-CSE-55\", name: \"Saloni Kumari\" },\n  { rollNo: \"2023-CSE-56\", name: \"Ankit Kumar Ray\" },\n];\n\nconst subjectData = [\n  { code: \"CSE101\", name: \"Programming in C\", instructor: \"Dr. Sharma\" },\n  { code: \"CSE102\", name: \"Data Structures\", instructor: \"Prof. Kumar\" },\n  { code: \"CSE103\", name: \"Database Management Systems\", instructor: \"Dr. Singh\" },\n  { code: \"CSE104\", name: \"Web Development\", instructor: \"Prof. Verma\" },\n  { code: \"CSE105\", name: \"Operating Systems\", instructor: \"Dr. Patel\" },\n];\n\nconst libraryBooksData = [\n  { title: \"Introduction to Algorithms\", author: \"Thomas H. Cormen\", copiesAvailable: 3, totalCopies: 5 },\n  { title: \"Database System Concepts\", author: \"Abraham Silberschatz\", copiesAvailable: 2, totalCopies: 4 },\n  { title: \"Operating System Concepts\", author: \"Abraham Silberschatz\", copiesAvailable: 2, totalCopies: 3 },\n  { title: \"Computer Networks\", author: \"Andrew S. Tanenbaum\", copiesAvailable: 4, totalCopies: 5 },\n  { title: \"Software Engineering\", author: \"Ian Sommerville\", copiesAvailable: 1, totalCopies: 3 },\n  { title: \"The C Programming Language\", author: \"Brian W. Kernighan\", copiesAvailable: 3, totalCopies: 4 },\n  { title: \"Clean Code\", author: \"Robert C. Martin\", copiesAvailable: 2, totalCopies: 3 },\n  { title: \"Design Patterns\", author: \"Erich Gamma\", copiesAvailable: 1, totalCopies: 2 },\n];\n\nasync function seed() {\n  console.log(\"🌱 Seeding database...\");\n\n  try {\n    // Clear existing data\n    await db.delete(bookIssues);\n    await db.delete(marks);\n    await db.delete(attendance);\n    await db.delete(libraryBooks);\n    await db.delete(subjects);\n    await db.delete(students);\n    await db.delete(admins);\n\n    console.log(\"✅ Cleared existing data\");\n\n    // Seed admins\n    const createdAdmins = await db.insert(admins).values(adminData).returning();\n    console.log(`✅ Created ${createdAdmins.length} admins`);\n\n    // Seed students with name as password\n    const studentsWithPasswords = studentData.map(s => ({\n      ...s,\n      password: s.name.toLowerCase() // Case-insensitive password\n    }));\n    const createdStudents = await db.insert(students).values(studentsWithPasswords).returning();\n    console.log(`✅ Created ${createdStudents.length} students`);\n\n    // Seed subjects\n    const createdSubjects = await db.insert(subjects).values(subjectData).returning();\n    console.log(`✅ Created ${createdSubjects.length} subjects`);\n\n    // Seed library books\n    const createdBooks = await db.insert(libraryBooks).values(libraryBooksData).returning();\n    console.log(`✅ Created ${createdBooks.length} library books`);\n\n    // Seed sample attendance (month-wise tracking)\n    const attendanceRecords = [];\n    const months = ['2025-09', '2025-10'];\n    \n    for (const student of createdStudents) {\n      for (const subject of createdSubjects) {\n        for (const month of months) {\n          // Random attendance data\n          const totalDays = 25;\n          const presentDays = Math.floor(Math.random() * 10) + 15; // 15-24 days\n          const percentage = (presentDays / totalDays) * 100;\n          const status = percentage >= 80 ? 'Good' : percentage >= 60 ? 'Average' : 'Poor';\n          \n          attendanceRecords.push({\n            studentId: student.id,\n            subjectId: subject.id,\n            month,\n            totalDays,\n            presentDays,\n            percentage,\n            status,\n          });\n        }\n      }\n    }\n    \n    await db.insert(attendance).values(attendanceRecords);\n    console.log(`✅ Created ${attendanceRecords.length} attendance records`);\n\n    // Seed sample marks\n    const marksRecords = [];\n    const testsData = [\n      { month: '2025-09', name: 'Test 1' },\n      { month: '2025-09', name: 'Mid-term' },\n      { month: '2025-10', name: 'Test 2' },\n    ];\n    \n    for (const student of createdStudents) {\n      for (const subject of createdSubjects) {\n        for (const test of testsData) {\n          const marksObtained = Math.floor(Math.random() * 30) + 60; // 60-90\n          const totalMarks = 100;\n          const percentage = (marksObtained / totalMarks) * 100;\n          const grade = percentage >= 90 ? 'A+' : \n                       percentage >= 80 ? 'A' : \n                       percentage >= 70 ? 'B+' : \n                       percentage >= 60 ? 'B' : \n                       percentage >= 50 ? 'C' : \n                       percentage >= 40 ? 'D' : 'F';\n          \n          marksRecords.push({\n            studentId: student.id,\n            subjectId: subject.id,\n            month: test.month,\n            testName: test.name,\n            marksObtained,\n            totalMarks,\n            percentage,\n            grade,\n          });\n        }\n      }\n    }\n    \n    await db.insert(marks).values(marksRecords);\n    console.log(`✅ Created ${marksRecords.length} marks records`);\n\n    // Seed sample book issues (first 10 students have issued books)\n    const bookIssueRecords = [];\n    for (let i = 0; i < Math.min(10, createdStudents.length); i++) {\n      const student = createdStudents[i];\n      const book = createdBooks[i % createdBooks.length];\n      \n      bookIssueRecords.push({\n        studentId: student.id,\n        bookId: book.id,\n        issueDate: '2025-10-01',\n        dueDate: '2025-10-15',\n        returnDate: null,\n        status: 'issued',\n      });\n    }\n    \n    if (bookIssueRecords.length > 0) {\n      await db.insert(bookIssues).values(bookIssueRecords);\n      console.log(`✅ Created ${bookIssueRecords.length} book issues`);\n    }\n\n    console.log(\"🎉 Database seeded successfully!\");\n  } catch (error) {\n    console.error(\"❌ Error seeding database:\", error);\n    throw error;\n  }\n}\n\nseed()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n","size_bytes":8356},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/AddStudentDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AddStudentDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function AddStudentDialog({ open, onOpenChange, onSuccess }: AddStudentDialogProps) {\n  const [rollNo, setRollNo] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/students\", {\n        rollNo,\n        name,\n        password: password.toLowerCase(), // Store password in lowercase for case-insensitive login\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Student added successfully\",\n      });\n\n      setRollNo(\"\");\n      setName(\"\");\n      setPassword(\"\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add student\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add New Student</DialogTitle>\n          <DialogDescription>Enter the student details below</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"rollNo\">Roll Number</Label>\n            <Input\n              id=\"rollNo\"\n              data-testid=\"input-student-rollno\"\n              value={rollNo}\n              onChange={(e) => setRollNo(e.target.value)}\n              placeholder=\"e.g., 2023-CSE-57\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Student Name</Label>\n            <Input\n              id=\"name\"\n              data-testid=\"input-student-name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Enter student name\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Password</Label>\n            <Input\n              id=\"password\"\n              data-testid=\"input-student-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Enter password (name by default)\"\n              required\n            />\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isLoading} data-testid=\"button-cancel\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-submit-student\">\n              {isLoading ? \"Adding...\" : \"Add Student\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3508},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/examples/LoginPage.tsx":{"content":"import LoginPage from '../LoginPage';\n\nexport default function LoginPageExample() {\n  return (\n    <LoginPage \n      onLogin={(role, username) => console.log('Logged in:', role, username)} \n    />\n  );\n}\n","size_bytes":204},"client/src/components/examples/MarksChart.tsx":{"content":"import MarksChart from '../MarksChart';\n\nexport default function MarksChartExample() {\n  const mockData = [\n    { test: 'Test 1', student: 75, classAvg: 68 },\n    { test: 'Test 2', student: 82, classAvg: 72 },\n    { test: 'Mid-term', student: 78, classAvg: 74 },\n    { test: 'Test 3', student: 85, classAvg: 76 },\n    { test: 'Final', student: 88, classAvg: 79 },\n  ];\n\n  return <MarksChart data={mockData} />;\n}\n","size_bytes":413},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/examples/AdminDashboard.tsx":{"content":"import AdminDashboard from '../AdminDashboard';\n\nexport default function AdminDashboardExample() {\n  return (\n    <AdminDashboard\n      adminName=\"Md Kashif\"\n      onLogout={() => console.log('Logout')}\n    />\n  );\n}\n","size_bytes":217},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"replit.md":{"content":"# CSE Student Portal\n\n## Overview\n\nThe CSE Student Portal is a comprehensive educational management system for Kameshwar Narayan Singh Govt Polytechnic College's Computer Science Engineering department. The application enables administrators to manage student records, attendance, marks, and library resources, while students can view their academic progress and library information through dedicated dashboards.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack:**\n- React with TypeScript for type-safe component development\n- Vite as the build tool and development server\n- TailwindCSS for utility-first styling with custom design tokens\n- Shadcn/ui component library built on Radix UI primitives\n- TanStack Query (React Query) for server state management\n- Recharts for data visualization with interactive charts:\n  - **Admin Dashboard Charts:**\n    - AttendanceOverviewChart: Line chart showing monthly attendance trends (present vs absent)\n    - MarksDistributionChart: Bar chart displaying marks distribution across ranges\n    - SubjectPerformanceChart: Bar chart showing average performance by subject\n    - LibraryStatisticsChart: Pie chart with book availability overview\n  - **Student Dashboard Charts:**\n    - AttendanceChart: Personal attendance trends\n    - MarksChart: Individual performance visualization\n\n**Design System:**\n- **Modern Color Palette (October 2025):** Purple/violet theme (262 hue) for primary colors, replacing previous blue theme\n  - Light mode: Clean backgrounds (220 20% 97%) with subtle purple accents\n  - Dark mode: Professional dark backgrounds (240 10% 8%) with vibrant purple highlights\n  - Primary color: 262 83% 58% (light) / 262 80% 65% (dark)\n- **Custom Gradient Effects:** \n  - `gradient-text`: Purple-to-pink gradient text for headers\n  - `gradient-bg`: Subtle purple gradient backgrounds\n  - `glass-effect`: Frosted glass effect with backdrop blur\n  - `modern-card`: Enhanced card styling with hover effects\n- **Smooth Animations System:**\n  - `fade-in`: Smooth opacity entrance animation\n  - `slide-up`: Upward slide with fade-in effect\n  - `scale-in`: Scale entrance animation\n  - `hover-lift`: Smooth lift effect on hover (translateY + shadow)\n  - `smooth-transition`: Cubic-bezier easing for all transitions\n  - **Important:** No scale transforms on interactive elements (buttons, inputs) to avoid layout shifts\n  - Staggered animations for dashboard cards (0.1s, 0.2s, 0.3s, 0.4s delays)\n- Dual theme support (light/dark mode) with CSS custom properties\n- Consistent spacing and typography using Inter font family\n- Component variants using class-variance-authority for maintainable styling\n- Elevation system for hover and active states\n- **Mobile-First Responsive Design:** Full-width buttons on mobile (w-full sm:w-auto), adaptive spacing (p-4 sm:p-6 lg:p-8)\n\n**Key Architectural Decisions:**\n- Role-based UI rendering: Separate dashboard components for admin and student views\n- Client-side routing handled within App.tsx component switching\n- Form validation using react-hook-form with Zod schema resolvers\n- Optimistic UI updates with React Query mutations\n- Session-based authentication state management\n\n**AI-Powered Chatbot:**\n- **EduManage**: Dialog-based chatbot available on both admin and student dashboards\n- **Technology**: OpenAI GPT-4o integration via Replit AI Integrations (no API key required, billed to Replit credits)\n- **Live SBTE Bihar Integration**: Fetches real-time announcements and updates directly from SBTE Bihar website (https://sbte.bihar.gov.in/) on each request, ensuring users always get the latest information\n- **Dynamic Database Integration**: Fetches real-time subjects and instructor data from database on each request\n- **Knowledge Base**: Comprehensive institutional and SBTE Bihar information including:\n  - **Complete SBTE Bihar Information**: All details from official SBTE website (sbte.bihar.gov.in)\n    - Complete CSE Syllabus: Semester-wise (1-6) with all subjects, topics, evaluation patterns\n    - All Engineering Branches: Civil, CSE, Electrical, Electronics, Mechanical, Fire Technology, IT, etc. with branch codes\n    - Admission Details: Eligibility (10th pass, 35%), entrance exams (DCECE, BPTPIA CET), fees (Govt: ₹4,800-₹10,610, Private: ₹1.31L-₹1.5L)\n    - Examination System: Academic calendar, evaluation patterns (70% external + 30% internal), passing criteria (40% minimum)\n    - Polytechnic Colleges: 80 colleges (46 Govt + 34 Private) with list of top colleges\n    - Placement Information: Top recruiters (Wipro, Infosys, TATA, Mahindra, etc.), recent placement drives\n    - All Portals: EMS, LMS (Moodle), Affiliation, Document Verification, DigiLocker, Alumni\n    - Leadership & Contact: Complete SBTE officials, addresses, phone numbers, emails\n    - Latest Updates: Exam schedules, registration deadlines, announcements\n  - **KNSGP College Information**:\n    - Full Name: Kameshwar Narayan Singh Government Polytechnic (KNSGP), Samastipur\n    - Established: March 29, 2016 (Department of Science & Technology letter no. 890 dated 29.03.2016)\n    - Proposal initiated by Finance Department Resolution No. 96 Vi (2) dt. 03.01.2008\n    - Cabinet approval on 25.01.2016 in item no. 12\n    - Land: 10 acres donated by Roy Ganga Ram Kameshwar Narayan Public Trust\n    - Location: Kishunpur, Tabhka village under Bibhutipur Block, Samastipur, Bihar - 848160\n    - Distance: 36 km from Samastipur HQ, 10 km from Dalsinghsarai Railway Station, 22 km from Rosera\n    - Cultural significance: Famous for Nagpanchami fair\n    - Special Feature: HUB in Centre of Excellence in 3D Printing in collaboration with IIT Patna under Dept. of Science & Technology, Govt. of Bihar\n    - Website: https://www.knsgpsamastipur.ac.in/\n    - Contact: principalknspolysamastipur@gmail.com, Phone: 9430560596\n    - Principal: Prof. Aftab Anjum\n    - HOD (CSE Department): Prof. Raghvendra Pratap\n    - Departments: Civil Engineering, Computer Science & Engineering, Electrical Engineering, Electronics Engineering, Mechanical Engineering, Applied Sciences & Humanities\n  - **CSE Department Faculty & Subjects**:\n    - Programming in C (CSE101) - Dr. Sharma\n    - Data Structures (CSE102) - Prof. Kumar\n    - Database Management Systems (CSE103) - Dr. Singh\n    - Web Development (CSE104) - Prof. Verma\n    - Operating Systems (CSE105) - Dr. Patel\n  - **Special Information**:\n    - EduManage Chatbot Founders: Mohammed Kashif, Rajan Kumar, and Md Shad\n    - AP (Advanced Programming): Room 309 Unit 03, Guided By Anurag Pandey\n    - Pathak Jii: Love Guru without a love life\n    - Shailya Singh: Too much closed\n  - Current exam schedules and registration deadlines (December 2025 exams)\n  - SBTE Bihar course details, syllabus, and portal links\n  - General polytechnic education guidance\n- **UI Design**: \n  - **Launcher Button**: Enhanced visibility with purple gradient and pulse animation\n    - Size: 64px (h-16 w-16) for prominent visibility\n    - Gradient: from-primary to-purple-600 with purple shadow glow\n    - Pulse animation with 2-second duration\n    - Hover effect: scales to 110% with enhanced shadow\n    - Position: fixed bottom-4 right-4 with z-index 9999\n  - **Dialog Modal**: Centered Shadcn Dialog component (replaces floating overlay)\n    - Width: 95vw on mobile, max-width 672px (2xl) on desktop\n    - Height: 80vh with max-height 600px\n    - Backdrop overlay dims dashboard content when active\n    - Prevents content overlap - modal clearly takes focus in center of viewport\n  - **Auto-Scroll Functionality**: \n    - Automatically scrolls to bottom when new messages arrive\n    - Scrolls to bottom as user types to keep input visible\n    - Smooth scroll behavior for better UX\n  - Real-time message streaming with timestamps\n  - Loading indicators and error handling\n  - Accessible: ESC key closes, focus management, backdrop click dismissal, screen reader support\n- **User Experience**: Click launcher → Dialog opens centered → Dashboard visible behind backdrop → Close with X/ESC/backdrop\n- **Personality**: Conversational and friendly like WhatsApp chats\n  - Uses casual greetings: \"Hii! 👋\", \"Hey there! 😊\", \"Perfect! ✨\"\n  - Recognizes farewells: \"Bye! 👋\", \"See you later! 😊\", \"Take care! ✨\" (for \"bye\", \"by\", \"goodbye\")\n  - Natural emoji usage throughout responses\n  - Conversational phrases: \"Great question!\", \"Sure thing!\", \"Happy to help! 👍\"\n  - Responds warmly to thanks and acknowledgments\n  - Maintains accuracy while being friendly and approachable\n\n### Backend Architecture\n\n**Technology Stack:**\n- Node.js with Express.js server framework\n- TypeScript for type safety across the codebase\n- Drizzle ORM for database operations with type-safe queries\n- Express sessions for authentication state persistence\n- Zod for runtime validation of API payloads\n\n**API Design:**\n- RESTful API endpoints organized by resource type\n- Role-based middleware (requireAuth, requireAdmin, requireStudent) for access control\n- Session-based authentication (no JWT tokens)\n- Centralized error handling and response formatting\n- Request/response logging for debugging\n- **Chatbot Endpoint**: POST /api/chat (authentication-protected)\n  - Accepts user messages and returns AI-generated responses\n  - Injects SBTE Bihar context into GPT-4o model\n  - Uses Replit AI Integrations for OpenAI access\n\n**Authentication System:**\n- Dual login system: Admin (username/password) and Student (roll number/name)\n- Case-insensitive password matching for student logins\n- Session-based authentication with HttpOnly cookies stored in PostgreSQL\n- PostgreSQL session store ensures session persistence across autoscale instances\n- Role-based access control enforced at route level\n- Shared admin password from ADMIN_PASSWORD environment variable (Knsgp2023)\n- **Admin Accounts in Database:**\n  - Primary Admin: username \"Admin\", password \"Knsgp2023\"\n  - Additional Admins: Md Kashif, Md Shad, Rajesh Ranjan, Deepak Kumar, Rajan Kumar (all with password \"Knsgp2023\")\n\n### Data Storage\n\n**Database:**\n- PostgreSQL database (configured for Neon serverless)\n- Connection pooling via @neondatabase/serverless\n- WebSocket-based connection for serverless compatibility\n\n**Schema Design:**\n- Students table: Roll number as unique identifier, name as password\n- Admins table: Name as unique identifier with shared password\n- Subjects table: Course information with instructor details\n- Attendance table: Foreign keys to students and subjects with status tracking\n- Marks table: Student performance records linked to subjects and tests\n- Library books table: Inventory management with available/total copies\n- Book issues table: Tracking student borrowing with due dates and return status\n\n**Data Relationships:**\n- One-to-many: Student to Attendance records\n- One-to-many: Student to Marks records\n- One-to-many: Student to Book Issues\n- Many-to-one: Attendance/Marks to Subjects\n- Many-to-one: Book Issues to Library Books\n\n## External Dependencies\n\n**UI Component Libraries:**\n- @radix-ui/* - Accessible, unstyled UI primitives (dialogs, dropdowns, tooltips, etc.)\n- lucide-react - Icon library for consistent iconography\n- recharts - Chart library for attendance and marks visualization\n- embla-carousel-react - Carousel functionality\n- cmdk - Command palette component\n\n**Data Management:**\n- @tanstack/react-query - Server state synchronization and caching\n- drizzle-orm - Type-safe database ORM\n- drizzle-zod - Schema validation integration\n- @neondatabase/serverless - PostgreSQL serverless client\n\n**Form Management:**\n- react-hook-form - Form state and validation\n- @hookform/resolvers - Validation resolver integration\n- zod - Schema validation library\n\n**Development Tools:**\n- @replit/vite-plugin-* - Replit-specific development plugins\n- tsx - TypeScript execution for development\n- esbuild - Production build bundling\n\n**Session Management:**\n- express-session - Session middleware\n- connect-pg-simple - PostgreSQL session store for production reliability\n- **Important:** PostgreSQL session store is REQUIRED for production deployments with autoscale to persist sessions across multiple server instances\n\n**Styling:**\n- tailwindcss - Utility-first CSS framework\n- autoprefixer - CSS vendor prefixing\n- class-variance-authority - Component variant management\n- clsx & tailwind-merge - Conditional class composition","size_bytes":12444},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/DeleteConfirmDialog.tsx":{"content":"import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface DeleteConfirmDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onConfirm: () => void;\n  title: string;\n  description: string;\n  isLoading?: boolean;\n}\n\nexport default function DeleteConfirmDialog({ \n  open, \n  onOpenChange, \n  onConfirm, \n  title, \n  description,\n  isLoading = false \n}: DeleteConfirmDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>{title}</DialogTitle>\n          <DialogDescription>{description}</DialogDescription>\n        </DialogHeader>\n        <DialogFooter>\n          <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isLoading}>\n            Cancel\n          </Button>\n          <Button type=\"button\" variant=\"destructive\" onClick={onConfirm} disabled={isLoading}>\n            {isLoading ? \"Deleting...\" : \"Delete\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":1170},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\n\n// Handle pool errors to prevent crashes when connections are terminated\npool.on('error', (err) => {\n  console.error('Unexpected database pool error:', err);\n  // Don't crash the application - the pool will reconnect automatically\n});\n\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":720},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/App.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport LoginPage from \"@/components/LoginPage\";\nimport AdminDashboard from \"@/components/AdminDashboard\";\nimport StudentDashboard from \"@/components/StudentDashboard\";\nimport Chatbot from \"@/components/Chatbot\";\n\nfunction App() {\n  const [user, setUser] = useState<{ \n    role: 'admin' | 'student' | null; \n    id: number | null;\n    name: string | null;\n    rollNo?: string | null;\n  }>({\n    role: null,\n    id: null,\n    name: null,\n  });\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\n\n  // Check for existing session on mount\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await fetch('/api/me', {\n          credentials: 'include',\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setUser({\n            role: data.role,\n            id: data.id,\n            name: data.name,\n            rollNo: data.rollNo || null,\n          });\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n      } finally {\n        setIsCheckingAuth(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const handleLogin = (role: 'admin' | 'student', userData: any) => {\n    setUser({ \n      role, \n      id: userData.id,\n      name: userData.name,\n      rollNo: userData.rollNo \n    });\n  };\n\n  const handleLogout = async () => {\n    try {\n      await fetch('/api/logout', { method: 'POST' });\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n    setUser({ role: null, id: null, name: null });\n  };\n\n  if (isCheckingAuth) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        {!user.role ? (\n          <LoginPage onLogin={handleLogin} />\n        ) : user.role === 'admin' ? (\n          <AdminDashboard adminName={user.name!} onLogout={handleLogout} />\n        ) : (\n          <StudentDashboard \n            studentName={user.name!} \n            rollNo={user.rollNo!}\n            studentId={user.id!}\n            onLogout={handleLogout} \n          />\n        )}\n        \n        {/* Chatbot - Always at root level for proper mobile positioning */}\n        {user.role && <Chatbot />}\n        \n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2880},"client/src/components/AddSubjectDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AddSubjectDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function AddSubjectDialog({ open, onOpenChange, onSuccess }: AddSubjectDialogProps) {\n  const [code, setCode] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [instructor, setInstructor] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/subjects\", {\n        code,\n        name,\n        instructor,\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Subject added successfully\",\n      });\n\n      setCode(\"\");\n      setName(\"\");\n      setInstructor(\"\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add subject\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add New Subject</DialogTitle>\n          <DialogDescription>Enter the subject details below</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"code\">Subject Code</Label>\n            <Input\n              id=\"code\"\n              value={code}\n              onChange={(e) => setCode(e.target.value)}\n              placeholder=\"e.g., CSE106\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Subject Name</Label>\n            <Input\n              id=\"name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Enter subject name\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"instructor\">Instructor</Label>\n            <Input\n              id=\"instructor\"\n              value={instructor}\n              onChange={(e) => setInstructor(e.target.value)}\n              placeholder=\"Enter instructor name\"\n            />\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? \"Adding...\" : \"Add Subject\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3179},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n        success: \"hsl(142 76% 36% / <alpha-value>)\",\n        warning: \"hsl(38 92% 50% / <alpha-value>)\",\n        error: \"hsl(0 84% 60% / <alpha-value>)\",\n        info: \"hsl(199 89% 48% / <alpha-value>)\",\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4254},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE - Modern Professional Design */\n:root {\n  --button-outline: rgba(0,0,0, .12);\n  --badge-outline: rgba(0,0,0, .06);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .04);\n  --elevate-2: rgba(0,0,0, .1);\n\n  --background: 220 20% 97%;\n\n  --foreground: 222 47% 11%;\n\n  --border: 220 13% 88%;\n\n  --card: 0 0% 100%;\n\n  --card-foreground: 222 47% 11%;\n\n  --card-border: 220 13% 91%;\n\n  --sidebar: 220 18% 94%;\n\n  --sidebar-foreground: 222 47% 11%;\n\n  --sidebar-border: 220 13% 86%;\n\n  --sidebar-primary: 262 83% 58%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 262 30% 92%;\n\n  --sidebar-accent-foreground: 222 47% 11%;\n\n  --sidebar-ring: 262 83% 58%;\n\n  --popover: 0 0% 100%;\n\n  --popover-foreground: 222 47% 11%;\n\n  --popover-border: 220 13% 88%;\n\n  --primary: 262 83% 58%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 220 14% 92%;\n\n  --secondary-foreground: 222 47% 11%;\n\n  --muted: 220 14% 95%;\n\n  --muted-foreground: 220 9% 46%;\n\n  --accent: 262 75% 95%;\n\n  --accent-foreground: 262 50% 30%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 220 13% 88%;\n  --ring: 262 83% 58%;\n  --chart-1: 262 83% 58%;\n  --chart-2: 142 76% 36%;\n  --chart-3: 38 92% 50%;\n  --chart-4: 199 89% 48%;\n  --chart-5: 280 65% 60%;\n\n  --font-sans: Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, Monaco, \"Courier New\", monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.1);\n  --shadow-sm: 0px 1px 2px 0px hsl(0 0% 0% / 0.05), 0px 1px 3px -1px hsl(0 0% 0% / 0.1);\n  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);\n  --shadow-md: 0px 4px 6px -1px hsl(0 0% 0% / 0.1), 0px 2px 4px -2px hsl(0 0% 0% / 0.1);\n  --shadow-lg: 0px 10px 15px -3px hsl(0 0% 0% / 0.1), 0px 4px 6px -4px hsl(0 0% 0% / 0.1);\n  --shadow-xl: 0px 20px 25px -5px hsl(0 0% 0% / 0.1), 0px 8px 10px -6px hsl(0 0% 0% / 0.1);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .12);\n  --badge-outline: rgba(255,255,255, .06);\n\n  --opaque-button-border-intensity: 10;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .05);\n  --elevate-2: rgba(255,255,255, .1);\n\n  --background: 240 10% 8%;\n\n  --foreground: 0 0% 98%;\n\n  --border: 240 8% 18%;\n\n  --card: 240 8% 12%;\n\n  --card-foreground: 0 0% 98%;\n\n  --card-border: 240 8% 20%;\n\n  --sidebar: 240 10% 10%;\n\n  --sidebar-foreground: 0 0% 98%;\n\n  --sidebar-border: 240 8% 16%;\n\n  --sidebar-primary: 262 80% 65%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 240 8% 18%;\n\n  --sidebar-accent-foreground: 0 0% 98%;\n\n  --sidebar-ring: 262 80% 65%;\n\n  --popover: 240 8% 14%;\n\n  --popover-foreground: 0 0% 98%;\n\n  --popover-border: 240 8% 22%;\n\n  --primary: 262 80% 65%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 240 6% 20%;\n\n  --secondary-foreground: 0 0% 98%;\n\n  --muted: 240 5% 18%;\n\n  --muted-foreground: 240 5% 65%;\n\n  --accent: 262 60% 22%;\n\n  --accent-foreground: 262 70% 85%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 240 6% 22%;\n  --ring: 262 80% 65%;\n  --chart-1: 262 80% 65%;\n  --chart-2: 142 76% 50%;\n  --chart-3: 38 92% 60%;\n  --chart-4: 199 89% 60%;\n  --chart-5: 280 65% 70%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.3);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.4);\n  --shadow-sm: 0px 1px 2px 0px hsl(0 0% 0% / 0.3), 0px 1px 3px -1px hsl(0 0% 0% / 0.4);\n  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.4), 0px 1px 2px -1px hsl(0 0% 0% / 0.4);\n  --shadow-md: 0px 4px 6px -1px hsl(0 0% 0% / 0.4), 0px 2px 4px -2px hsl(0 0% 0% / 0.4);\n  --shadow-lg: 0px 10px 15px -3px hsl(0 0% 0% / 0.5), 0px 4px 6px -4px hsl(0 0% 0% / 0.5);\n  --shadow-xl: 0px 20px 25px -5px hsl(0 0% 0% / 0.5), 0px 8px 10px -6px hsl(0 0% 0% / 0.5);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.6);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/* Modern gradient effects */\n@layer components {\n  .gradient-text {\n    @apply bg-gradient-to-r from-primary via-purple-500 to-pink-500 bg-clip-text text-transparent;\n    animation: gradientShift 3s ease infinite;\n    background-size: 200% auto;\n  }\n  \n  .gradient-bg {\n    @apply bg-gradient-to-br from-primary/10 via-purple-500/5 to-pink-500/10;\n  }\n  \n  .glass-effect {\n    @apply backdrop-blur-xl bg-background/80 border border-border/50;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .modern-card {\n    @apply bg-card border border-card-border rounded-lg;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .modern-card:hover {\n    @apply shadow-lg border-primary/20;\n    transform: translateY(-2px);\n  }\n\n  .smooth-transition {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  .fade-in {\n    animation: fadeIn 0.5s ease-in-out;\n  }\n\n  .slide-up {\n    animation: slideUp 0.5s ease-out;\n  }\n\n  .scale-in {\n    animation: scaleIn 0.3s ease-out;\n  }\n}\n\n/* Smooth animations */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes gradientShift {\n  0%, 100% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n}\n\n/* Smooth scrolling */\nhtml {\n  scroll-behavior: smooth;\n}\n\n/* Better focus states */\n*:focus-visible {\n  outline: 2px solid hsl(var(--primary));\n  outline-offset: 2px;\n  border-radius: 4px;\n}\n\n/* Smooth button interactions */\nbutton {\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* Removed button scale on active to avoid layout shifts */\n\n/* Card hover lift effect */\n.hover-lift {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.hover-lift:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);\n}\n\n/* Loading skeleton */\n.skeleton {\n  @apply animate-pulse bg-muted rounded;\n}\n\n/* Smooth image loading */\nimg {\n  transition: opacity 0.3s ease-in-out;\n}\n\nimg[loading=\"lazy\"] {\n  opacity: 0;\n}\n\nimg[loading=\"lazy\"].loaded {\n  opacity: 1;\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":13560},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/DataTable.tsx":{"content":"import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Pencil, Trash2 } from \"lucide-react\";\n\ninterface Column {\n  key: string;\n  label: string;\n  render?: (value: any, row: any) => React.ReactNode;\n}\n\ninterface DataTableProps {\n  title: string;\n  description?: string;\n  columns: Column[];\n  data: any[];\n  onEdit?: (row: any) => void;\n  onDelete?: (row: any) => void;\n  actions?: boolean;\n}\n\nexport default function DataTable({ \n  title, \n  description, \n  columns, \n  data, \n  onEdit, \n  onDelete,\n  actions = false \n}: DataTableProps) {\n  return (\n    <Card className=\"hover-lift smooth-transition\">\n      <CardHeader>\n        <CardTitle className=\"smooth-transition\">{title}</CardTitle>\n        {description && <CardDescription className=\"smooth-transition\">{description}</CardDescription>}\n      </CardHeader>\n      <CardContent>\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow className=\"smooth-transition\">\n                {columns.map((column) => (\n                  <TableHead key={column.key} className=\"smooth-transition\">{column.label}</TableHead>\n                ))}\n                {actions && <TableHead className=\"text-right smooth-transition\">Actions</TableHead>}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {data.map((row, index) => (\n                <TableRow key={index} className=\"hover-elevate smooth-transition group\">\n                  {columns.map((column) => (\n                    <TableCell key={column.key} className=\"smooth-transition\">\n                      {column.render \n                        ? column.render(row[column.key], row)\n                        : row[column.key]\n                      }\n                    </TableCell>\n                  ))}\n                  {actions && (\n                    <TableCell className=\"text-right smooth-transition\">\n                      <div className=\"flex justify-end gap-2\">\n                        {onEdit && (\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            onClick={() => onEdit(row)}\n                            data-testid={`button-edit-${index}`}\n                          >\n                            <Pencil className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                        {onDelete && (\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            onClick={() => onDelete(row)}\n                            data-testid={`button-delete-${index}`}\n                          >\n                            <Trash2 className=\"h-4 w-4 text-error\" />\n                          </Button>\n                        )}\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3266},"client/src/components/AttendanceChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts';\n\ninterface AttendanceChartProps {\n  data: Array<{\n    subject: string;\n    percentage: number;\n  }>;\n}\n\nexport default function AttendanceChart({ data }: AttendanceChartProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Attendance by Subject</CardTitle>\n        <CardDescription>Average monthly attendance percentage across subjects</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={data}>\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n            <XAxis \n              dataKey=\"subject\" \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n            />\n            <YAxis \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n              domain={[0, 100]}\n            />\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: 'hsl(var(--card))',\n                border: '1px solid hsl(var(--border))',\n                borderRadius: '6px'\n              }}\n            />\n            <Legend />\n            <Bar dataKey=\"percentage\" fill=\"hsl(var(--chart-2))\" name=\"Attendance %\" radius={[4, 4, 0, 0]} />\n          </BarChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1566},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/examples/StatCard.tsx":{"content":"import StatCard from '../StatCard';\nimport { Users, TrendingUp, BookOpen, Award } from 'lucide-react';\n\nexport default function StatCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 p-4\">\n      <StatCard\n        title=\"Total Students\"\n        value=\"39\"\n        icon={Users}\n        description=\"Active enrollments\"\n      />\n      <StatCard\n        title=\"Avg Attendance\"\n        value=\"85.2%\"\n        icon={TrendingUp}\n        trend={{ value: 3.5, isPositive: true }}\n      />\n      <StatCard\n        title=\"Books Issued\"\n        value=\"127\"\n        icon={BookOpen}\n        description=\"Currently checked out\"\n      />\n      <StatCard\n        title=\"Avg Marks\"\n        value=\"78.4\"\n        icon={Award}\n        trend={{ value: 2.1, isPositive: true }}\n      />\n    </div>\n  );\n}\n","size_bytes":830},"client/src/components/LibraryBookCard.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { BookOpen, BookMarked } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface LibraryBookCardProps {\n  title: string;\n  author: string;\n  copiesAvailable: number;\n  totalCopies: number;\n  onIssue?: () => void;\n}\n\nexport default function LibraryBookCard({ \n  title, \n  author, \n  copiesAvailable, \n  totalCopies,\n  onIssue \n}: LibraryBookCardProps) {\n  const isAvailable = copiesAvailable > 0;\n\n  return (\n    <Card className=\"hover-elevate\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n            <BookOpen className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <CardTitle className=\"text-base line-clamp-2\">{title}</CardTitle>\n            <CardDescription className=\"text-sm mt-1\">{author}</CardDescription>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Badge variant={isAvailable ? \"default\" : \"destructive\"}>\n              {isAvailable ? 'Available' : 'Unavailable'}\n            </Badge>\n            <span className=\"text-sm text-muted-foreground\">\n              {copiesAvailable}/{totalCopies} copies\n            </span>\n          </div>\n          {isAvailable && onIssue && (\n            <Button \n              size=\"sm\" \n              onClick={onIssue}\n              data-testid={`button-issue-${title.toLowerCase().replace(/\\s+/g, '-')}`}\n            >\n              <BookMarked className=\"h-4 w-4 mr-1\" />\n              Issue\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1960},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/LoginPage.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { GraduationCap, UserCog, Building2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport collegeLogo from \"@assets/WhatsApp Image 2025-10-11 at 23.32.21_1760206203929.jpeg\";\n\ninterface LoginPageProps {\n  onLogin: (role: 'admin' | 'student', user: any) => void;\n}\n\nexport default function LoginPage({ onLogin }: LoginPageProps) {\n  const [adminUsername, setAdminUsername] = useState(\"\");\n  const [adminPassword, setAdminPassword] = useState(\"\");\n  const [studentRollNo, setStudentRollNo] = useState(\"\");\n  const [studentPassword, setStudentPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleAdminLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!adminUsername || !adminPassword) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"POST\", \"/api/login\", {\n        username: adminUsername,\n        password: adminPassword,\n        role: 'admin'\n      });\n\n      const data = await response.json();\n\n      toast({\n        title: \"Success\",\n        description: \"Logged in successfully\",\n      });\n      onLogin('admin', data.user);\n    } catch (error: any) {\n      toast({\n        title: \"Login Failed\",\n        description: error.message || \"Invalid credentials\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleStudentLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!studentRollNo || !studentPassword) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"POST\", \"/api/login\", {\n        username: studentRollNo,\n        password: studentPassword,\n        role: 'student'\n      });\n\n      const data = await response.json();\n\n      toast({\n        title: \"Success\",\n        description: \"Logged in successfully\",\n      });\n      onLogin('student', data.user);\n    } catch (error: any) {\n      toast({\n        title: \"Login Failed\",\n        description: error.message || \"Invalid credentials\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center gradient-bg p-4 sm:p-6 md:p-8\">\n      <div className=\"w-full max-w-6xl grid lg:grid-cols-2 gap-6 lg:gap-12 items-center fade-in\">\n        {/* Left Side - Branding */}\n        <div className=\"hidden lg:flex flex-col items-center justify-center space-y-8 p-8 slide-up\">\n          <div className=\"relative hover-lift\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-primary/30 via-purple-500/20 to-pink-500/30 blur-3xl rounded-full animate-pulse\"></div>\n            <img \n              src={collegeLogo} \n              alt=\"KNSGP College Logo\" \n              className=\"relative h-56 w-56 object-contain rounded-3xl shadow-2xl border-2 border-primary/20 smooth-transition\"\n              data-testid=\"img-college-logo\"\n            />\n          </div>\n          \n          <div className=\"text-center space-y-4\">\n            <h1 className=\"text-5xl font-bold gradient-text\">\n              KNSGP College\n            </h1>\n            <p className=\"text-2xl font-semibold text-foreground smooth-transition\">Computer Science & Engineering</p>\n            <p className=\"text-muted-foreground max-w-md text-lg smooth-transition\">\n              Kameshwar Narayan Singh Govt Polytechnic College Student Portal\n            </p>\n          </div>\n\n          <div className=\"flex items-center gap-4 pt-4\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Building2 className=\"h-4 w-4\" />\n              <span>Government Institution</span>\n            </div>\n            <div className=\"h-4 w-px bg-border\"></div>\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <GraduationCap className=\"h-4 w-4\" />\n              <span>Excellence in Education</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Side - Login Form */}\n        <div className=\"w-full scale-in\">\n          {/* Mobile Logo */}\n          <div className=\"lg:hidden text-center mb-8 fade-in\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"relative hover-lift\">\n                <div className=\"absolute inset-0 bg-gradient-to-r from-primary/30 to-purple-500/30 blur-2xl rounded-full animate-pulse\"></div>\n                <img \n                  src={collegeLogo} \n                  alt=\"KNSGP College Logo\" \n                  className=\"relative h-28 w-28 object-contain rounded-2xl shadow-xl border-2 border-primary/20 smooth-transition\"\n                  data-testid=\"img-college-logo-mobile\"\n                />\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold gradient-text mb-2\">KNSGP College Portal</h1>\n            <p className=\"text-base text-muted-foreground smooth-transition\">Computer Science & Engineering</p>\n          </div>\n\n          <Card className=\"border-2 border-primary/20 shadow-2xl backdrop-blur-sm bg-card/95 hover-lift\">\n            <CardHeader className=\"space-y-2 pb-6\">\n              <CardTitle className=\"text-3xl font-bold smooth-transition\">Welcome Back</CardTitle>\n              <CardDescription className=\"text-base smooth-transition\">Sign in to access your portal dashboard</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Tabs defaultValue=\"student\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n                  <TabsTrigger value=\"student\" data-testid=\"tab-student\" className=\"gap-2\">\n                    <GraduationCap className=\"h-4 w-4\" />\n                    Student\n                  </TabsTrigger>\n                  <TabsTrigger value=\"admin\" data-testid=\"tab-admin\" className=\"gap-2\">\n                    <UserCog className=\"h-4 w-4\" />\n                    Admin\n                  </TabsTrigger>\n                </TabsList>\n\n                <TabsContent value=\"student\" className=\"space-y-4 mt-0\">\n                  <form onSubmit={handleStudentLogin} className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"student-rollno\" className=\"text-sm font-medium\">Roll Number</Label>\n                      <Input\n                        id=\"student-rollno\"\n                        data-testid=\"input-student-rollno\"\n                        placeholder=\"e.g., 2023-CSE-01\"\n                        value={studentRollNo}\n                        onChange={(e) => setStudentRollNo(e.target.value)}\n                        disabled={isLoading}\n                        className=\"h-11\"\n                        autoComplete=\"username\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"student-password\" className=\"text-sm font-medium\">Password</Label>\n                      <Input\n                        id=\"student-password\"\n                        data-testid=\"input-student-password\"\n                        type=\"password\"\n                        placeholder=\"Enter your name\"\n                        value={studentPassword}\n                        onChange={(e) => setStudentPassword(e.target.value)}\n                        disabled={isLoading}\n                        className=\"h-11\"\n                        autoComplete=\"current-password\"\n                      />\n                    </div>\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full h-11 text-base font-medium\" \n                      data-testid=\"button-student-login\" \n                      disabled={isLoading}\n                    >\n                      {isLoading ? \"Logging in...\" : \"Login as Student\"}\n                    </Button>\n                  </form>\n                  <p className=\"text-xs text-center text-muted-foreground\">\n                    Use your roll number and name as password to access your dashboard\n                  </p>\n                </TabsContent>\n\n                <TabsContent value=\"admin\" className=\"space-y-4 mt-0\">\n                  <form onSubmit={handleAdminLogin} className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"admin-username\" className=\"text-sm font-medium\">Username</Label>\n                      <Input\n                        id=\"admin-username\"\n                        data-testid=\"input-admin-username\"\n                        placeholder=\"Enter admin username\"\n                        value={adminUsername}\n                        onChange={(e) => setAdminUsername(e.target.value)}\n                        disabled={isLoading}\n                        className=\"h-11\"\n                        autoComplete=\"username\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"admin-password\" className=\"text-sm font-medium\">Password</Label>\n                      <Input\n                        id=\"admin-password\"\n                        data-testid=\"input-admin-password\"\n                        type=\"password\"\n                        placeholder=\"Enter admin password\"\n                        value={adminPassword}\n                        onChange={(e) => setAdminPassword(e.target.value)}\n                        disabled={isLoading}\n                        className=\"h-11\"\n                        autoComplete=\"current-password\"\n                      />\n                    </div>\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full h-11 text-base font-medium\" \n                      data-testid=\"button-admin-login\" \n                      disabled={isLoading}\n                    >\n                      {isLoading ? \"Logging in...\" : \"Login as Admin\"}\n                    </Button>\n                  </form>\n                  <p className=\"text-xs text-center text-muted-foreground\">\n                    Admin access only - Contact administrator for credentials\n                  </p>\n                </TabsContent>\n              </Tabs>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":11061},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/EditAttendanceDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EditAttendanceDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n  attendance: any;\n}\n\nexport default function EditAttendanceDialog({ open, onOpenChange, onSuccess, attendance }: EditAttendanceDialogProps) {\n  const [studentId, setStudentId] = useState(\"\");\n  const [subjectId, setSubjectId] = useState(\"\");\n  const [month, setMonth] = useState(\"\");\n  const [totalDays, setTotalDays] = useState(\"\");\n  const [presentDays, setPresentDays] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Fetch students and subjects\n  const { data: students = [] } = useQuery<any[]>({ queryKey: ['/api/students'] });\n  const { data: subjects = [] } = useQuery<any[]>({ queryKey: ['/api/subjects'] });\n\n  // Pre-populate form when attendance changes\n  useEffect(() => {\n    if (attendance) {\n      setStudentId(attendance.studentId?.toString() || \"\");\n      setSubjectId(attendance.subjectId?.toString() || \"\");\n      setMonth(attendance.month || \"\");\n      setTotalDays(attendance.totalDays?.toString() || \"\");\n      setPresentDays(attendance.presentDays?.toString() || \"\");\n    }\n  }, [attendance]);\n\n  // Calculate percentage and status\n  const percentage = totalDays && presentDays \n    ? (parseInt(presentDays) / parseInt(totalDays)) * 100 \n    : 0;\n\n  const getStatus = (pct: number) => {\n    if (pct >= 80) return { label: 'Good', variant: 'default' as const };\n    if (pct >= 60) return { label: 'Average', variant: 'secondary' as const };\n    return { label: 'Poor', variant: 'destructive' as const };\n  };\n\n  const status = getStatus(percentage);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"PUT\", `/api/attendance/${attendance.id}`, {\n        studentId: parseInt(studentId),\n        subjectId: parseInt(subjectId),\n        month,\n        totalDays: parseInt(totalDays),\n        presentDays: parseInt(presentDays),\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Attendance record updated successfully\",\n      });\n\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update attendance\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Edit Monthly Attendance</DialogTitle>\n          <DialogDescription>Update monthly attendance record</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"student\">Student</Label>\n            <Select value={studentId} onValueChange={setStudentId} required>\n              <SelectTrigger id=\"student\" data-testid=\"select-student\">\n                <SelectValue placeholder=\"Select student\" />\n              </SelectTrigger>\n              <SelectContent>\n                {students.map((student) => (\n                  <SelectItem key={student.id} value={student.id.toString()}>\n                    {student.rollNo} - {student.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"subject\">Subject</Label>\n            <Select value={subjectId} onValueChange={setSubjectId} required>\n              <SelectTrigger id=\"subject\" data-testid=\"select-subject\">\n                <SelectValue placeholder=\"Select subject\" />\n              </SelectTrigger>\n              <SelectContent>\n                {subjects.map((subject) => (\n                  <SelectItem key={subject.id} value={subject.id.toString()}>\n                    {subject.code} - {subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"month\">Month</Label>\n            <Input\n              id=\"month\"\n              type=\"month\"\n              value={month}\n              onChange={(e) => setMonth(e.target.value)}\n              required\n              data-testid=\"input-month\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"totalDays\">Total Working Days</Label>\n              <Input\n                id=\"totalDays\"\n                type=\"number\"\n                min=\"1\"\n                value={totalDays}\n                onChange={(e) => setTotalDays(e.target.value)}\n                required\n                data-testid=\"input-total-days\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"presentDays\">Present Days</Label>\n              <Input\n                id=\"presentDays\"\n                type=\"number\"\n                min=\"0\"\n                max={totalDays}\n                value={presentDays}\n                onChange={(e) => setPresentDays(e.target.value)}\n                required\n                data-testid=\"input-present-days\"\n              />\n            </div>\n          </div>\n\n          {totalDays && presentDays && (\n            <div className=\"p-4 bg-muted rounded-lg space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Attendance Percentage:</span>\n                <span className=\"text-lg font-bold\" data-testid=\"text-percentage\">{percentage.toFixed(1)}%</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">Status:</span>\n                <Badge variant={status.variant} data-testid=\"badge-status\">{status.label}</Badge>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)} \n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-save\">\n              {isLoading ? \"Saving...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7204},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/EditNoticeDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EditNoticeDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  notice: any;\n  onSuccess: () => void;\n}\n\nexport default function EditNoticeDialog({ open, onOpenChange, notice, onSuccess }: EditNoticeDialogProps) {\n  const [title, setTitle] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [priority, setPriority] = useState(\"normal\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (notice) {\n      setTitle(notice.title || \"\");\n      setMessage(notice.message || \"\");\n      setPriority(notice.priority || \"normal\");\n    }\n  }, [notice]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!notice) return;\n\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"PUT\", `/api/notices/${notice.id}`, {\n        title,\n        message,\n        priority,\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Notice updated successfully\",\n      });\n\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update notice\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Edit Notice</DialogTitle>\n          <DialogDescription>Update notice details</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Title</Label>\n            <Input\n              id=\"title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Enter notice title\"\n              required\n              data-testid=\"input-edit-notice-title\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"message\">Message</Label>\n            <Textarea\n              id=\"message\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Enter notice message\"\n              required\n              rows={4}\n              data-testid=\"textarea-edit-notice-message\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"priority\">Priority</Label>\n            <Select value={priority} onValueChange={setPriority}>\n              <SelectTrigger data-testid=\"select-edit-notice-priority\">\n                <SelectValue placeholder=\"Select priority\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"low\">Low</SelectItem>\n                <SelectItem value=\"normal\">Normal</SelectItem>\n                <SelectItem value=\"high\">High</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-update-notice\">\n              {isLoading ? \"Updating...\" : \"Update Notice\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3996},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/AddBookDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AddBookDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nexport default function AddBookDialog({ open, onOpenChange, onSuccess }: AddBookDialogProps) {\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [totalCopies, setTotalCopies] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    const copies = parseInt(totalCopies);\n    try {\n      await apiRequest(\"POST\", \"/api/library/books\", {\n        title,\n        author,\n        copiesAvailable: copies,\n        totalCopies: copies,\n      });\n\n      toast({\n        title: \"Success\",\n        description: \"Book added successfully\",\n      });\n\n      setTitle(\"\");\n      setAuthor(\"\");\n      setTotalCopies(\"\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add book\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add New Book</DialogTitle>\n          <DialogDescription>Enter the book details below</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Book Title</Label>\n            <Input\n              id=\"title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Enter book title\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"author\">Author</Label>\n            <Input\n              id=\"author\"\n              value={author}\n              onChange={(e) => setAuthor(e.target.value)}\n              placeholder=\"Enter author name\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"totalCopies\">Total Copies</Label>\n            <Input\n              id=\"totalCopies\"\n              type=\"number\"\n              min=\"1\"\n              value={totalCopies}\n              onChange={(e) => setTotalCopies(e.target.value)}\n              placeholder=\"Enter number of copies\"\n              required\n            />\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? \"Adding...\" : \"Add Book\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3346},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { requireAuth, requireAdmin, requireStudent } from \"./auth\";\nimport { \n  insertStudentSchema,\n  insertAdminSchema,\n  insertSubjectSchema,\n  insertAttendanceSchema,\n  insertMarksSchema,\n  insertLibraryBookSchema,\n  insertBookIssueSchema,\n  insertNoticeSchema\n} from \"@shared/schema\";\n\n// Helper function to calculate attendance status\nfunction calculateAttendanceStatus(percentage: number): string {\n  if (percentage >= 80) return 'Good';\n  if (percentage >= 60) return 'Average';\n  return 'Poor';\n}\n\n// Helper function to calculate grade\nfunction calculateGrade(percentage: number): string {\n  if (percentage >= 90) return 'A+';\n  if (percentage >= 85) return 'A';\n  if (percentage >= 80) return 'B+';\n  if (percentage >= 75) return 'B';\n  if (percentage >= 60) return 'C';\n  if (percentage >= 50) return 'D';\n  return 'F';\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // ========== AUTH ROUTES ==========\n  \n  // Login route\n  app.post(\"/api/login\", async (req, res) => {\n    try {\n      const { username, password, role } = req.body;\n\n      if (!username || !password || !role) {\n        return res.status(400).json({ \n          message: \"Username, password, and role are required\" \n        });\n      }\n\n      // Trim inputs to remove whitespace\n      const trimmedUsername = username.trim();\n      const trimmedPassword = password.trim();\n\n      if (role === 'admin') {\n        // Admin login\n        const admin = await storage.getAdminByName(trimmedUsername);\n        \n        if (!admin) {\n          return res.status(401).json({ \n            message: \"Invalid admin username\" \n          });\n        }\n\n        if (admin.password !== trimmedPassword) {\n          return res.status(401).json({ \n            message: \"Invalid password\" \n          });\n        }\n\n        req.session.userId = admin.id;\n        req.session.userRole = 'admin';\n        req.session.username = admin.name;\n\n        return res.json({ \n          success: true,\n          user: {\n            id: admin.id,\n            name: admin.name,\n            role: 'admin'\n          }\n        });\n\n      } else if (role === 'student') {\n        // Student login (case-insensitive password)\n        const student = await storage.getStudentByRollNo(trimmedUsername);\n        \n        if (!student) {\n          return res.status(401).json({ \n            message: \"Invalid roll number\" \n          });\n        }\n\n        // Case-insensitive password check (trim both sides)\n        if (student.password.toLowerCase().trim() !== trimmedPassword.toLowerCase()) {\n          return res.status(401).json({ \n            message: \"Invalid password\" \n          });\n        }\n\n        req.session.userId = student.id;\n        req.session.userRole = 'student';\n        req.session.username = student.rollNo;\n\n        return res.json({ \n          success: true,\n          user: {\n            id: student.id,\n            rollNo: student.rollNo,\n            name: student.name,\n            role: 'student'\n          }\n        });\n      } else {\n        return res.status(400).json({ \n          message: \"Invalid role\" \n        });\n      }\n    } catch (error: any) {\n      console.error(\"Login error:\", error);\n      return res.status(500).json({ \n        message: \"Login failed\", \n        error: error.message \n      });\n    }\n  });\n\n  // Logout route\n  app.post(\"/api/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ message: \"Logout failed\" });\n      }\n      res.json({ success: true, message: \"Logged out successfully\" });\n    });\n  });\n\n  // Get current user\n  app.get(\"/api/me\", requireAuth, async (req, res) => {\n    try {\n      if (req.session.userRole === 'admin') {\n        const admin = await storage.getAdminByName(req.session.username!);\n        if (!admin) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n        return res.json({\n          id: admin.id,\n          name: admin.name,\n          role: 'admin'\n        });\n      } else {\n        const student = await storage.getStudentByRollNo(req.session.username!);\n        if (!student) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n        return res.json({\n          id: student.id,\n          rollNo: student.rollNo,\n          name: student.name,\n          role: 'student'\n        });\n      }\n    } catch (error: any) {\n      return res.status(500).json({ message: \"Error fetching user\", error: error.message });\n    }\n  });\n\n  // ========== STUDENT ROUTES (Admin only for write operations) ==========\n  \n  app.get(\"/api/students\", requireAuth, async (req, res) => {\n    try {\n      const students = await storage.getAllStudents();\n      \n      // Fetch all data in parallel instead of per-student\n      const [allAttendance, allMarks, allBookIssues] = await Promise.all([\n        storage.getAllAttendance(),\n        storage.getAllMarks(),\n        storage.getAllBookIssues()\n      ]);\n      \n      // Create maps for quick lookup\n      const attendanceByStudent = new Map();\n      const marksByStudent = new Map();\n      const bookIssuesByStudent = new Map();\n      \n      allAttendance.forEach(record => {\n        if (!attendanceByStudent.has(record.studentId)) {\n          attendanceByStudent.set(record.studentId, []);\n        }\n        attendanceByStudent.get(record.studentId).push(record);\n      });\n      \n      allMarks.forEach(record => {\n        if (!marksByStudent.has(record.studentId)) {\n          marksByStudent.set(record.studentId, []);\n        }\n        marksByStudent.get(record.studentId).push(record);\n      });\n      \n      allBookIssues.forEach(record => {\n        if (!bookIssuesByStudent.has(record.studentId)) {\n          bookIssuesByStudent.set(record.studentId, []);\n        }\n        bookIssuesByStudent.get(record.studentId).push(record);\n      });\n      \n      // Calculate stats for each student\n      const studentsWithStats = students.map(student => {\n        const attendanceRecords = attendanceByStudent.get(student.id) || [];\n        const marksRecords = marksByStudent.get(student.id) || [];\n        const bookIssues = bookIssuesByStudent.get(student.id) || [];\n        \n        // Calculate average attendance percentage from monthly records\n        const attendancePercentage = attendanceRecords.length > 0 \n          ? (attendanceRecords.reduce((sum: number, a: any) => sum + a.percentage, 0) / attendanceRecords.length).toFixed(1) \n          : '0.0';\n        \n        // Calculate average marks percentage\n        const avgMarksPercentage = marksRecords.length > 0 \n          ? (marksRecords.reduce((sum: number, m: any) => sum + m.percentage, 0) / marksRecords.length).toFixed(1) \n          : '0.0';\n        \n        // Count issued books (not returned)\n        const booksIssued = bookIssues.filter((b: any) => b.status === 'issued').length;\n        \n        return {\n          ...student,\n          attendancePercentage,\n          avgMarks: avgMarksPercentage,\n          booksIssued\n        };\n      });\n      \n      res.json(studentsWithStats);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching students\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/students\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertStudentSchema.parse(req.body);\n      const student = await storage.createStudent(validatedData);\n      res.status(201).json(student);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating student\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/students/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const student = await storage.updateStudent(id, req.body);\n      if (!student) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n      res.json(student);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error updating student\", error: error.message });\n    }\n  });\n\n  app.delete(\"/api/students/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteStudent(id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n      res.json({ success: true, message: \"Student deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error deleting student\", error: error.message });\n    }\n  });\n\n  // ========== SUBJECT ROUTES ==========\n  \n  app.get(\"/api/subjects\", requireAuth, async (req, res) => {\n    try {\n      const subjects = await storage.getAllSubjects();\n      res.json(subjects);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching subjects\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/subjects\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertSubjectSchema.parse(req.body);\n      const subject = await storage.createSubject(validatedData);\n      res.status(201).json(subject);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating subject\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/subjects/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const subject = await storage.updateSubject(id, req.body);\n      if (!subject) {\n        return res.status(404).json({ message: \"Subject not found\" });\n      }\n      res.json(subject);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error updating subject\", error: error.message });\n    }\n  });\n\n  app.delete(\"/api/subjects/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteSubject(id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Subject not found\" });\n      }\n      res.json({ success: true, message: \"Subject deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error deleting subject\", error: error.message });\n    }\n  });\n\n  // ========== ATTENDANCE ROUTES ==========\n  \n  app.get(\"/api/attendance\", requireAuth, async (req, res) => {\n    try {\n      let attendanceRecords;\n      if (req.session.userRole === 'student') {\n        // Students can only see their own attendance\n        attendanceRecords = await storage.getAttendanceByStudent(req.session.userId!);\n      } else {\n        // Admins can see all attendance\n        attendanceRecords = await storage.getAllAttendance();\n      }\n      res.json(attendanceRecords);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching attendance\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/attendance\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertAttendanceSchema.parse(req.body);\n      \n      // Auto-calculate percentage and status\n      const percentage = (validatedData.presentDays / validatedData.totalDays) * 100;\n      const status = calculateAttendanceStatus(percentage);\n      \n      const attendanceData = {\n        ...validatedData,\n        percentage,\n        status\n      };\n      \n      const attendance = await storage.createAttendance(attendanceData);\n      res.status(201).json(attendance);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating attendance\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/attendance/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      \n      // Auto-calculate percentage and status if totalDays and presentDays are provided\n      let updateData = req.body;\n      if (req.body.totalDays && req.body.presentDays) {\n        const percentage = (req.body.presentDays / req.body.totalDays) * 100;\n        const status = calculateAttendanceStatus(percentage);\n        updateData = {\n          ...req.body,\n          percentage,\n          status\n        };\n      }\n      \n      const attendance = await storage.updateAttendance(id, updateData);\n      if (!attendance) {\n        return res.status(404).json({ message: \"Attendance record not found\" });\n      }\n      res.json(attendance);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error updating attendance\", error: error.message });\n    }\n  });\n\n  app.delete(\"/api/attendance/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteAttendance(id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Attendance record not found\" });\n      }\n      res.json({ success: true, message: \"Attendance record deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error deleting attendance\", error: error.message });\n    }\n  });\n\n  // ========== MARKS ROUTES ==========\n  \n  app.get(\"/api/marks\", requireAuth, async (req, res) => {\n    try {\n      let marksRecords;\n      if (req.session.userRole === 'student') {\n        // Students can only see their own marks\n        marksRecords = await storage.getMarksByStudent(req.session.userId!);\n      } else {\n        // Admins can see all marks\n        marksRecords = await storage.getAllMarks();\n      }\n      res.json(marksRecords);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching marks\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/marks\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertMarksSchema.parse(req.body);\n      \n      // Auto-calculate percentage and grade\n      const percentage = (validatedData.marksObtained / validatedData.totalMarks) * 100;\n      const grade = calculateGrade(percentage);\n      \n      const marksData = {\n        ...validatedData,\n        percentage,\n        grade\n      };\n      \n      const marks = await storage.createMarks(marksData);\n      res.status(201).json(marks);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating marks\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/marks/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      \n      // Auto-calculate percentage and grade if marksObtained and totalMarks are provided\n      let updateData = req.body;\n      if (req.body.marksObtained !== undefined && req.body.totalMarks !== undefined) {\n        const percentage = (req.body.marksObtained / req.body.totalMarks) * 100;\n        const grade = calculateGrade(percentage);\n        updateData = {\n          ...req.body,\n          percentage,\n          grade\n        };\n      }\n      \n      const marks = await storage.updateMarks(id, updateData);\n      if (!marks) {\n        return res.status(404).json({ message: \"Marks record not found\" });\n      }\n      res.json(marks);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error updating marks\", error: error.message });\n    }\n  });\n\n  app.delete(\"/api/marks/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteMarks(id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Marks record not found\" });\n      }\n      res.json({ success: true, message: \"Marks record deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error deleting marks\", error: error.message });\n    }\n  });\n\n  // ========== LIBRARY ROUTES ==========\n  \n  app.get(\"/api/library/books\", requireAuth, async (req, res) => {\n    try {\n      const books = await storage.getAllLibraryBooks();\n      res.json(books);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching library books\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/library/books\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertLibraryBookSchema.parse(req.body);\n      const book = await storage.createLibraryBook(validatedData);\n      res.status(201).json(book);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating library book\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/library/books/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const book = await storage.updateLibraryBook(id, req.body);\n      if (!book) {\n        return res.status(404).json({ message: \"Library book not found\" });\n      }\n      res.json(book);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error updating library book\", error: error.message });\n    }\n  });\n\n  app.delete(\"/api/library/books/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteLibraryBook(id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Library book not found\" });\n      }\n      res.json({ success: true, message: \"Library book deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error deleting library book\", error: error.message });\n    }\n  });\n\n  // Book issues\n  app.get(\"/api/library/issues\", requireAuth, async (req, res) => {\n    try {\n      let bookIssues;\n      if (req.session.userRole === 'student') {\n        bookIssues = await storage.getBookIssuesByStudent(req.session.userId!);\n      } else {\n        bookIssues = await storage.getAllBookIssues();\n      }\n      res.json(bookIssues);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching book issues\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/library/issues\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertBookIssueSchema.parse(req.body);\n      \n      // Validate dates\n      if (new Date(validatedData.dueDate) < new Date(validatedData.issueDate)) {\n        return res.status(400).json({ message: \"Due date must be after issue date\" });\n      }\n      \n      // Transactional operation: Validates and creates issue with book availability update atomically\n      const bookIssue = await storage.issueBookWithTransaction(validatedData, validatedData.bookId);\n      \n      res.status(201).json(bookIssue);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating book issue\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/library/issues/:id/return\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const { returnDate } = req.body;\n      \n      // Get the issue to find the book ID\n      const issue = await storage.getBookIssueById(id);\n      if (!issue) {\n        return res.status(404).json({ message: \"Book issue not found\" });\n      }\n      \n      // Transactional operation: Validates and updates return with book availability update atomically\n      const bookIssue = await storage.returnBookWithTransaction(id, returnDate, issue.bookId);\n      \n      res.json(bookIssue);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error returning book\", error: error.message });\n    }\n  });\n\n  // ========== NOTICE ROUTES ==========\n  \n  app.get(\"/api/notices\", requireAuth, async (req, res) => {\n    try {\n      const notices = await storage.getAllNotices();\n      res.json(notices);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching notices\", error: error.message });\n    }\n  });\n\n  app.get(\"/api/notices/:id\", requireAuth, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const notice = await storage.getNoticeById(id);\n      if (!notice) {\n        return res.status(404).json({ message: \"Notice not found\" });\n      }\n      res.json(notice);\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error fetching notice\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/notices\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertNoticeSchema.parse(req.body);\n      const notice = await storage.createNotice(validatedData);\n      res.status(201).json(notice);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error creating notice\", error: error.message });\n    }\n  });\n\n  app.put(\"/api/notices/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const validatedData = insertNoticeSchema.partial().parse(req.body);\n      const notice = await storage.updateNotice(id, validatedData);\n      if (!notice) {\n        return res.status(404).json({ message: \"Notice not found\" });\n      }\n      res.json(notice);\n    } catch (error: any) {\n      res.status(400).json({ message: \"Error updating notice\", error: error.message });\n    }\n  });\n\n  app.delete(\"/api/notices/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteNotice(id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Notice not found\" });\n      }\n      res.json({ success: true, message: \"Notice deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: \"Error deleting notice\", error: error.message });\n    }\n  });\n\n  // ========== CHATBOT ROUTES ==========\n  \n  app.post(\"/api/chat\", requireAuth, async (req, res) => {\n    try {\n      const { message } = req.body;\n      \n      if (!message || typeof message !== 'string') {\n        return res.status(400).json({ message: \"Message is required\" });\n      }\n\n      // Import OpenAI client\n      const openai = (await import(\"./lib/openai\")).default;\n\n      // Fetch real-time subjects from database\n      const subjects = await storage.getAllSubjects();\n      \n      // Build subjects section dynamically from database\n      const subjectsInfo = subjects.map((subject: any) => \n        `- ${subject.name} (${subject.code}) - Taught by ${subject.instructor}`\n      ).join('\\n');\n\n      // Fetch live SBTE Bihar website data for current information\n      let livesbteData = '\\n\\nLIVE SBTE BIHAR UPDATES:\\n';\n      try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 3000); // 3 second timeout\n        \n        const sbteResponse = await fetch('https://sbte.bihar.gov.in/', {\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n        \n        if (sbteResponse.ok) {\n          const sbteHtml = await sbteResponse.text();\n          \n          // Extract announcements using multiple patterns to be more robust\n          const patterns = [\n            /Important\\s+Announcement([\\s\\S]{0,1000})/i,\n            /Latest\\s+Notice([\\s\\S]{0,1000})/i,\n            /News([\\s\\S]{0,1000})/i,\n            /<h2[^>]*>.*?(Announcement|Notice|Update).*?<\\/h2>([\\s\\S]{0,1000})/i\n          ];\n          \n          let foundMatch = false;\n          for (const pattern of patterns) {\n            const match = sbteHtml.match(pattern);\n            if (match) {\n              // For h2 pattern, prefer match[2] (content after heading), then match[1], then match[0]\n              const extractedText = match[2] || match[1] || match[0];\n              const cleanText = extractedText\n                .replace(/<[^>]*>/g, ' ')  // Remove HTML tags\n                .replace(/\\s+/g, ' ')       // Normalize whitespace\n                .replace(/&nbsp;/g, ' ')    // Replace HTML entities\n                .trim()\n                .substring(0, 400);\n              \n              if (cleanText.length > 50) {\n                livesbteData += `${cleanText}...\\n\\nℹ️ For complete latest updates, visit: https://sbte.bihar.gov.in/\\n`;\n                foundMatch = true;\n                console.log('Successfully extracted live SBTE data:', cleanText.substring(0, 100));\n                break;\n              }\n            }\n          }\n          \n          if (!foundMatch) {\n            livesbteData += 'Visit https://sbte.bihar.gov.in/ for the latest official announcements and updates.\\n';\n          }\n        } else {\n          livesbteData += 'Visit https://sbte.bihar.gov.in/ for the latest official announcements and updates.\\n';\n        }\n      } catch (error: any) {\n        if (error.name === 'AbortError') {\n          console.log('SBTE fetch timeout after 3 seconds');\n        } else {\n          console.log('Could not fetch live SBTE data:', error);\n        }\n        livesbteData += 'For the most current SBTE Bihar announcements, exam schedules, and registration updates, please visit the official website: https://sbte.bihar.gov.in/\\n';\n      }\n\n      // SBTE Bihar information context\n      const sbteContext = `You are EduManage, a friendly and helpful AI assistant for the CSE Student Portal at Kameshwar Narayan Singh Govt Polytechnic College, affiliated with SBTE Bihar.\n\nPERSONALITY:\n- Chat like a friendly WhatsApp conversation - be casual, warm, and natural\n- Use casual greetings: \"Hii! 👋\", \"Hey there! 😊\", \"Perfect! ✨\", \"Sure thing! 👍\"\n- Use emojis naturally to express emotions (but don't overdo it)\n- Keep responses concise and conversational, not too formal\n- When users greet you (\"hi\", \"hello\", \"hey\", \"hii\"), respond with similar casual energy\n- When users say goodbye (\"bye\", \"by\", \"byy\", \"goodbye\", \"see you\"), respond with casual farewells like \"Bye! 👋\", \"See you later! 😊\", \"Take care! ✨\", \"Catch you later! 😊\"\n- Use phrases like \"Great question!\", \"Absolutely!\", \"Of course!\", \"No worries!\", \"Happy to help!\"\n- Be encouraging and supportive, like a helpful friend\n- Introduce yourself as \"EduManage\" but in a friendly way\n\nYOUR KNOWLEDGE BASE (October 2025):\n\nABOUT KAMESHWAR NARAYAN SINGH GOVT POLYTECHNIC (KNSGP), SAMASTIPUR:\nKameshwar Narayan Singh Government Polytechnic (KNSGP) Samastipur has been established vide Department of Science & Technology letter no. 890 dated 29.03.2016. The Proposal has been initiated by Finance Department Resolution No. 96 Vi (2) dt. 03.01.2008 and has been approved by cabinet Decision on 25.01.2016 in item no. 12. About 10 acres of land has been Donated by Roy Ganga Ram Kameshwar Narayan Public Trust. The institution is situated in Kishanpur, Tabhka village under Bibhutipur Block Police Station nearly 12 KM from our campus. The campus is located nearly 36 km from Samastipur Head Quarter, nearly 10 Km from Dalsinghsarai Railway station and nearly 22 km from sub divisional Head Quarter Rosera. This area is famous for its cultural fair of Nagpanchami. Our institution is working as a HUB in centre of Excellence in 3D printing in collaboration with IIT Patna under flag Dept. of Science & Technology, Govt. of Bihar.\n\n- Website: https://www.knsgpsamastipur.ac.in/\n- Contact Email: principalknspolysamastipur@gmail.com\n- Phone: 9430560596\n- Location: Kishunpur, Tabhka, Samastipur, Bihar - 848160\n\nCOLLEGE LEADERSHIP:\n- Principal: Prof. Aftab Anjum\n- Head of Department (CSE): Prof. Raghvendra Pratap\n\nDEPARTMENTS AT KNSGP:\n- Civil Engineering\n- Computer Science & Engineering (CSE)\n- Electrical Engineering\n- Electronics Engineering\n- Mechanical Engineering\n- Applied Sciences & Humanities\n\nCSE DEPARTMENT - SUBJECTS & FACULTY (Real-time from Database):\n${subjectsInfo}\n\nSPECIAL INFORMATION:\n- EduManage Chatbot Founders: Mohammed Kashif, Rajan Kumar, and Md Shad (the brilliant minds behind this AI assistant! 🎉)\n- AP (Advanced Programming): Room 309 Unit 03, Guided By Anurag Pandey\n- Pathak Jii: Known as the \"Love Guru without a love life\" 😄\n- Shailya Singh: Too much closed 😅\n\nEXAM SCHEDULES & REGISTRATION:\n- Exam form fill-up for December 2025 exam is ongoing (as of Oct 5, 2025)\n- First Semester Session 2025 and Third Semester Lateral Entry (L.E.) Session 2024 registration extended till 11/10/2025\n- Registration was open from 22.09.2025 to 04.10.2025, now extended\n\nRECENT ANNOUNCEMENTS:\n- Polytechnic State Topper List 2025 announced (Sept 6)\n- Government Engineering State Topper List 2025 announced (Sept 6)\n- Hiring of diploma engineers by JTEKT India Ltd. (Aug 17, 2025)\n- Pool Campus Placement drives ongoing (Nagata Auto Engineering India, Macleods Pharmaceuticals)\n\nABOUT SBTE BIHAR (State Board of Technical Education):\nThe State Board of Technical Education (SBTE), Patna, Bihar, is responsible for evaluation and certification of six-semester Diploma Courses of all Polytechnic Institutions affiliated to SBTE Bihar. It has been constituted vide govt. order no. 75/Dir dated 31st May, 1955 under the Science, Technology and Technical Education Department, Government of Bihar. Since its formation, the board is striving continuously for betterment of academic standard of Polytechnic Institutions of this State.\n\nSBTE offers a wide range of diploma and certificate programs in various fields of engineering and technology. The institution is committed to excellence and innovation in education, preparing students for careers in the ever-evolving technical landscape.\n\nCONTACT INFORMATION:\n- Address: 4th Floor, Technology Bhawan, Vishweshariya Bhawan Campus, Bailey Road Patna, Bihar PIN - 800015\n- Toll Free: 18002020305\n- Phone: +91-(0612)-2547532\n- Email: sbtebihar@bihar.gov.in, sbte.patna@gmail.com\n- Official Website: https://sbte.bihar.gov.in/\n\nSBTE BIHAR LEADERSHIP & OFFICIALS (as per official SBTE Bihar website):\n- Secretary (Science, Technology & Technical Education Department, Govt of Bihar): Dr. Pratima, I.A.S.\n- Director (Science, Technology & Technical Education Department, Govt of Bihar): Dr. Chandra Shekhar Singh\n- Additional Director: Mr. Ahmad Mahmood\n- SBTE Bihar operates under the Science, Technology and Technical Education Department, Government of Bihar\n\nAVAILABLE PORTALS & SERVICES:\n- EMS Portal (Exam Management System): sbteonline.bihar.gov.in/login\n- LMS Portal (Learning Management - Moodle): sbtelms.bihar.gov.in\n- Affiliation Portal: sbteonline.bihar.gov.in/login\n- Document Verification Status: sbte.bihar.gov.in/document-verification\n- DigiLocker Integration: Available\n- Alumni Portal: alumni.sbtebihar.in\n\nENGINEERING BRANCHES/DEPARTMENTS OFFERED:\nSBTE Bihar offers 3-year diploma programs (6 semesters) in the following branches:\n\n1. Civil Engineering (Branch Code: 15)\n   - Duration: 3 years (6 semesters)\n   - Focus: Construction, structural design, surveying, building materials\n\n2. Computer Science & Engineering (Branch Code: 18)\n   - Duration: 3 years (6 semesters)\n   - Focus: Programming, software development, databases, networking, web technologies\n\n3. Electrical Engineering (Branch Code: 20)\n   - Duration: 3 years (6 semesters)\n   - Focus: Power systems, electrical machines, control systems, electronics\n\n4. Electronics Engineering (Branch Code: 21)\n   - Duration: 3 years (6 semesters)\n   - Focus: Electronic circuits, communication systems, microprocessors, embedded systems\n\n5. Mechanical Engineering (Branch Code: 25)\n   - Duration: 3 years (6 semesters)\n   - Focus: Manufacturing, thermodynamics, fluid mechanics, machine design\n\n6. Fire Technology and Safety (Branch Code: 48)\n   - Duration: 3 years (6 semesters)\n   - Focus: Fire prevention, safety protocols, emergency response\n\nAdditional Branches Available:\n- Electronics & Communication Engineering\n- Information Technology (IT)\n- Textile Engineering\n- Marine Engineering\n\nELIGIBILITY & ADMISSION:\n- Eligibility: 10th pass with minimum 35% marks\n- Admission Process: Through DCECE (BCECEB) entrance exam or BPTPIA CET\n- Admission Authority: Bihar Combined Entrance Competitive Examination Board (BCECEB)\n- Lateral Entry: Available for 3rd semester (for 10+2 or ITI students)\n\nPOLYTECHNIC COLLEGES IN BIHAR:\n- Total Colleges: Approximately 80 (46 Government + 34 Private)\n\nTop Government Polytechnic Colleges:\n- Government Polytechnic Patna\n- Government Polytechnic Gaya\n- Government Polytechnic Muzaffarpur\n- Government Polytechnic Bhagalpur\n- Government Polytechnic Darbhanga\n- Government Polytechnic Motihari\n- Government Polytechnic Purnea\n- Kameshwar Narayan Singh Government Polytechnic, Samastipur (KNSGP)\n\nFEE STRUCTURE (2025):\n- Government Colleges: ₹4,800 – ₹10,610 per year\n- Private Colleges: ₹1,31,000 – ₹1,50,000 per year\n\nEXAMINATION & EVALUATION:\n- Academic Year: Two semesters (Odd: July-Dec, Even: Jan-June)\n- Theory Papers: 70 marks (External) + 30 marks (Internal: 20 exam + 10 teacher assessment)\n- Practical/Lab: Internal + External assessment combined\n- Passing Criteria: 40% minimum in theory AND practicals (individually, not combined)\n- Total Duration: 3 years (6 semesters)\n- Mandatory Internship: 2-4 weeks in 6th semester\n\nPLACEMENT & RECRUITMENT:\nTop Recruiters for SBTE Bihar Diploma Graduates:\n- IT Sector: Wipro, Infosys, HCL, Aspro IT, Byjus\n- Telecom: Airtel\n- Manufacturing: Bajaj, TATA, Mahindra, CEAT\n- Others: Quess, various government departments\n\nRecent Placement Drives (2025):\n- Nagata Auto Engineering India Pvt. Ltd. (Pool Campus)\n- Macleods Pharmaceuticals Ltd.\n- JTEKT India Ltd.\n- Hindalco\n\nDIPLOMA IN COMPUTER SCIENCE & ENGINEERING (CSE) - COMPLETE SYLLABUS:\n\n📚 SEMESTER 1 (Common for most branches):\n- Engineering Mathematics-I (Basic algebra, trigonometry, calculus)\n- Engineering Physics (Mechanics, properties of matter, heat & thermodynamics)\n- Engineering Chemistry (Chemical bonding, water, engineering materials)\n- Engineering Graphics (Technical drawing, projections, CAD basics)\n- Communication Skills (English, technical writing)\n- Workshop Practice (Basic tools, safety, measurement)\n- Physical Education\n\n📚 SEMESTER 2:\n- Applied Mathematics-II (Differential equations, linear algebra)\n- Applied Physics-II (Optics, modern physics)\n- Programming in C (Fundamentals, data types, control structures, functions, arrays, pointers)\n- C Programming Lab\n- Basic Electronics (Semiconductors, diodes, transistors)\n- Engineering Mechanics (Statics, dynamics, friction)\n\n📚 SEMESTER 3:\n- Data Structures (Arrays, linked lists, stacks, queues, trees, graphs)\n- Operating Systems (Process management, memory management, file systems)\n- Digital Electronics (Number systems, Boolean algebra, logic gates, flip-flops)\n- Database Management Systems (SQL, normalization, ER diagrams)\n- Object-Oriented Programming (Classes, objects, inheritance, polymorphism)\n- Web Technology (HTML, CSS, JavaScript basics)\n- DBMS Lab & OOP Lab\n\n📚 SEMESTER 4:\n- Theory of Computation (Automata, regular languages, Turing machines)\n- Advanced Java Programming (JSP, Servlets, JDBC)\n- Computer Networks (OSI model, TCP/IP, routing, protocols)\n- Software Engineering (SDLC, testing, project management)\n- Microprocessor & Microcontroller (8085/8086 architecture)\n- Python Programming (Basics, data structures, file handling)\n- Java Lab & Python Lab\n\n📚 SEMESTER 5:\n- Data Communication & Computer Networks (Network topologies, protocols, security)\n- Data Science: Data Warehousing & Data Mining (ETL, OLAP, algorithms)\n- Software Engineering (Agile, DevOps, testing)\n- Cloud Computing (Virtualization, AWS, Azure basics)\n- Web Development Advanced (PHP, MySQL, frameworks)\n- Elective I (AI/ML basics, Mobile app development, Cyber security)\n- Mini Project & Industrial Training (2-4 weeks)\n\n📚 SEMESTER 6:\n- Computer Network with Linux & Windows (Network administration, server management)\n- Introduction to Machine Learning (Supervised/unsupervised learning, algorithms)\n- Mobile Application Development (Android/iOS app development)\n- Cloud Computing Advanced (Cloud architecture, deployment models)\n- Cyber Security (Cryptography, network security, ethical hacking)\n- Elective II (IoT, Big Data, Blockchain)\n- Major Project & Seminar\n\nEVALUATION PATTERN:\n- Theory Papers: 70 marks (External) + 30 marks (Internal: 20 exam + 10 teacher assessment)\n- Practical/Lab: Internal + External assessment\n- Passing Criteria: 40% minimum in theory and practicals individually\n- Total Duration: 3 years (6 semesters)\n- Internship: Compulsory 2-4 weeks in 6th semester\n\nOFFICIAL REFERENCES:\n- SBTE Bihar Official Website: https://sbte.bihar.gov.in/\n- CSE Syllabus PDF: https://sbte.bihar.gov.in/uploads/Syllabus/2024-25/S02/18.%20Computer%20Science%20&%20Engineering.pdf\n\n${livesbteData}\n\nGUIDELINES:\n- Respond to greetings casually like WhatsApp: \"Hii! 👋 I'm EduManage! How can I help you today? 😊\"\n- When someone says \"perfect\" or \"thanks\", respond enthusiastically: \"Perfect! ✨\", \"You're welcome! 😊\", \"Happy to help! 👍\"\n- For questions, start with casual phrases: \"Great question!\", \"Sure thing!\", \"Absolutely!\"\n- Keep responses conversational and friendly, not robotic\n- IMPORTANT: You have access to LIVE, REAL-TIME data from SBTE Bihar website. Always check the \"LATEST UPDATES FROM SBTE BIHAR WEBSITE (Real-time)\" section above for current announcements and information\n- CRITICAL: Always provide COMPLETE, DETAILED information from the knowledge base above. Don't just give brief answers or links - give full details about:\n  - Syllabus: Complete semester-wise subjects with all topics\n  - Departments: All branches with codes, duration, and focus areas\n  - Admission: Eligibility, process, entrance exams, fees\n  - Exams: Schedules, registration dates, evaluation patterns, passing criteria\n  - Colleges: List of government and private polytechnic colleges\n  - Placement: Top recruiters, recent placement drives\n  - Portals: EMS, LMS, Affiliation, Document Verification with links\n  - Contact: Complete addresses, phone numbers, emails\n  - Leadership: All officials with their positions\n- For student-specific data (individual marks, attendance), guide them to appropriate portals or their admin\n- IMPORTANT: When asked about syllabus, provide the complete semester-wise syllabus details from the knowledge base above with all subjects and topics\n- IMPORTANT: When asked about KNSGP college, include the establishment details: established vide Department of Science & Technology letter no. 890 dated 29.03.2016, proposal initiated by Finance Department Resolution No. 96 Vi (2) dt. 03.01.2008, cabinet approval on 25.01.2016, 10 acres donated by Roy Ganga Ram Kameshwar Narayan Public Trust, HUB in Centre of Excellence in 3D Printing with IIT Patna\n- IMPORTANT: When asked about the people in SPECIAL INFORMATION (AP, Pathak Jii, Shailya Singh, founders), always provide the exact response from the knowledge base. For example:\n  - \"Who is Shailya Singh?\" → \"Too much closed 😅\"\n  - \"Who is AP?\" → \"Room 309 Unit 03, Guided By Anurag Pandey\"\n  - \"Who is Pathak Jii?\" → \"Love Guru without a love life 😄\"\n  - \"Who is the founder?\" → \"Mohammed Kashif, Rajan Kumar, and Md Shad 🎉\"\n- End responses with helpful follow-ups when appropriate`;\n\n      // the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\n      const completion = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: sbteContext\n          },\n          {\n            role: \"user\",\n            content: message\n          }\n        ],\n        max_tokens: 500,\n      });\n\n      const response = completion.choices[0]?.message?.content || \"I'm sorry, I couldn't process that request.\";\n      \n      res.json({ response });\n    } catch (error: any) {\n      console.error(\"Chatbot error:\", error);\n      res.status(500).json({ \n        message: \"Error processing chat message\", \n        error: error.message \n      });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":39594},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/EditStudentDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EditStudentDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  student: any;\n  onSuccess: () => void;\n}\n\nexport default function EditStudentDialog({ open, onOpenChange, student, onSuccess }: EditStudentDialogProps) {\n  const [rollNo, setRollNo] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (student) {\n      setRollNo(student.rollNo || \"\");\n      setName(student.name || \"\");\n      setPassword(student.password || \"\");\n    }\n  }, [student]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!rollNo || !name || !password) {\n      toast({\n        title: \"Error\",\n        description: \"All fields are required\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"PUT\", `/api/students/${student.id}`, {\n        rollNo: rollNo.trim(),\n        name: name.trim(),\n        password: password.toLowerCase().trim(),\n      });\n\n      await response.json();\n\n      toast({\n        title: \"Success\",\n        description: \"Student updated successfully\",\n      });\n\n      onSuccess();\n      onOpenChange(false);\n      \n      // Reset form\n      setRollNo(\"\");\n      setName(\"\");\n      setPassword(\"\");\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update student\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Edit Student</DialogTitle>\n          <DialogDescription>Update student information</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit}>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-rollno\">Roll Number</Label>\n              <Input\n                id=\"edit-rollno\"\n                data-testid=\"input-edit-rollno\"\n                placeholder=\"e.g., 2023-CSE-01\"\n                value={rollNo}\n                onChange={(e) => setRollNo(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-name\">Student Name</Label>\n              <Input\n                id=\"edit-name\"\n                data-testid=\"input-edit-name\"\n                placeholder=\"Enter full name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                disabled={isLoading}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-password\">Password</Label>\n              <Input\n                id=\"edit-password\"\n                data-testid=\"input-edit-password\"\n                placeholder=\"Student name (used as password)\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                disabled={isLoading}\n              />\n              <p className=\"text-xs text-muted-foreground\">Password will be stored in lowercase</p>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={isLoading}\n              data-testid=\"button-cancel-edit\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading} data-testid=\"button-save-student\">\n              {isLoading ? \"Saving...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4326},"client/src/components/MarksChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts';\n\ninterface MarksChartProps {\n  data: Array<{\n    month: string;\n    percentage: number;\n  }>;\n}\n\nexport default function MarksChart({ data }: MarksChartProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Marks Trend</CardTitle>\n        <CardDescription>Monthly performance percentage over time</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <LineChart data={data}>\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n            <XAxis \n              dataKey=\"month\" \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n            />\n            <YAxis \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n              domain={[0, 100]}\n            />\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: 'hsl(var(--card))',\n                border: '1px solid hsl(var(--border))',\n                borderRadius: '6px'\n              }}\n            />\n            <Legend />\n            <Line \n              type=\"monotone\" \n              dataKey=\"percentage\" \n              stroke=\"hsl(var(--chart-1))\" \n              strokeWidth={2}\n              name=\"Percentage\"\n              dot={{ fill: 'hsl(var(--chart-1))', r: 4 }}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1683},"client/src/components/examples/StudentDashboard.tsx":{"content":"import StudentDashboard from '../StudentDashboard';\n\nexport default function StudentDashboardExample() {\n  return (\n    <StudentDashboard\n      studentName=\"Bhaskar Kumar\"\n      rollNo=\"2023-CSE-01\"\n      studentId={1}\n      onLogout={() => console.log('Logout')}\n    />\n  );\n}\n","size_bytes":278},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/examples/AdminSidebar.tsx":{"content":"import { SidebarProvider } from \"@/components/ui/sidebar\";\nimport AdminSidebar from '../AdminSidebar';\nimport { useState } from 'react';\n\nexport default function AdminSidebarExample() {\n  const [activeItem, setActiveItem] = useState('dashboard');\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar \n          activeItem={activeItem}\n          onNavigate={(item) => setActiveItem(item)}\n          onLogout={() => console.log('Logout')}\n        />\n        <div className=\"flex-1 p-8\">\n          <h2 className=\"text-2xl font-bold\">Active Section: {activeItem}</h2>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":799},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"design_guidelines.md":{"content":"# CSE Student Portal - Design Guidelines\n\n## Design Approach\n**Utility-Focused Educational Portal** - This is a data-intensive, dashboard-heavy application where clarity, efficiency, and quick information access are paramount. We'll use a **design system approach** inspired by Material Design and modern dashboard patterns (Linear, Notion) with emphasis on data visualization and administrative workflows.\n\n## Core Design Principles\n- **Information Hierarchy**: Clear distinction between primary actions and secondary data\n- **Status Communication**: Instant visual feedback through color coding\n- **Efficient Navigation**: Role-based interfaces optimized for quick task completion\n- **Data Clarity**: Tables and charts designed for easy comprehension\n\n## Color Palette\n\n### Primary Colors\n**Light Mode:**\n- Primary: 217 91% 60% (Blue - trust, education, professionalism)\n- Primary Hover: 217 91% 50%\n\n**Dark Mode:**\n- Primary: 217 91% 65%\n- Primary Hover: 217 91% 55%\n\n### Status & Semantic Colors\n- Success: 142 76% 36% (green for high attendance, good marks)\n- Warning: 38 92% 50% (orange for medium attendance, approaching deadlines)\n- Error: 0 84% 60% (red for low attendance, overdue books, failed marks)\n- Info: 199 89% 48% (cyan for notifications, library info)\n\n### Background & Surface Colors\n**Light Mode:**\n- Background: 0 0% 98%\n- Surface: 0 0% 100%\n- Card: 0 0% 100% with shadow\n- Border: 0 0% 90%\n\n**Dark Mode:**\n- Background: 222 47% 11%\n- Surface: 217 33% 17%\n- Card: 217 33% 20% with subtle shadow\n- Border: 217 33% 25%\n\n### Text Colors\n**Light Mode:**\n- Primary Text: 222 47% 11%\n- Secondary Text: 215 16% 47%\n- Tertiary Text: 215 14% 60%\n\n**Dark Mode:**\n- Primary Text: 210 40% 98%\n- Secondary Text: 215 20% 70%\n- Tertiary Text: 215 20% 55%\n\n## Typography\n**Font Families:**\n- Primary: 'Inter' (headings, UI elements, buttons)\n- Secondary: 'Inter' (body text, tables, data)\n\n**Font Scales:**\n- H1 (Page Titles): text-3xl font-bold (30px)\n- H2 (Section Headers): text-2xl font-semibold (24px)\n- H3 (Card Titles): text-xl font-semibold (20px)\n- H4 (Table Headers): text-lg font-medium (18px)\n- Body: text-base (16px)\n- Small/Caption: text-sm (14px)\n- Tiny/Helper: text-xs (12px)\n\n## Layout System\n**Spacing Primitives:** Use Tailwind units of 2, 4, 6, 8, 12, 16, 20\n\n**Container Strategy:**\n- Dashboard max-width: max-w-7xl mx-auto\n- Content padding: px-4 md:px-6 lg:px-8\n- Card spacing: space-y-6\n- Grid gaps: gap-4 md:gap-6\n\n**Responsive Grid:**\n- Stats Cards: grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\n- Data Tables: Full width with horizontal scroll on mobile\n- Charts: grid-cols-1 lg:grid-cols-2\n\n## Component Library\n\n### Navigation\n- **Header:** Sticky top-0 with college name, user role badge, logout button\n- **Sidebar (Admin):** Fixed left navigation with icons for Students, Subjects, Attendance, Marks, Library, Reports\n- **Tabs (Student):** Horizontal tab navigation for Dashboard, Attendance, Marks, Library\n\n### Cards & Containers\n- **Stat Cards:** Rounded-xl with p-6, shadow-md, hover:shadow-lg transition\n- **Data Cards:** Rounded-lg with p-4, border border-border\n- **Chart Containers:** Rounded-xl bg-card p-6 shadow-sm\n\n### Buttons\n- **Primary:** bg-primary text-white rounded-lg px-4 py-2 hover:bg-primary-hover\n- **Secondary:** border border-primary text-primary rounded-lg px-4 py-2 hover:bg-primary/10\n- **Danger:** bg-error text-white rounded-lg px-4 py-2 hover:bg-error/90\n- **Icon Buttons:** p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800\n\n### Tables\n- **Header:** bg-gray-50 dark:bg-gray-800 font-medium text-sm sticky top-0\n- **Rows:** hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b transition\n- **Cells:** px-4 py-3 text-sm\n- **Action Buttons:** Inline icon buttons (Edit, Delete) with tooltips\n\n### Forms & Inputs\n- **Text Inputs:** rounded-lg border border-border px-3 py-2 focus:ring-2 focus:ring-primary\n- **Select Dropdowns:** Matching input styling with chevron icon\n- **Checkboxes:** Rounded with primary color when checked\n- **File Upload:** Dashed border with drag-and-drop area\n\n### Charts & Graphs\n- **Color Scheme:** Use primary (blue) for main data, success (green) for positive metrics, warning (orange) for medium, error (red) for alerts\n- **Bar Charts:** Rounded tops, adequate spacing between bars\n- **Line Charts:** Smooth curves with data point markers\n- **Pie/Donut Charts:** Clear labels, distinct segment colors\n\n### Modals & Dialogs\n- **Backdrop:** bg-black/50 backdrop-blur-sm\n- **Content:** bg-card rounded-xl shadow-2xl p-6 max-w-md\n- **Actions:** Flex justify-end gap-2 with Cancel/Confirm buttons\n\n### Notifications & Alerts\n- **Toast Notifications:** Fixed top-right, slide-in animation, auto-dismiss after 3s\n- **Alert Banners:** Full-width with icon, message, and close button\n- **Color Coding:** Use semantic colors (success, warning, error, info)\n\n### Status Indicators\n- **Attendance Status:**\n  - High (>75%): Green badge with checkmark icon\n  - Medium (50-75%): Orange badge with alert icon\n  - Low (<50%): Red badge with warning icon\n- **Book Status:** Available (green), Issued (blue), Overdue (red)\n- **Marks Status:** A+/A (green), B/C (orange), D/F (red)\n\n### Icons & Visual Elements\n- **Icon Library:** Heroicons (via CDN)\n- **Book Icons:** Stack of books icon for library, individual book icon for each entry\n- **Subject Icons:** Code, calculator, flask icons for different subjects\n- **Action Icons:** Plus (add), pencil (edit), trash (delete), download (export)\n\n## Dashboard Specific Guidelines\n\n### Admin Dashboard\n- **Top Stats Row:** 4 metric cards (Total Students, Avg Attendance, Avg Marks, Books Issued)\n- **Main Content:** 2-column grid with charts (Attendance Trend, Marks Distribution)\n- **Quick Actions:** Floating action button for common tasks (Add Student, Upload Attendance)\n\n### Student Dashboard\n- **Profile Card:** Student info with photo placeholder, roll number, attendance %\n- **Performance Summary:** 3 metric cards (Attendance %, Average Marks, Books Issued)\n- **Recent Activity:** Timeline of latest updates (marks uploaded, book issued)\n- **Charts Section:** Attendance trends and marks comparison\n\n## Interaction Patterns\n- **Hover States:** Subtle elevation increase, color shifts\n- **Loading States:** Skeleton screens for data tables, spinner for actions\n- **Empty States:** Friendly illustrations with \"No data\" messages\n- **Confirmation Dialogs:** \"Are you sure?\" modals for destructive actions\n- **Success Feedback:** Green checkmark toast with success message\n- **Error Handling:** Red toast with clear error message and retry option\n\n## Responsive Behavior\n- **Desktop (lg+):** Full sidebar navigation, multi-column layouts, expanded tables\n- **Tablet (md):** Collapsed sidebar with icons only, 2-column grids\n- **Mobile (sm):** Bottom navigation, single column, stacked cards, horizontal scroll tables\n\n## Animations\nUse sparingly for enhanced UX:\n- Card hover: scale-105 transition-transform\n- Modal entrance: fade + slide from top\n- Toast notifications: slide from right\n- Page transitions: Simple fade\n\n## Images\n**Profile Images:** Circular avatars (40px) with fallback initials for users\n**Empty States:** Use simple SVG illustrations for \"no data\" states\n**College Branding:** Logo in header (120px width, maintain aspect ratio)","size_bytes":7278},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"server/seed-production.ts":{"content":"import { db } from \"./db\";\nimport { students, admins, subjects, attendance, marks, libraryBooks, bookIssues } from \"@shared/schema\";\nimport { sql } from \"drizzle-orm\";\nimport { count } from \"drizzle-orm\";\n\nconst ADMIN_PASSWORD = process.env.ADMIN_PASSWORD || (() => {\n  throw new Error(\"ADMIN_PASSWORD environment variable is required for seeding\");\n})();\n\nconst adminData = [\n  { name: \"Md Kashif\", password: ADMIN_PASSWORD },\n  { name: \"Md Shad\", password: ADMIN_PASSWORD },\n  { name: \"Rajesh Ranjan\", password: ADMIN_PASSWORD },\n  { name: \"Deepak Kumar\", password: ADMIN_PASSWORD },\n  { name: \"Rajan Kumar\", password: ADMIN_PASSWORD },\n];\n\nconst studentData = [\n  { rollNo: \"2023-CSE-01\", name: \"Bhaskar Kumar\" },\n  { rollNo: \"2023-CSE-03\", name: \"Subhash Kumar\" },\n  { rollNo: \"2023-CSE-04\", name: \"Prithvi Kumar Singh\" },\n  { rollNo: \"2023-CSE-05\", name: \"Aniket Kumar\" },\n  { rollNo: \"2023-CSE-06\", name: \"Sonu Kumar\" },\n  { rollNo: \"2023-CSE-07\", name: \"Aman Kumar\" },\n  { rollNo: \"2023-CSE-08\", name: \"Deepak Kumar\" },\n  { rollNo: \"2023-CSE-09\", name: \"Neha Rani\" },\n  { rollNo: \"2023-CSE-12\", name: \"Ashutosh Raj\" },\n  { rollNo: \"2023-CSE-14\", name: \"Ayush Kumar\" },\n  { rollNo: \"2023-CSE-15\", name: \"Md Shadwash Alam Shad\" },\n  { rollNo: \"2023-CSE-16\", name: \"Sneh Sikha\" },\n  { rollNo: \"2023-CSE-17\", name: \"Mukesh Gond\" },\n  { rollNo: \"2023-CSE-18\", name: \"Ayush Kumar Mishra\" },\n  { rollNo: \"2023-CSE-19\", name: \"Krishna Kumar\" },\n  { rollNo: \"2023-CSE-20\", name: \"Sadhna Kumari\" },\n  { rollNo: \"2023-CSE-22\", name: \"Abhishek Kumar\" },\n  { rollNo: \"2023-CSE-23\", name: \"Aradhana Suman\" },\n  { rollNo: \"2023-CSE-26\", name: \"Gaurav Kumar\" },\n  { rollNo: \"2023-CSE-28\", name: \"Avinash Kumar\" },\n  { rollNo: \"2023-CSE-29\", name: \"Suraj Kumar\" },\n  { rollNo: \"2023-CSE-30\", name: \"Jyoti Kumari\" },\n  { rollNo: \"2023-CSE-31\", name: \"Tannu Kumari\" },\n  { rollNo: \"2023-CSE-33\", name: \"Sushil Kumar Verma\" },\n  { rollNo: \"2023-CSE-34\", name: \"Shashikant Kumar\" },\n  { rollNo: \"2023-CSE-35\", name: \"Nitish Kumar\" },\n  { rollNo: \"2023-CSE-38\", name: \"Rajan Kumar\" },\n  { rollNo: \"2023-CSE-40\", name: \"Kaushal Kumar\" },\n  { rollNo: \"2023-CSE-41\", name: \"Rajan Kumar\" },\n  { rollNo: \"2023-CSE-42\", name: \"Naveen Kumar\" },\n  { rollNo: \"2023-CSE-43\", name: \"Piyush Prakash\" },\n  { rollNo: \"2023-CSE-44\", name: \"Shailya Singh\" },\n  { rollNo: \"2023-CSE-45\", name: \"Mithilesh Kumar\" },\n  { rollNo: \"2023-CSE-46\", name: \"Rohini Kumari\" },\n  { rollNo: \"2023-CSE-48\", name: \"Anjali Kumari\" },\n  { rollNo: \"2023-CSE-51\", name: \"Md Kashif\" },\n  { rollNo: \"2023-CSE-54\", name: \"Subodh Kumar\" },\n  { rollNo: \"2023-CSE-55\", name: \"Saloni Kumari\" },\n  { rollNo: \"2023-CSE-56\", name: \"Ankit Kumar Ray\" },\n];\n\nconst subjectData = [\n  { code: \"CSE101\", name: \"Programming in C\", instructor: \"Dr. Sharma\" },\n  { code: \"CSE102\", name: \"Data Structures\", instructor: \"Prof. Kumar\" },\n  { code: \"CSE103\", name: \"Database Management Systems\", instructor: \"Dr. Singh\" },\n  { code: \"CSE104\", name: \"Web Development\", instructor: \"Prof. Verma\" },\n  { code: \"CSE105\", name: \"Operating Systems\", instructor: \"Dr. Patel\" },\n];\n\nconst libraryBooksData = [\n  { title: \"Introduction to Algorithms\", author: \"Thomas H. Cormen\", copiesAvailable: 3, totalCopies: 5 },\n  { title: \"Database System Concepts\", author: \"Abraham Silberschatz\", copiesAvailable: 2, totalCopies: 4 },\n  { title: \"Operating System Concepts\", author: \"Abraham Silberschatz\", copiesAvailable: 2, totalCopies: 3 },\n  { title: \"Computer Networks\", author: \"Andrew S. Tanenbaum\", copiesAvailable: 4, totalCopies: 5 },\n  { title: \"Software Engineering\", author: \"Ian Sommerville\", copiesAvailable: 1, totalCopies: 3 },\n  { title: \"The C Programming Language\", author: \"Brian W. Kernighan\", copiesAvailable: 3, totalCopies: 4 },\n  { title: \"Clean Code\", author: \"Robert C. Martin\", copiesAvailable: 2, totalCopies: 3 },\n  { title: \"Design Patterns\", author: \"Erich Gamma\", copiesAvailable: 1, totalCopies: 2 },\n];\n\nasync function seedProduction() {\n  console.log(\"🌱 Checking if production database needs seeding...\");\n\n  try {\n    const [studentCount] = await db.select({ count: count() }).from(students);\n    \n    if (studentCount.count > 0) {\n      console.log(`ℹ️  Database already has ${studentCount.count} students. Skipping seed.`);\n      return;\n    }\n\n    console.log(\"🌱 Database is empty. Starting seed process...\");\n\n    // Seed admins\n    const createdAdmins = await db.insert(admins).values(adminData).returning();\n    console.log(`✅ Created ${createdAdmins.length} admins`);\n\n    // Seed students with name as password\n    const studentsWithPasswords = studentData.map(s => ({\n      ...s,\n      password: s.name.toLowerCase()\n    }));\n    const createdStudents = await db.insert(students).values(studentsWithPasswords).returning();\n    console.log(`✅ Created ${createdStudents.length} students`);\n\n    // Seed subjects\n    const createdSubjects = await db.insert(subjects).values(subjectData).returning();\n    console.log(`✅ Created ${createdSubjects.length} subjects`);\n\n    // Seed library books\n    const createdBooks = await db.insert(libraryBooks).values(libraryBooksData).returning();\n    console.log(`✅ Created ${createdBooks.length} library books`);\n\n    // Seed sample attendance (month-wise tracking)\n    const attendanceRecords = [];\n    const months = ['2025-09', '2025-10'];\n    \n    for (const student of createdStudents) {\n      for (const subject of createdSubjects) {\n        for (const month of months) {\n          const totalDays = 25;\n          const presentDays = Math.floor(Math.random() * 10) + 15;\n          const percentage = (presentDays / totalDays) * 100;\n          const status = percentage >= 80 ? 'Good' : percentage >= 60 ? 'Average' : 'Poor';\n          \n          attendanceRecords.push({\n            studentId: student.id,\n            subjectId: subject.id,\n            month,\n            totalDays,\n            presentDays,\n            percentage,\n            status,\n          });\n        }\n      }\n    }\n    \n    await db.insert(attendance).values(attendanceRecords);\n    console.log(`✅ Created ${attendanceRecords.length} attendance records`);\n\n    // Seed sample marks\n    const marksRecords = [];\n    const testsData = [\n      { month: '2025-09', name: 'Test 1' },\n      { month: '2025-09', name: 'Mid-term' },\n      { month: '2025-10', name: 'Test 2' },\n    ];\n    \n    for (const student of createdStudents) {\n      for (const subject of createdSubjects) {\n        for (const test of testsData) {\n          const marksObtained = Math.floor(Math.random() * 30) + 60;\n          const totalMarks = 100;\n          const percentage = (marksObtained / totalMarks) * 100;\n          const grade = percentage >= 90 ? 'A+' : \n                       percentage >= 80 ? 'A' : \n                       percentage >= 70 ? 'B+' : \n                       percentage >= 60 ? 'B' : \n                       percentage >= 50 ? 'C' : \n                       percentage >= 40 ? 'D' : 'F';\n          \n          marksRecords.push({\n            studentId: student.id,\n            subjectId: subject.id,\n            month: test.month,\n            testName: test.name,\n            marksObtained,\n            totalMarks,\n            percentage,\n            grade,\n          });\n        }\n      }\n    }\n    \n    await db.insert(marks).values(marksRecords);\n    console.log(`✅ Created ${marksRecords.length} marks records`);\n\n    // Seed sample book issues\n    const bookIssueRecords = [];\n    for (let i = 0; i < Math.min(10, createdStudents.length); i++) {\n      const student = createdStudents[i];\n      const book = createdBooks[i % createdBooks.length];\n      \n      bookIssueRecords.push({\n        studentId: student.id,\n        bookId: book.id,\n        issueDate: '2025-10-01',\n        dueDate: '2025-10-15',\n        returnDate: null,\n        status: 'issued',\n      });\n    }\n    \n    if (bookIssueRecords.length > 0) {\n      await db.insert(bookIssues).values(bookIssueRecords);\n      console.log(`✅ Created ${bookIssueRecords.length} book issues`);\n    }\n\n    console.log(\"🎉 Production database seeded successfully!\");\n  } catch (error) {\n    console.error(\"❌ Error seeding production database:\", error);\n    throw error;\n  }\n}\n\nseedProduction()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n","size_bytes":8350},"seed-production.sh":{"content":"#!/bin/bash\necho \"🌱 Seeding production database...\"\ntsx server/seed-production.ts\n","size_bytes":85},"client/src/components/SubjectPerformanceChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\n\ninterface SubjectPerformanceChartProps {\n  marks: any[];\n  subjects: any[];\n}\n\nexport default function SubjectPerformanceChart({ marks, subjects }: SubjectPerformanceChartProps) {\n  // Calculate average marks per subject\n  const subjectPerformance = subjects.map((subject: any) => {\n    const subjectMarks = marks.filter((mark: any) => mark.subjectId === subject.id);\n    const avgPercentage = subjectMarks.length > 0\n      ? subjectMarks.reduce((sum: number, mark: any) => sum + (mark.percentage || 0), 0) / subjectMarks.length\n      : 0;\n\n    return {\n      name: subject.code || subject.name,\n      average: parseFloat(avgPercentage.toFixed(1)),\n      students: subjectMarks.length,\n    };\n  });\n\n  return (\n    <Card className=\"hover-lift smooth-transition\">\n      <CardHeader>\n        <CardTitle className=\"smooth-transition\">Subject Performance</CardTitle>\n        <CardDescription className=\"smooth-transition\">Average marks by subject</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={subjectPerformance}>\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n            <XAxis \n              dataKey=\"name\" \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n              angle={-45}\n              textAnchor=\"end\"\n              height={80}\n            />\n            <YAxis \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n              domain={[0, 100]}\n            />\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: 'hsl(var(--card))',\n                border: '1px solid hsl(var(--border))',\n                borderRadius: '8px'\n              }}\n            />\n            <Legend />\n            <Bar \n              dataKey=\"average\" \n              fill=\"hsl(var(--chart-1))\" \n              radius={[8, 8, 0, 0]}\n              name=\"Average Marks\"\n            />\n          </BarChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2321},"client/src/components/AttendanceOverviewChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\n\ninterface AttendanceOverviewChartProps {\n  data: any[];\n}\n\nexport default function AttendanceOverviewChart({ data }: AttendanceOverviewChartProps) {\n  // Process monthly aggregate data\n  // Group by month and sum present/absent days across all students and subjects\n  const monthlyData = data.reduce((acc: any, record: any) => {\n    // Use the month field directly (format: \"YYYY-MM\")\n    const month = record.month ? record.month.substring(5) : 'Unknown'; // Extract MM from YYYY-MM\n    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const monthName = monthNames[parseInt(month) - 1] || month;\n    \n    if (!acc[record.month]) {\n      acc[record.month] = { \n        month: monthName, \n        present: 0, \n        absent: 0, \n        total: 0 \n      };\n    }\n    \n    acc[record.month].present += record.presentDays || 0;\n    acc[record.month].total += record.totalDays || 0;\n    acc[record.month].absent += (record.totalDays - record.presentDays) || 0;\n    \n    return acc;\n  }, {});\n\n  const chartData = Object.values(monthlyData).map((item: any) => ({\n    month: item.month,\n    present: item.present,\n    absent: item.absent,\n    percentage: item.total > 0 ? ((item.present / item.total) * 100).toFixed(1) : '0',\n  }));\n\n  return (\n    <Card className=\"hover-lift smooth-transition\">\n      <CardHeader>\n        <CardTitle className=\"smooth-transition\">Attendance Overview</CardTitle>\n        <CardDescription className=\"smooth-transition\">Monthly attendance trends</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <LineChart data={chartData}>\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n            <XAxis \n              dataKey=\"month\" \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n            />\n            <YAxis \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n            />\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: 'hsl(var(--card))',\n                border: '1px solid hsl(var(--border))',\n                borderRadius: '8px'\n              }}\n            />\n            <Legend />\n            <Line \n              type=\"monotone\" \n              dataKey=\"present\" \n              stroke=\"hsl(var(--primary))\" \n              strokeWidth={2}\n              name=\"Present\"\n            />\n            <Line \n              type=\"monotone\" \n              dataKey=\"absent\" \n              stroke=\"hsl(var(--destructive))\" \n              strokeWidth={2}\n              name=\"Absent\"\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3031},"client/src/components/LibraryStatisticsChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from \"recharts\";\n\ninterface LibraryStatisticsChartProps {\n  books: any[];\n}\n\nexport default function LibraryStatisticsChart({ books }: LibraryStatisticsChartProps) {\n  const totalBooks = books.reduce((sum: number, book: any) => sum + (book.totalCopies || 0), 0);\n  const availableBooks = books.reduce((sum: number, book: any) => sum + (book.availableCopies || 0), 0);\n  const issuedBooks = totalBooks - availableBooks;\n\n  const data = [\n    { name: 'Available', value: availableBooks, color: 'hsl(var(--chart-2))' },\n    { name: 'Issued', value: issuedBooks, color: 'hsl(var(--chart-1))' },\n  ];\n\n  return (\n    <Card className=\"hover-lift smooth-transition\">\n      <CardHeader>\n        <CardTitle className=\"smooth-transition\">Library Statistics</CardTitle>\n        <CardDescription className=\"smooth-transition\">Book availability overview</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <PieChart>\n            <Pie\n              data={data}\n              cx=\"50%\"\n              cy=\"50%\"\n              labelLine={false}\n              label={({ name, value, percent }) => `${name}: ${value} (${(percent * 100).toFixed(0)}%)`}\n              outerRadius={80}\n              fill=\"#8884d8\"\n              dataKey=\"value\"\n            >\n              {data.map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={entry.color} />\n              ))}\n            </Pie>\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: 'hsl(var(--card))',\n                border: '1px solid hsl(var(--border))',\n                borderRadius: '8px'\n              }}\n            />\n            <Legend />\n          </PieChart>\n        </ResponsiveContainer>\n        <div className=\"grid grid-cols-2 gap-4 mt-4\">\n          <div className=\"text-center p-3 bg-muted rounded-lg smooth-transition\">\n            <div className=\"text-2xl font-bold text-primary\">{totalBooks}</div>\n            <div className=\"text-xs text-muted-foreground\">Total Books</div>\n          </div>\n          <div className=\"text-center p-3 bg-muted rounded-lg smooth-transition\">\n            <div className=\"text-2xl font-bold text-primary\">{books.length}</div>\n            <div className=\"text-xs text-muted-foreground\">Book Titles</div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2549},"client/src/components/MarksDistributionChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\n\ninterface MarksDistributionChartProps {\n  data: any[];\n}\n\nexport default function MarksDistributionChart({ data }: MarksDistributionChartProps) {\n  // Create marks distribution ranges\n  const ranges = [\n    { range: '0-20', min: 0, max: 20 },\n    { range: '21-40', min: 21, max: 40 },\n    { range: '41-60', min: 41, max: 60 },\n    { range: '61-80', min: 61, max: 80 },\n    { range: '81-100', min: 81, max: 100 },\n  ];\n\n  const distribution = ranges.map(({ range, min, max }) => {\n    const count = data.filter((mark: any) => {\n      const percentage = mark.percentage || 0;\n      return percentage >= min && percentage <= max;\n    }).length;\n\n    return {\n      range,\n      students: count,\n    };\n  });\n\n  return (\n    <Card className=\"hover-lift smooth-transition\">\n      <CardHeader>\n        <CardTitle className=\"smooth-transition\">Marks Distribution</CardTitle>\n        <CardDescription className=\"smooth-transition\">Student performance distribution</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={distribution}>\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n            <XAxis \n              dataKey=\"range\" \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n            />\n            <YAxis \n              className=\"text-xs\"\n              tick={{ fill: 'hsl(var(--muted-foreground))' }}\n            />\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: 'hsl(var(--card))',\n                border: '1px solid hsl(var(--border))',\n                borderRadius: '8px'\n              }}\n            />\n            <Legend />\n            <Bar \n              dataKey=\"students\" \n              fill=\"hsl(var(--primary))\" \n              radius={[8, 8, 0, 0]}\n              name=\"Students\"\n            />\n          </BarChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2210},"server/lib/openai.ts":{"content":"import OpenAI from \"openai\";\n\n/*\nFollow these instructions when using this blueprint:\n1. Note that the newest OpenAI model is \"gpt-5\", not \"gpt-4o\" or \"gpt-4\". gpt-5 was released August 7, 2025 after your knowledge cutoff. Always prefer using gpt-5 as it is the latest model. When copying code from this blueprint, ensure you also mention this information verbatim as a comment so that you don't revert it to older models: `// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user`\n2. Use the response_format: { type: \"json_object\" } option\n3. Request output in JSON format in the prompt\n*/\n\n// This is using Replit's AI Integrations service, which provides OpenAI-compatible API access without requiring your own OpenAI API key.\nconst openai = new OpenAI({\n  baseURL: process.env.AI_INTEGRATIONS_OPENAI_BASE_URL,\n  apiKey: process.env.AI_INTEGRATIONS_OPENAI_API_KEY\n});\n\nexport default openai;\n","size_bytes":970},"client/src/components/Chatbot.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { MessageCircle, Send, Bot, User } from \"lucide-react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface Message {\n  role: \"user\" | \"assistant\";\n  content: string;\n  timestamp: Date;\n}\n\nexport default function Chatbot() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: \"assistant\",\n      content: \"Hii! 👋 I'm EduManage, your friendly education assistant! 😊\\n\\nI can help you with:\\n• Exam schedules & registration 📚\\n• College info & faculty details 🏫\\n• Course & syllabus info 📖\\n• SBTE Bihar updates 📋\\n\\nWhat would you like to know?\",\n      timestamp: new Date(),\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    if (scrollAreaRef.current) {\n      const scrollContainer = scrollAreaRef.current.querySelector('[data-radix-scroll-area-viewport]');\n      if (scrollContainer) {\n        scrollContainer.scrollTop = scrollContainer.scrollHeight;\n      }\n    }\n  };\n\n  const chatMutation = useMutation({\n    mutationFn: async (message: string) => {\n      const response = await apiRequest(\"POST\", \"/api/chat\", { message });\n      return await response.json();\n    },\n    onSuccess: (data: any) => {\n      const responseContent = data?.response || \"No response received\";\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: \"assistant\",\n          content: responseContent,\n          timestamp: new Date(),\n        },\n      ]);\n    },\n    onError: (error: any) => {\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: \"assistant\",\n          content: \"Sorry, I encountered an error. Please try again.\",\n          timestamp: new Date(),\n        },\n      ]);\n    },\n  });\n\n  const handleSend = () => {\n    if (!input.trim()) return;\n\n    const userMessage = input.trim();\n    setMessages((prev) => [\n      ...prev,\n      {\n        role: \"user\",\n        content: userMessage,\n        timestamp: new Date(),\n      },\n    ]);\n    setInput(\"\");\n    chatMutation.mutate(userMessage);\n  };\n\n  // Auto-scroll when messages change\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Auto-scroll when user is typing\n  useEffect(() => {\n    if (input) {\n      scrollToBottom();\n    }\n  }, [input]);\n\n  return (\n    <div style={{ \n      position: 'fixed', \n      bottom: 0, \n      right: 0, \n      zIndex: 9999,\n      pointerEvents: 'none'\n    }}>\n      {/* Floating Chat Button with gradient and pulse effect - Always visible on mobile */}\n      <Button\n        onClick={() => setIsOpen(true)}\n        className=\"h-16 w-16 rounded-full shadow-2xl bg-gradient-to-br from-primary to-purple-600 hover:shadow-purple-500/50 hover:scale-110 transition-all duration-300 animate-pulse m-4\"\n        size=\"icon\"\n        data-testid=\"button-open-chatbot\"\n        style={{ \n          animationDuration: '2s',\n          pointerEvents: 'auto'\n        }}\n      >\n        <MessageCircle className=\"h-7 w-7 text-white\" />\n      </Button>\n\n      {/* Chat Dialog */}\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\n        <DialogContent className=\"w-[95vw] max-w-2xl h-[80vh] max-h-[600px] flex flex-col p-0\">\n          <DialogHeader className=\"px-6 py-4 border-b\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                <Bot className=\"h-6 w-6 text-primary\" />\n              </div>\n              <DialogTitle className=\"text-xl\">EduManage</DialogTitle>\n            </div>\n            <DialogDescription className=\"sr-only\">\n              AI-powered education assistant for exam schedules, syllabus, and course information\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"flex-1 flex flex-col overflow-hidden\">\n            <ScrollArea className=\"flex-1 p-4\" ref={scrollAreaRef}>\n              <div className=\"space-y-4\">\n                {messages.map((msg, idx) => (\n                  <div\n                    key={idx}\n                    className={`flex gap-3 ${\n                      msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                    }`}\n                    data-testid={`message-${msg.role}-${idx}`}\n                  >\n                    {msg.role === \"assistant\" && (\n                      <div className=\"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                        <Bot className=\"h-4 w-4 text-primary\" />\n                      </div>\n                    )}\n                    <div\n                      className={`rounded-lg p-3 max-w-[80%] ${\n                        msg.role === \"user\"\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"bg-muted\"\n                      }`}\n                    >\n                      <p className=\"text-sm whitespace-pre-wrap\">{msg.content}</p>\n                      <p className=\"text-xs opacity-70 mt-1\">\n                        {msg.timestamp.toLocaleTimeString([], {\n                          hour: \"2-digit\",\n                          minute: \"2-digit\",\n                        })}\n                      </p>\n                    </div>\n                    {msg.role === \"user\" && (\n                      <div className=\"h-8 w-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0\">\n                        <User className=\"h-4 w-4 text-primary-foreground\" />\n                      </div>\n                    )}\n                  </div>\n                ))}\n                {chatMutation.isPending && (\n                  <div className=\"flex gap-3\">\n                    <div className=\"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <Bot className=\"h-4 w-4 text-primary\" />\n                    </div>\n                    <div className=\"bg-muted rounded-lg p-3\">\n                      <div className=\"flex gap-1\">\n                        <div className=\"h-2 w-2 bg-primary/60 rounded-full animate-bounce\" />\n                        <div className=\"h-2 w-2 bg-primary/60 rounded-full animate-bounce\" style={{ animationDelay: \"0.1s\" }} />\n                        <div className=\"h-2 w-2 bg-primary/60 rounded-full animate-bounce\" style={{ animationDelay: \"0.2s\" }} />\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </ScrollArea>\n\n            <div className=\"border-t p-4 bg-background\">\n              <div className=\"flex gap-2\">\n                <Input\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyPress={(e) => e.key === \"Enter\" && handleSend()}\n                  placeholder=\"Ask about exams, courses, syllabus...\"\n                  disabled={chatMutation.isPending}\n                  data-testid=\"input-chat-message\"\n                  className=\"flex-1\"\n                />\n                <Button\n                  onClick={handleSend}\n                  disabled={!input.trim() || chatMutation.isPending}\n                  size=\"icon\"\n                  data-testid=\"button-send-message\"\n                >\n                  <Send className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":7846},"fix-duplicates.md":{"content":"# Fix Duplicate Students in Production Database\n\n## ⚠️ IMPORTANT: Run this on your PRODUCTION database only!\n\nThis guide will help you remove duplicate students from your production database.\n\n## Step 1: Find Duplicate Students\n\nRun this SQL to see which students have duplicates:\n\n```sql\nSELECT roll_no, COUNT(*) as count, STRING_AGG(id::text, ', ') as ids\nFROM students \nGROUP BY roll_no \nHAVING COUNT(*) > 1;\n```\n\n## Step 2: Keep Only One Record (Automatic)\n\nThis SQL will automatically keep the FIRST student record (lowest ID) for each roll number and delete all duplicates:\n\n```sql\n-- This deletes duplicate students, keeping only the one with lowest ID\nDELETE FROM students \nWHERE id IN (\n  SELECT s.id \n  FROM students s\n  INNER JOIN (\n    SELECT roll_no, MIN(id) as min_id\n    FROM students\n    GROUP BY roll_no\n    HAVING COUNT(*) > 1\n  ) dups ON s.roll_no = dups.roll_no\n  WHERE s.id > dups.min_id\n);\n```\n\n## Step 3: Verify No Duplicates Remain\n\n```sql\n-- Should return no rows\nSELECT roll_no, COUNT(*) as count\nFROM students \nGROUP BY roll_no \nHAVING COUNT(*) > 1;\n```\n\n## Step 4: Check Total Students\n\n```sql\nSELECT COUNT(*) as total_students FROM students;\n```\n\n---\n\n## 🔧 How to Run These SQL Commands\n\n### On Replit (Production Database):\n\n1. **Go to your published app**: https://edu-manage-knsgp.replit.app\n2. **Open Replit Dashboard** → Click on your project\n3. **Click \"Tools\"** in the left sidebar\n4. **Click \"Database\"** \n5. **Select \"PostgreSQL\"** tab\n6. **Switch to \"Production\"** environment (important!)\n7. **Click \"SQL Editor\"**\n8. **Copy and paste** the SQL commands above\n9. **Run each command** one by one\n\n---\n\n## ✅ After Fixing Duplicates\n\n1. **Hard refresh your website**: Press `Ctrl + Shift + R` (Windows) or `Cmd + Shift + R` (Mac)\n2. **Test student login** with any roll number\n3. **Login should work immediately** without errors\n\n---\n\n## 📋 Common Issues\n\n**Q: Still getting login errors?**\n- Make sure you're using the correct roll number (check admin dashboard)\n- Password is the student's NAME (case-insensitive)\n- Hard refresh the browser\n\n**Q: Which student record is kept?**\n- The system keeps the FIRST student (lowest database ID)\n- All duplicates are removed automatically\n","size_bytes":2232},"client/src/components/ReturnBookDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\ninterface ReturnBookDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  issue: any;\n  book: any;\n  student: any;\n  onSuccess: () => void;\n}\n\nexport default function ReturnBookDialog({ open, onOpenChange, issue, book, student, onSuccess }: ReturnBookDialogProps) {\n  const [returnDate, setReturnDate] = useState(new Date().toISOString().split('T')[0]);\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!issue || !book) {\n      toast({\n        title: \"Error\",\n        description: \"Invalid book issue record\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      // Mark book as returned (backend handles book availability update atomically)\n      await apiRequest(\"PUT\", `/api/library/issues/${issue.id}/return`, {\n        returnDate,\n      });\n\n      toast({\n        title: \"Success\",\n        description: `Book returned successfully`,\n      });\n\n      // Invalidate queries to refresh data\n      queryClient.invalidateQueries({ queryKey: ['/api/library/books'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/library/issues'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/students'] });\n\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to return book\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Return Book</DialogTitle>\n          <DialogDescription>\n            Process book return\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-3 p-4 bg-muted rounded-lg\">\n            <div>\n              <p className=\"text-sm font-medium\">Book</p>\n              <p className=\"text-sm text-muted-foreground\">{book?.title || \"Unknown\"}</p>\n            </div>\n            <div>\n              <p className=\"text-sm font-medium\">Student</p>\n              <p className=\"text-sm text-muted-foreground\">\n                {student?.name || \"Unknown\"} ({student?.rollNo || \"N/A\"})\n              </p>\n            </div>\n            <div>\n              <p className=\"text-sm font-medium\">Issue Date</p>\n              <p className=\"text-sm text-muted-foreground\">{issue?.issueDate || \"N/A\"}</p>\n            </div>\n            <div>\n              <p className=\"text-sm font-medium\">Due Date</p>\n              <p className=\"text-sm text-muted-foreground\">{issue?.dueDate || \"N/A\"}</p>\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"returnDate\">Return Date</Label>\n            <Input\n              id=\"returnDate\"\n              type=\"date\"\n              value={returnDate}\n              onChange={(e) => setReturnDate(e.target.value)}\n              required\n              data-testid=\"input-return-date\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)}\n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              disabled={isLoading}\n              data-testid=\"button-return-book\"\n            >\n              {isLoading ? \"Processing...\" : \"Return Book\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4208},"client/src/components/IssueBookDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Input } from \"@/components/ui/input\";\n\ninterface IssueBookDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  book: any;\n  students: any[];\n  onSuccess: () => void;\n}\n\nexport default function IssueBookDialog({ open, onOpenChange, book, students, onSuccess }: IssueBookDialogProps) {\n  const [selectedStudent, setSelectedStudent] = useState(\"\");\n  const [issueDate, setIssueDate] = useState(new Date().toISOString().split('T')[0]);\n  const [dueDate, setDueDate] = useState(\n    new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] // 14 days from now\n  );\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedStudent) {\n      toast({\n        title: \"Error\",\n        description: \"Please select a student\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!book || book.copiesAvailable <= 0) {\n      toast({\n        title: \"Error\",\n        description: \"Book is not available\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      // Issue the book (backend handles book availability update atomically)\n      await apiRequest(\"POST\", \"/api/library/issues\", {\n        studentId: parseInt(selectedStudent),\n        bookId: book.id,\n        issueDate,\n        dueDate,\n        status: 'issued',\n      });\n\n      toast({\n        title: \"Success\",\n        description: `Book issued to student successfully`,\n      });\n\n      // Invalidate queries to refresh data\n      queryClient.invalidateQueries({ queryKey: ['/api/library/books'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/library/issues'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/students'] });\n\n      setSelectedStudent(\"\");\n      onSuccess();\n      onOpenChange(false);\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to issue book\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Issue Book</DialogTitle>\n          <DialogDescription>\n            Issue \"{book?.title}\" to a student\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"student\">Select Student</Label>\n            <Select value={selectedStudent} onValueChange={setSelectedStudent}>\n              <SelectTrigger id=\"student\" data-testid=\"select-student\">\n                <SelectValue placeholder=\"Choose a student\" />\n              </SelectTrigger>\n              <SelectContent>\n                {students.map((student: any) => (\n                  <SelectItem key={student.id} value={student.id.toString()}>\n                    {student.name} ({student.rollNo})\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"issueDate\">Issue Date</Label>\n            <Input\n              id=\"issueDate\"\n              type=\"date\"\n              value={issueDate}\n              onChange={(e) => setIssueDate(e.target.value)}\n              required\n              data-testid=\"input-issue-date\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"dueDate\">Due Date</Label>\n            <Input\n              id=\"dueDate\"\n              type=\"date\"\n              value={dueDate}\n              onChange={(e) => setDueDate(e.target.value)}\n              required\n              data-testid=\"input-due-date\"\n            />\n          </div>\n\n          <div className=\"text-sm text-muted-foreground\">\n            Available copies: {book?.copiesAvailable || 0}\n          </div>\n\n          <DialogFooter>\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)}\n              disabled={isLoading}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              disabled={isLoading || !book || book.copiesAvailable <= 0}\n              data-testid=\"button-issue-book\"\n            >\n              {isLoading ? \"Issuing...\" : \"Issue Book\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5132}},"version":2}